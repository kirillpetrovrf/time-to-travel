# üá®üá≥ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –∫–∏—Ç–∞–π—Å–∫–∏–º–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞–º–∏

## üìä –ü—Ä–æ–±–ª–µ–º–∞
86% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–∏—Ç–∞–π—Å–∫–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω—ã (Xiaomi, Realme, OPPO, Vivo, Huawei), –∫–æ—Ç–æ—Ä—ã–µ **–Ω–µ –∏–º–µ—é—Ç Google Play Services** –∏–ª–∏ –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é.

## ‚úÖ –†–µ—à–µ–Ω–∏—è, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ

### 1. **–£—Å–ª–æ–≤–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase**
```dart
// lib/main.dart
try {
  await Firebase.initializeApp();
  print('‚úÖ Firebase –¥–æ—Å—Ç—É–ø–µ–Ω');
} catch (e) {
  print('‚ö†Ô∏è Firebase –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, —Ä–∞–±–æ—Ç–∞–µ–º offline');
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö —Å Google Services ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Firebase
- ‚úÖ –ù–∞ –∫–∏—Ç–∞–π—Å–∫–∏—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç offline —Ä–µ–∂–∏–º (SQLite)
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **–ù–ï –∫—Ä–∞—à–∏—Ç—Å—è** –Ω–∞ —Å—Ç–∞—Ä—Ç–µ

---

### 2. **Offline-first –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ `SharedPreferences` –∏ `SQLite`:

| –°–µ—Ä–≤–∏—Å | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç Google |
|--------|------------|----------------------|
| –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | `AuthService` (SQLite) | ‚ùå –ù–ï–¢ |
| –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è | `BookingService` (SharedPreferences) | ‚ùå –ù–ï–¢ |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∏ | `TripSettingsService` (–ª–æ–∫–∞–ª—å–Ω–æ) | ‚ùå –ù–ï–¢ |
| –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è | `geolocator` | ‚ö†Ô∏è –ú–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è |

---

## üö® –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞ –∫–∏—Ç–∞–π—Å–∫–∏—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö

### 1. **Firebase –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ pubspec.yaml**
```yaml
# ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –≠—Ç–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Ç—Ä–µ–±—É—é—Ç Google Services
firebase_core: ^2.24.2
firebase_auth: ^4.15.3
cloud_firestore: ^4.13.6
firebase_storage: ^11.5.6
firebase_messaging: ^14.7.9
```

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –£—Å–ª–æ–≤–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ `main.dart`
- ‚úÖ –í—Å–µ Firebase –≤—ã–∑–æ–≤—ã –æ–±–µ—Ä–Ω—É—Ç—ã –≤ try-catch
- ‚úÖ –ï—Å—Ç—å fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

---

### 2. **–†–∞–∑—Ä–µ—à–µ–Ω–∏—è (Permissions)**
–ö–∏—Ç–∞–π—Å–∫–∏–µ –æ–±–æ–ª–æ—á–∫–∏ (MIUI, ColorOS, FuntouchOS) **–æ—á–µ–Ω—å —Å—Ç—Ä–æ–≥–∏–µ** –∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º.

**–¢–µ–∫—É—â–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –≤ AndroidManifest.xml:**
```xml
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.CALL_PHONE" />
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- ‚úÖ –ó–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ (—á–µ—Ä–µ–∑ `permission_handler`)
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –∑–∞—á–µ–º –Ω—É–∂–Ω–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ

---

### 3. **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è Android**
**–¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```gradle
minSdk = flutter.minSdkVersion  // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Android 5.0 (API 21)
targetSdk = flutter.targetSdkVersion
```

**–ö–∏—Ç–∞–π—Å–∫–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω—ã:**
- Realme C30: Android 11 ‚úÖ
- Xiaomi Redmi: Android 9-12 ‚úÖ
- OPPO/Vivo: Android 10-12 ‚úÖ
- Huawei (—Å—Ç–∞—Ä—ã–µ): Android 8-10 ‚ö†Ô∏è

**–í—ã–≤–æ–¥:** minSdk 21 –ø–æ–∫—Ä—ã–≤–∞–µ—Ç 99% –∫–∏—Ç–∞–π—Å–∫–∏—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ ‚úÖ

---

## üß™ –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∫–∏—Ç–∞–π—Å–∫–∏—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö

### **–ú–µ—Ç–æ–¥ 1: ADB Logcat (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω –ø–æ USB
adb devices

# –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
adb logcat | grep -E "flutter|TimeToTravel|crash|error"

# –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
adb logcat -c && adb logcat | grep -E "flutter"
```

### **–ú–µ—Ç–æ–¥ 2: –°–±–æ—Ä–∫–∞ Release APK**
```bash
flutter build apk --release

# APK –±—É–¥–µ—Ç –≤:
# build/app/outputs/flutter-apk/app-release.apk
```

–û—Ç–ø—Ä–∞–≤–∏—Ç—å APK –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –¥–ª—è —Ç–µ—Å—Ç–∞.

---

## üì± –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

| –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ | Android | Google Services | –°—Ç–∞—Ç—É—Å |
|------------|---------|----------------|--------|
| Samsung Galaxy | 11+ | ‚úÖ –ï—Å—Ç—å | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –≠–º—É–ª—è—Ç–æ—Ä (AVD) | 11 | ‚úÖ –ï—Å—Ç—å | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| Realme C30 | 11 | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ | ‚ùì –¢—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∞ |
| Xiaomi (MIUI) | 10-12 | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ | ‚ùì –¢—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∞ |
| OPPO (ColorOS) | 10-12 | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ | ‚ùì –¢—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∞ |
| Huawei | 10+ | ‚ùå –ù–µ—Ç | ‚ùì –¢—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∞ |

---

## üîß –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫—Ä–∞—à–∏—Ç—Å—è

### 1. **–°–æ–±—Ä–∞—Ç—å –ª–æ–≥–∏ –∫—Ä–∞—à–∞**
```bash
adb logcat -d > crash_log.txt
```

### 2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ Google Play Services**
```bash
adb shell dumpsys package com.google.android.gms | grep version
```

–ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ **–Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç** ‚Üí Google Services –Ω–µ—Ç.

### 3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ª–∏ Firebase**
–í –ª–æ–≥–∞—Ö –∏—â–∏—Ç–µ:
```
‚úÖ Firebase —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
–ò–õ–ò
‚ö†Ô∏è Firebase –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, —Ä–∞–±–æ—Ç–∞–µ–º –≤ offline —Ä–µ–∂–∏–º–µ
```

–ï—Å–ª–∏ –Ω–µ—Ç —ç—Ç–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ.

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –ø–æ–ª–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### **–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1-2 –¥–Ω—è):**
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–∏—Ç–∞–π—Å–∫–∏—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö (Realme, Xiaomi, OPPO)
- [ ] –°–æ–±—Ä–∞—Ç—å –ª–æ–≥–∏ –∫—Ä–∞—à–µ–π —á–µ—Ä–µ–∑ ADB
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –Ω–∞ –∫–∏—Ç–∞–π—Å–∫–∏—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –¥–ª—è –≤—Å–µ—Ö Firebase –≤—ã–∑–æ–≤–æ–≤

### **–°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (1 –Ω–µ–¥–µ–ª—è):**
- [ ] –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã Firebase –¥–ª—è –∫–∏—Ç–∞–π—Å–∫–æ–≥–æ —Ä—ã–Ω–∫–∞:
  - Huawei Mobile Services (HMS)
  - –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π backend
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∫—Ä–∞—à–µ–π (Firebase Crashlytics –ò–õ–ò Sentry)
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–ª—è –∫–∏—Ç–∞–π—Å–∫–∏—Ö –æ–±–æ–ª–æ—á–µ–∫

### **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (1 –º–µ—Å—è—Ü):**
- [ ] –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ offline-first –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Huawei AppGallery

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Firebase –Ω–∞ –∫–∏—Ç–∞–π—Å–∫–∏—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö](https://firebase.google.com/docs/projects/manage-installations#china)
- [Huawei Mobile Services (HMS)](https://developer.huawei.com/consumer/en/hms)
- [MIUI —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è](https://github.com/Baseflow/flutter-permission-handler/blob/main/permission_handler/README.md#status-codes)
- [Offline-first Flutter apps](https://docs.flutter.dev/cookbook/persistence)

---

## ‚úÖ –í—ã–≤–æ–¥

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- ‚úÖ –£—Å–ª–æ–≤–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase –¥–æ–±–∞–≤–ª–µ–Ω–∞
- ‚úÖ Offline —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ SQLite
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ù–ï –¥–æ–ª–∂–Ω–æ –∫—Ä–∞—à–∏—Ç—å—Å—è –Ω–∞ –∫–∏—Ç–∞–π—Å–∫–∏—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
- ‚ö†Ô∏è **–†–µ–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–∏—Ç–∞–π—Å–∫–∏—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö**
- ‚ö†Ô∏è –°–±–æ—Ä –ª–æ–≥–æ–≤ –∫—Ä–∞—à–µ–π —á–µ—Ä–µ–∑ ADB
- ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –≤ offline —Ä–µ–∂–∏–º–µ

---

**–ê–≤—Ç–æ—Ä:** GitHub Copilot  
**–î–∞—Ç–∞:** 8 –æ–∫—Ç—è–±—Ä—è 2025 –≥.  
**–í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** 1.0.0+1
