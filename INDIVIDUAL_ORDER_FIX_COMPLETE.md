# โ ะะกะะะะะะะะะ ะะะะะะะะฃะะะฌะะซะฅ ะะะะะะะ - ะะะะะะจะะะ

**ะะฐัะฐ**: 27 ัะฝะฒะฐัั 2026 ะณ.  
**ะัะพะฑะปะตะผั**: 
1. `vehicleClass` ะฝะต ัะพััะฐะฝัะปัั ะดะปั ะธะฝะดะธะฒะธะดัะฐะปัะฝัั ะทะฐะบะฐะทะพะฒ (ะฒัะตะณะดะฐ `null`)
2. ะ UI ะฟะพะบะฐะทัะฒะฐะปะธัั ะฝะตะฟัะฐะฒะธะปัะฝัะต ะฐะดัะตัะฐ ะผะฐัััััะฐ ("ะะพะฝะตัะบ โ ะะพััะพะฒ-ะฝะฐ-ะะพะฝั" ะฒะผะตััะพ ัะตะฐะปัะฝัั)
3. ะัะถะฝะพ ะฑัะปะพ ะฟัะพะดัะฑะปะธัะพะฒะฐัั ะธัะฟัะฐะฒะปะตะฝะธั ะดะปั individual, ะบะฐะบ ะดะปั customRoute

---

## ๐ง ะัะฟัะฐะฒะปะตะฝะฝัะต ัะฐะนะปั

### 1. `lib/features/booking/screens/individual_booking_screen.dart`

**ะัะพะฑะปะตะผะฐ**: `vehicleClass` ะฟะตัะตะดะฐะฒะฐะปัั ะบะฐะบ `null`, ะตัะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฝะต ะฒัะฑัะฐะป ะบะปะฐัั ััะฐะฝัะฟะพััะฐ ัะฒะฝะพ.

**ะัะฟัะฐะฒะปะตะฝะธะต** (ัััะพะบะฐ 2248):
```dart
// โ ะะซะะ:
vehicleClass: _selectedVehicleClass?.toString().split('.').last,

// โ ะกะขะะะ:
vehicleClass: _selectedVehicleClass?.toString().split('.').last ?? 'sedan',
```

**ะะตะทัะปััะฐั**: ะขะตะฟะตัั ะฟัะธ ัะพะทะดะฐะฝะธะธ ะธะฝะดะธะฒะธะดัะฐะปัะฝะพะณะพ ะทะฐะบะฐะทะฐ ะฑะตะท ะฒัะฑะพัะฐ ััะฐะฝัะฟะพััะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธ ัััะฐะฝะฐะฒะปะธะฒะฐะตััั `'sedan'` (ะฑะตัะฟะปะฐัะฝัะน ะฒะฐัะธะฐะฝั).

---

### 2. `lib/features/orders/screens/booking_detail_screen.dart`

**ะัะพะฑะปะตะผะฐ**: ะะปั `TripType.individual` ะฟะพะบะฐะทัะฒะฐะปะพัั ะพะฑัะตะต ะฝะฐะฟัะฐะฒะปะตะฝะธะต ("ะะพะฝะตัะบ โ ะะพััะพะฒ-ะฝะฐ-ะะพะฝั"), ะฐ ะฝะต ัะตะฐะปัะฝัะต ะฐะดัะตัะฐ ะธะท `pickupAddress` / `dropoffAddress`.

**ะัะฟัะฐะฒะปะตะฝะธะต** (ัััะพะบะธ 183-193):
```dart
// โ ะะซะะ:
} else if (_currentBooking.tripType == TripType.customRoute &&
           _currentBooking.pickupAddress != null &&
           _currentBooking.pickupAddress!.isNotEmpty &&
           _currentBooking.dropoffAddress != null &&
           _currentBooking.dropoffAddress!.isNotEmpty) {

// โ ะกะขะะะ:
} else if ((_currentBooking.tripType == TripType.customRoute ||
            _currentBooking.tripType == TripType.individual) &&
           _currentBooking.pickupAddress != null &&
           _currentBooking.pickupAddress!.isNotEmpty &&
           _currentBooking.dropoffAddress != null &&
           _currentBooking.dropoffAddress!.isNotEmpty) {
```

**ะะตะทัะปััะฐั**: ะขะตะฟะตัั ะฒ ะดะตัะฐะปัะฝะพะผ ะฟัะพัะผะพััะต ะทะฐะบะฐะทะฐ ะดะปั individual ะฟะพะบะฐะทัะฒะฐัััั ะฝะฐััะพััะธะต ะฐะดัะตัะฐ (ะฝะฐะฟัะธะผะตั, "ะะตะฝะธะฝัะบะธะน ะฟัะพัะฟะตะบั, 47, ะะพะฝะตัะบ โ ะผะธะบัะพัะฐะนะพะฝ ะะตะฝะณะพัะพะดะพะบ, ะะพััะพะฒ-ะฝะฐ-ะะพะฝั").

---

### 3. `lib/features/orders/screens/orders_screen.dart`

**ะัะพะฑะปะตะผะฐ**: ะ ัะฟะธัะบะต ะทะฐะบะฐะทะพะฒ ะดะปั `individual` ัะพะถะต ะฟะพะบะฐะทัะฒะฐะปะพัั ะพะฑัะตะต ะฝะฐะฟัะฐะฒะปะตะฝะธะต ะฒะผะตััะพ ะฐะดัะตัะพะฒ.

**ะัะฟัะฐะฒะปะตะฝะธะต** (ัััะพะบะธ 289-297):
```dart
// โ ะะซะะ:
if (booking.tripType == TripType.customRoute &&
    booking.pickupAddress != null &&
    booking.pickupAddress!.isNotEmpty &&
    booking.dropoffAddress != null &&
    booking.dropoffAddress!.isNotEmpty) {

// โ ะกะขะะะ:
if ((booking.tripType == TripType.customRoute ||
     booking.tripType == TripType.individual) &&
    booking.pickupAddress != null &&
    booking.pickupAddress!.isNotEmpty &&
    booking.dropoffAddress != null &&
    booking.dropoffAddress!.isNotEmpty) {
```

**ะะตะทัะปััะฐั**: ะ ัะฟะธัะบะต "ะะพะธ ะทะฐะบะฐะทั" ะดะปั individual ะพัะพะฑัะฐะถะฐัััั ัะตะฐะปัะฝัะต ะฐะดัะตัะฐ.

---

## ๐ ะััะธัะตะบัััะฐ ะดะฐะฝะฝัั (vehicleClass)

### ะะพะปะฝัะน ะฟััั ะดะฐะฝะฝัั:

```
1. UI (IndividualBookingScreen)
   โ _selectedVehicleClass = VehicleClass.sedan (ะธะปะธ null)
   โ ะะพะฝะฒะตััะฐัะธั: VehicleClass.sedan โ "sedan"
   
2. Booking (app model)
   โ vehicleClass: String? = "sedan"
   
3. BookingService.createBooking()
   โ ะะตัะตะดะฐัั vehicleClass ะฒ OrdersService
   
4. OrdersService.createOrder()
   โ vehicleClass: String = "sedan"
   
5. CreateOrderParams (domain)
   โ vehicleClass: String? = "sedan"
   
6. OrdersRepositoryImpl
   โ orderData['vehicleClass'] = "sedan"
   
7. Backend API POST /orders
   โ ะกะพััะฐะฝัะตั ะฒ PostgreSQL
   
8. PostgreSQL: vehicle_class = 'sedan'

ะะฑัะฐัะฝัะน ะฟััั:
Backend โ OrderModel โ Order (domain) โ Booking โ UI
```

---

## ๐ฏ ะะตะทัะปััะฐัั ัะตััะธัะพะฒะฐะฝะธั

### ะกัะฐััะน ะทะฐะบะฐะท (ัะพะทะดะฐะฝะฝัะน ะดะพ ะธัะฟัะฐะฒะปะตะฝะธั):
```json
{
  "id": "9115ad79-9f9e-4d3f-b3c3-90b9e230741f",
  "orderId": "2026-01-26-189-I",
  "tripType": "individual",
  "fromAddress": "ะะตะฝะธะฝัะบะธะน ะฟัะพัะฟะตะบั, 47, ะะพะฝะตัะบ",
  "toAddress": "ะผะธะบัะพัะฐะนะพะฝ ะะตะฝะณะพัะพะดะพะบ, ะะพััะพะฒ-ะฝะฐ-ะะพะฝั",
  "vehicleClass": null  โ (ัะพะทะดะฐะฝ ะดะพ ะธัะฟัะฐะฒะปะตะฝะธั)
}
```

**ะะถะธะดะฐะตะผัะน ะฝะพะฒัะน ะทะฐะบะฐะท** (ะฟะพัะปะต ะธัะฟัะฐะฒะปะตะฝะธั):
```json
{
  "orderId": "2026-01-27-XXX-I",
  "tripType": "individual",
  "fromAddress": "ะะตะฝะธะฝัะบะธะน ะฟัะพัะฟะตะบั, 47, ะะพะฝะตัะบ",
  "toAddress": "ะผะธะบัะพัะฐะนะพะฝ ะะตะฝะณะพัะพะดะพะบ, ะะพััะพะฒ-ะฝะฐ-ะะพะฝั",
  "vehicleClass": "sedan"  โ (ะฑัะดะตั ัะพััะฐะฝัะฝ ะฐะฒัะพะผะฐัะธัะตัะบะธ)
}
```

---

## ๐ฑ UI ะพัะพะฑัะฐะถะตะฝะธะต

### ะะพ ะธัะฟัะฐะฒะปะตะฝะธั:

**ะกะฟะธัะพะบ ะทะฐะบะฐะทะพะฒ:**
```
โโ Order Card โโโโโโโโโโโโโโโโโโโโโ
โ [pending]              8000 โฝ > โ
โ ะะฐะบะฐะท #2026-01-26-189-I         โ
โ ะะพะฝะตัะบ โ ะะพััะพะฒ-ะฝะฐ-ะะพะฝั  โ     โ
โ ๐ 28 ัะฝะฒะฐัั 2026 ะณ. ะฒ 04:29    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ะะตัะฐะปัะฝัะน ะฟัะพัะผะพัั:**
```
Header: ะะฐะบะฐะท #2026-01-26-189-I โ

โโ ะะฐััััั โโโโโโโโโโโโโโโโโโโโโโโโ
โ ะะพะฝะตัะบ โ ะะพััะพะฒ-ะฝะฐ-ะะพะฝั  โ     โ
โ ๐ ะัะบัะดะฐ: ...                  โ
โ ๐ ะัะดะฐ: ...                    โ
โ ๐ข ะะพะผะตั ะทะฐะบะฐะทะฐ: 2026-01-26...  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโ ะขัะฐะฝัะฟะพัั โโโโโโโโโโโโโโโโโโโโโโ
โ ๐ ะกะตะดะฐะฝ (ะดะพ 4 ะผะตัั)            โ
โ    +0 โฝ  (ะดะตัะพะปั ะฟัะธ null)      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะะพัะปะต ะธัะฟัะฐะฒะปะตะฝะธั:

**ะกะฟะธัะพะบ ะทะฐะบะฐะทะพะฒ:**
```
โโ Order Card โโโโโโโโโโโโโโโโโโโโโ
โ [pending]              8000 โฝ > โ
โ ะะฐะบะฐะท #2026-01-26-189-I  โ     โ
โ ะะตะฝะธะฝัะบะธะน ะฟัะพัะฟะตะบั, 47 โ        โ
โ ะผะธะบัะพัะฐะนะพะฝ ะะตะฝะณะพัะพะดะพะบ  โ       โ
โ ๐ 28 ัะฝะฒะฐัั 2026 ะณ. ะฒ 04:29    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ะะตัะฐะปัะฝัะน ะฟัะพัะผะพัั:**
```
Header: ะะฐะบะฐะท #2026-01-26-189-I โ

โโ ะะฐััััั โโโโโโโโโโโโโโโโโโโโโโโโ
โ ะะตะฝะธะฝัะบะธะน ะฟัะพัะฟะตะบั, 47 โ        โ
โ ะผะธะบัะพัะฐะนะพะฝ ะะตะฝะณะพัะพะดะพะบ  โ       โ
โ                                  โ
โ ๐ ะัะบัะดะฐ: ะะตะฝะธะฝัะบะธะน...         โ
โ ๐ ะัะดะฐ: ะผะธะบัะพัะฐะนะพะฝ...          โ
โ                                  โ
โ ๐ข ะะพะผะตั ะทะฐะบะฐะทะฐ: 2026-01-26...  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโ ะะฝะดะธะฒะธะดัะฐะปัะฝัะน ััะฐะฝััะตั โโโโโโโ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโ ะขัะฐะฝัะฟะพัั โโโโโโโโโโโโโโโโโโโโโโ
โ ๐ ะกะตะดะฐะฝ (ะดะพ 4 ะผะตัั)            โ
โ    +0 โฝ  โ (ัะพััะฐะฝัะฝ ะฒ ะะ)     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ะัะพะฒะตัะบะฐ ะฒะฐะปะธะดะฝะพััะธ

### ะะพะผะฐะฝะดั ะดะปั ะฟัะพะฒะตัะบะธ:

**1. ะัะพะฒะตัะธัั vehicleClass ะฒ ะฝะพะฒัั ะทะฐะบะฐะทะฐั:**
```bash
curl -s 'https://titotr.ru/api/orders' | \
jq '.orders[] | select(.tripType == "individual") | {orderId, vehicleClass, fromAddress}'
```

**ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั ะดะปั ะะะะะะ ะทะฐะบะฐะทะฐ:**
```json
{
  "orderId": "2026-01-27-XXX-I",
  "vehicleClass": "sedan",  โ
  "fromAddress": "..."
}
```

**2. ะัะพะฒะตัะธัั ะปะพะณะธ ะฟัะธ ัะพะทะดะฐะฝะธะธ ะทะฐะบะฐะทะฐ:**
```bash
# ะ Android logcat ะดะพะปะถะฝั ะฟะพัะฒะธัััั:
๐ [DEBUG] _selectedVehicleClass = null
๐ [INDIVIDUAL] vehicleClass ะฒ Booking = sedan  โ (ั ะดะตัะพะปัะพะผ)
๐ [INDIVIDUAL] booking.vehicleClass = sedan  โ
```

---

## โ ะงะตะบ-ะปะธัั ะทะฐะฒะตััะตะฝะธั

- [x] vehicleClass ัะพััะฐะฝัะตััั ะบะฐะบ 'sedan' ะฟะพ ัะผะพะปัะฐะฝะธั ะดะปั individual
- [x] UI ะฟะพะบะฐะทัะฒะฐะตั ัะตะฐะปัะฝัะต ะฐะดัะตัะฐ ะฒ ะดะตัะฐะปัะฝะพะผ ะฟัะพัะผะพััะต
- [x] UI ะฟะพะบะฐะทัะฒะฐะตั ัะตะฐะปัะฝัะต ะฐะดัะตัะฐ ะฒ ัะฟะธัะบะต ะทะฐะบะฐะทะพะฒ
- [x] ะััะธัะตะบัััะฐ ะดะฐะฝะฝัั ัะพะพัะฒะตัััะฒัะตั customRoute (ะตะดะธะฝะพะพะฑัะฐะทะธะต)
- [x] ะัะฐัะธะฒัะน ะฝะพะผะตั ะทะฐะบะฐะทะฐ ะพัะพะฑัะฐะถะฐะตััั ะบะพััะตะบัะฝะพ ะฒะตะทะดะต
- [x] ะัะฟัะฐะฒะปะตะฝะธั ะฟัะธะผะตะฝะตะฝั ะบะพ ะฒัะตะผ 3 ัะฐะนะปะฐะผ

---

## ๐ ะะฝััััะบัะธะธ ะดะปั ัะตััะธัะพะฒะฐะฝะธั

### ะจะฐะณ 1: Hot Restart
```bash
# ะ ัะตัะผะธะฝะฐะปะต Flutter ะฝะฐะถะผะธัะต:
R  # Full restart
```

### ะจะฐะณ 2: ะกะพะทะดะฐัั ะฝะพะฒัะน individual ะทะฐะบะฐะท
1. ะัะบัะพะนัะต ะฟัะธะปะพะถะตะฝะธะต
2. ะะฐะถะผะธัะต "ะะฝะดะธะฒะธะดัะฐะปัะฝัะน ััะฐะฝััะตั"
3. ะัะฑะตัะธัะต ะผะฐััััั "ะะพะฝะตัะบ โ ะะพััะพะฒ-ะฝะฐ-ะะพะฝั"
4. ะฃะบะฐะถะธัะต ะฐะดัะตัะฐ ะพัะฟัะฐะฒะปะตะฝะธั ะธ ะฝะฐะทะฝะฐัะตะฝะธั
5. **ะะ ะะซะะะะะะขะ** ะบะปะฐัั ััะฐะฝัะฟะพััะฐ (ะพััะฐะฒััะต ะฟะพ ัะผะพะปัะฐะฝะธั)
6. ะะฐะฒะตััะธัะต ะฑัะพะฝะธัะพะฒะฐะฝะธะต

### ะจะฐะณ 3: ะัะพะฒะตัะธัั UI
**ะะถะธะดะฐะฝะธั:**
- โ ะ ัะฟะธัะบะต "ะะพะธ ะทะฐะบะฐะทั" ะฟะพะบะฐะทัะฒะฐัััั ัะตะฐะปัะฝัะต ะฐะดัะตัะฐ
- โ ะ ะดะตัะฐะปัั ะทะฐะบะฐะทะฐ ะฟะพะบะฐะทัะฒะฐัััั ัะตะฐะปัะฝัะต ะฐะดัะตัะฐ
- โ ะะพะผะตั ะทะฐะบะฐะทะฐ ะพัะพะฑัะฐะถะฐะตััั ะบะฐะบ `#2026-01-27-XXX-I`
- โ ะขัะฐะฝัะฟะพัั ะฟะพะบะฐะทัะฒะฐะตััั ะบะฐะบ "ะกะตะดะฐะฝ (ะดะพ 4 ะผะตัั) +0โฝ"

### ะจะฐะณ 4: ะัะพะฒะตัะธัั backend
```bash
curl -s 'https://titotr.ru/api/orders' | \
jq '.orders[] | select(.tripType == "individual") | last' | \
jq '{orderId, vehicleClass, fromAddress, toAddress}'
```

**ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:**
```json
{
  "orderId": "2026-01-27-XXX-I",
  "vehicleClass": "sedan",  โ
  "fromAddress": "ะะตะฝะธะฝัะบะธะน ะฟัะพัะฟะตะบั, 47, ะะพะฝะตัะบ",
  "toAddress": "ะผะธะบัะพัะฐะนะพะฝ ะะตะฝะณะพัะพะดะพะบ, ะะพััะพะฒ-ะฝะฐ-ะะพะฝั"
}
```

---

## ๐ ะะพะฟะพะปะฝะธัะตะปัะฝัะต ะทะฐะผะตัะฐะฝะธั

### ะะพัะตะผั sedan ะฟะพ ัะผะพะปัะฐะฝะธั?
- ะกะพะพัะฒะตัััะฒัะตั UX customRoute ะทะฐะบะฐะทะพะฒ
- ะะฐะทะพะฒัะน ะฒะฐัะธะฐะฝั ะฑะตะท ะดะพะฟะปะฐัั (+0โฝ)
- ะะพะปัะทะพะฒะฐัะตะปั ะผะพะถะตั ัะฒะฝะพ ะฒัะฑัะฐัั ะดััะณะพะน ะบะปะฐัั ัะตัะตะท ัะบัะฐะฝ VehicleSelectionScreen

### ะฃะฝะธัะธะบะฐัะธั ั customRoute
ะขะตะฟะตัั ะพะฑะฐ ัะธะฟะฐ ะทะฐะบะฐะทะพะฒ (customRoute ะธ individual) ะพะฑัะฐะฑะฐััะฒะฐัััั ะพะดะธะฝะฐะบะพะฒะพ:
1. ะกะพััะฐะฝััั vehicleClass
2. ะะพะบะฐะทัะฒะฐัั ัะตะฐะปัะฝัะต ะฐะดัะตัะฐ ะฒ UI
3. ะะผะตัั sedan ะฟะพ ัะผะพะปัะฐะฝะธั

### ะกัะฐััะต ะทะฐะบะฐะทั (ั vehicleClass = null)
ะัะดัั ะฟัะพะดะพะปะถะฐัั ะฟะพะบะฐะทัะฒะฐัั "ะกะตะดะฐะฝ +0โฝ" ะฒ UI ะฑะปะฐะณะพะดะฐัั fallback ะปะพะณะธะบะต ะฒ `booking_detail_screen.dart` (ัััะพะบะฐ 669):
```dart
final vehicleClassStr = _currentBooking.vehicleClass ?? 'sedan';
```

---

## ๐ ะัะพะณะธ

โ **ะัะต ะฟัะพะฑะปะตะผั ัะตัะตะฝั:**
1. vehicleClass ัะตะฟะตัั ัะพััะฐะฝัะตััั ะดะปั individual ะทะฐะบะฐะทะพะฒ
2. ะะตะฐะปัะฝัะต ะฐะดัะตัะฐ ะพัะพะฑัะฐะถะฐัััั ะบะพััะตะบัะฝะพ
3. ะัะฐัะธะฒัะต ะฝะพะผะตัะฐ ะทะฐะบะฐะทะพะฒ ัะฐะฑะพัะฐัั ะฟัะฐะฒะธะปัะฝะพ

โ **ะะพะด ัะฝะธัะธัะธัะพะฒะฐะฝ** ะผะตะถะดั customRoute ะธ individual

โ **ะะฑัะฐัะฝะฐั ัะพะฒะผะตััะธะผะพััั** ัะพััะฐะฝะตะฝะฐ ะดะปั ััะฐััั ะทะฐะบะฐะทะพะฒ

---

**ะะพัะพะฒะพ ะบ ัะตััะธัะพะฒะฐะฝะธั! ๐**
