# üöÄ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –≥—Ä—É–ø–ø –º–∞—Ä—à—Ä—É—Ç–æ–≤

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–¥–∞–Ω–Ω—ã—Ö)
3. [–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è](#—Ñ–∞–π–ª—ã-–¥–ª—è-—Å–æ–∑–¥–∞–Ω–∏—è–∏–∑–º–µ–Ω–µ–Ω–∏—è)
4. [–≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#—ç—Ç–∞–ø—ã-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
5. [–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã](#–ª–æ–≥–∏–∫–∞-—Ä–∞–±–æ—Ç—ã)
6. [–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏](#–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å-–∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏)
7. [–ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö](#–º–∏–≥—Ä–∞—Ü–∏—è-—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö-–¥–∞–Ω–Ω—ã—Ö)

---

## üéØ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

### –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞–º–∏ —á–µ—Ä–µ–∑ **–≥—Ä—É–ø–ø—ã**, –ø–æ–∑–≤–æ–ª—è—é—â—É—é:
- ‚úÖ –ò–∑–º–µ–Ω—è—Ç—å —Ü–µ–Ω—ã –¥–ª—è –≥—Ä—É–ø–ø—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤ –æ–¥–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π
- ‚úÖ –ò–∑–º–µ–Ω—è—Ç—å —Ü–µ–Ω—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
- ‚úÖ –í–∏–¥–µ—Ç—å, –∫–∞–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≥—Ä—É–ø–ø–æ–≤—É—é —Ü–µ–Ω—É, –∞ –∫–∞–∫–∏–µ - –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—É—é

### –î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã

#### –†–µ–∂–∏–º 1: –ì—Ä—É–ø–ø–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
```
–î–∏—Å–ø–µ—Ç—á–µ—Ä –º–µ–Ω—è–µ—Ç —Ü–µ–Ω—É –≥—Ä—É–ø–ø—ã "–†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å": 8000‚ÇΩ ‚Üí 9000‚ÇΩ

‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –í–°–ï –º–∞—Ä—à—Ä—É—Ç—ã —Å —Ñ–ª–∞–≥–æ–º useGroupPrice=true:
  ‚Ä¢ –î–æ–Ω–µ—Ü–∫ ‚Üí –†–æ—Å—Ç–æ–≤: 8000‚ÇΩ ‚Üí 9000‚ÇΩ
  ‚Ä¢ –†–æ—Å—Ç–æ–≤ ‚Üí –î–æ–Ω–µ—Ü–∫: 8000‚ÇΩ ‚Üí 9000‚ÇΩ
  ‚Ä¢ –•–∞—Ä—Ü—ã–∑—Å–∫ ‚Üí –†–æ—Å—Ç–æ–≤: 8000‚ÇΩ ‚Üí 9000‚ÇΩ
  ‚Ä¢ ... –∏ —Ç.–¥.
  
‚Üí –ú–∞—Ä—à—Ä—É—Ç—ã —Å customPrice=true –ù–ï –∏–∑–º–µ–Ω—è—é—Ç—Å—è
```

#### –†–µ–∂–∏–º 2: –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
```
–î–∏—Å–ø–µ—Ç—á–µ—Ä –º–µ–Ω—è–µ—Ç —Ü–µ–Ω—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞:
–ï–Ω–∞–∫–∏–µ–≤–æ ‚Üí –†–æ—Å—Ç–æ–≤: 12000‚ÇΩ ‚Üí 11000‚ÇΩ

‚Üí –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¢–û–õ–¨–ö–û —ç—Ç–æ—Ç –º–∞—Ä—à—Ä—É—Ç
‚Üí –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Ñ–ª–∞–≥ customPrice=true
‚Üí –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –≥—Ä—É–ø–ø–æ–≤–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —ç—Ç–æ—Ç –º–∞—Ä—à—Ä—É—Ç –ù–ï —Ç—Ä–æ–≥–∞–µ—Ç—Å—è
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### 1. –ú–æ–¥–µ–ª—å RouteGroup (–Ω–æ–≤–∞—è)

**–§–∞–π–ª:** `lib/models/route_group.dart`

```dart
class RouteGroup {
  final String id;
  final String name;
  final String description;
  final double basePrice;
  final List<String> destinationCities; // –ì–æ—Ä–æ–¥–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
  final List<String> originCities;      // –ì–æ—Ä–æ–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
  final bool autoGenerateReverse;       // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
  final DateTime createdAt;
  final DateTime updatedAt;

  RouteGroup({
    required this.id,
    required this.name,
    required this.description,
    required this.basePrice,
    required this.destinationCities,
    required this.originCities,
    required this.autoGenerateReverse,
    required this.createdAt,
    required this.updatedAt,
  });

  // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤/–∏–∑ Firestore
  Map<String, dynamic> toFirestore() { ... }
  factory RouteGroup.fromFirestore(Map<String, dynamic> data, String id) { ... }
}
```

**Firebase –∫–æ–ª–ª–µ–∫—Ü–∏—è:** `route_groups`

**–ü—Ä–∏–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞:**
```json
{
  "id": "rostov_region",
  "name": "–†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
  "description": "–í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã –≤ –†–æ—Å—Ç–æ–≤—Å–∫—É—é –æ–±–ª–∞—Å—Ç—å",
  "basePrice": 8000,
  "destinationCities": ["–†–æ—Å—Ç–æ–≤", "–¢–∞–≥–∞–Ω—Ä–æ–≥", "–ë–∞—Ç–∞–π—Å–∫", "–ê–∫—Å–∞–π"],
  "originCities": ["–î–æ–Ω–µ—Ü–∫", "–ú–∞–∫–µ–µ–≤–∫–∞", "–•–∞—Ä—Ü—ã–∑—Å–∫", "–ï–Ω–∞–∫–∏–µ–≤–æ"],
  "autoGenerateReverse": true,
  "createdAt": "2025-12-05T10:00:00Z",
  "updatedAt": "2025-12-05T10:00:00Z"
}
```

---

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å PredefinedRoute

**–§–∞–π–ª:** `lib/models/predefined_route.dart` (–º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å)

**–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è:**
```dart
class PredefinedRoute {
  final String id;
  final String fromCity;
  final String toCity;
  final double price;
  final DateTime createdAt;
  final DateTime updatedAt;
  
  // üÜï –ù–û–í–´–ï –ü–û–õ–Ø:
  final String? groupId;        // ID –≥—Ä—É–ø–ø—ã (–º–æ–∂–µ—Ç –±—ã—Ç—å null –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤)
  final bool useGroupPrice;     // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ü–µ–Ω—É –∏–∑ –≥—Ä—É–ø–ø—ã
  final bool customPrice;       // –¶–µ–Ω–∞ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤—Ä—É—á–Ω—É—é
  final bool isReverse;         // –û–±—Ä–∞—Ç–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)

  PredefinedRoute({
    required this.id,
    required this.fromCity,
    required this.toCity,
    required this.price,
    required this.createdAt,
    required this.updatedAt,
    this.groupId,
    this.useGroupPrice = true,
    this.customPrice = false,
    this.isReverse = false,
  });
}
```

**Firebase –∫–æ–ª–ª–µ–∫—Ü–∏—è:** `predefined_routes` (—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è)

**–ü—Ä–∏–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞ –° –ì–†–£–ü–ü–û–í–û–ô –¶–ï–ù–û–ô:**
```json
{
  "fromCity": "–î–æ–Ω–µ—Ü–∫",
  "toCity": "–†–æ—Å—Ç–æ–≤",
  "price": 8000,
  "groupId": "rostov_region",
  "useGroupPrice": true,
  "customPrice": false,
  "isReverse": false,
  "createdAt": "2025-12-05T10:00:00Z",
  "updatedAt": "2025-12-05T10:00:00Z"
}
```

**–ü—Ä–∏–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞ –° –ò–ù–î–ò–í–ò–î–£–ê–õ–¨–ù–û–ô –¶–ï–ù–û–ô:**
```json
{
  "fromCity": "–ï–Ω–∞–∫–∏–µ–≤–æ",
  "toCity": "–†–æ—Å—Ç–æ–≤",
  "price": 12000,
  "groupId": "rostov_region",
  "useGroupPrice": false,
  "customPrice": true,
  "isReverse": false,
  "createdAt": "2025-12-05T10:00:00Z",
  "updatedAt": "2025-12-05T10:00:00Z"
}
```

---

## üóÇÔ∏è –§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è

### –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã:

#### 1. `lib/models/route_group.dart`
- –ú–æ–¥–µ–ª—å –≥—Ä—É–ø–ø—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤
- –ú–µ—Ç–æ–¥—ã toFirestore/fromFirestore

#### 2. `lib/services/route_group_service.dart`
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –≥—Ä—É–ø–ø
- –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –≥—Ä—É–ø–ø
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω—ã –≥—Ä—É–ø–ø—ã
- –£–¥–∞–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã

#### 3. `lib/data/route_groups_initializer.dart`
- –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä—É–ø–ø
- 9 –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø

#### 4. `lib/features/admin/screens/route_groups_admin_screen.dart`
- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥—Ä—É–ø–ø–∞–º–∏
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≥—Ä—É–ø–ø
- –ö–Ω–æ–ø–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è

#### 5. `lib/features/admin/screens/route_group_details_screen.dart`
- –≠–∫—Ä–∞–Ω –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –≥—Ä—É–ø–ø—ã
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–∑–æ–≤–æ–π —Ü–µ–Ω—ã –≥—Ä—É–ø–ø—ã
- –°–ø–∏—Å–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –≥—Ä—É–ø–ø–µ
- –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤

#### 6. `lib/features/admin/widgets/route_group_card.dart`
- –í–∏–¥–∂–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –≥—Ä—É–ø–ø—ã
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è, —Ü–µ–Ω—ã, –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤

#### 7. `lib/features/admin/widgets/route_in_group_item.dart`
- –í–∏–¥–∂–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∞ –≤–Ω—É—Ç—Ä–∏ –≥—Ä—É–ø–ø—ã
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ü–µ–Ω—ã (–≥—Ä—É–ø–ø–æ–≤–∞—è/–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è)
- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

---

### –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã:

#### 1. `lib/models/predefined_route.dart`
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è: groupId, useGroupPrice, customPrice, isReverse
- –û–±–Ω–æ–≤–∏—Ç—å toFirestore/fromFirestore

#### 2. `lib/services/route_management_service.dart`
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ updateRoutePrice() - –¥–ª—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ updateGroupRoutes() - –¥–ª—è –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ getRoutesByGroup() - –ø–æ–ª—É—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≥—Ä—É–ø–ø—ã
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ resetRouteToGroupPrice() - –≤–æ–∑–≤—Ä–∞—Ç –∫ –≥—Ä—É–ø–ø–æ–≤–æ–π —Ü–µ–Ω–µ

#### 3. `lib/data/route_initializer.dart`
- –ü–µ—Ä–µ–¥–µ–ª–∞—Ç—å —Å–ø–∏—Å–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –≥—Ä—É–ø–ø–∞–º
- –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã
- –î–æ–±–∞–≤–∏—Ç—å groupId –∫ –∫–∞–∂–¥–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É

#### 4. `lib/features/admin/screens/admin_routes_screen.dart`
- –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "–ì—Ä—É–ø–ø—ã" / "–í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã"
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å route_groups_admin_screen

---

## üõ†Ô∏è –≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤ (1-2 —á–∞—Å–∞)

#### –®–∞–≥ 1.1: –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å RouteGroup
```dart
// lib/models/route_group.dart
class RouteGroup {
  // ... (—Å–º. –≤—ã—à–µ)
}
```

#### –®–∞–≥ 1.2: –û–±–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª—å PredefinedRoute
```dart
// lib/models/predefined_route.dart
// –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è
```

#### –®–∞–≥ 1.3: –°–æ–∑–¥–∞—Ç—å RouteGroupService
```dart
// lib/services/route_group_service.dart
class RouteGroupService {
  static final FirebaseFirestore _firestore = FirebaseFirestore.instance;
  
  // –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –≥—Ä—É–ø–ø—ã
  Future<List<RouteGroup>> getAllGroups();
  
  // –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É
  Future<void> createGroup(RouteGroup group);
  
  // –û–±–Ω–æ–≤–∏—Ç—å –±–∞–∑–æ–≤—É—é —Ü–µ–Ω—É –≥—Ä—É–ø–ø—ã
  Future<void> updateGroupPrice(String groupId, double newPrice);
  
  // –£–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É
  Future<void> deleteGroup(String groupId);
  
  // –ü–æ–ª—É—á–∏—Ç—å –≥—Ä—É–ø–ø—É –ø–æ ID
  Future<RouteGroup?> getGroupById(String groupId);
}
```

---

### –≠—Ç–∞–ø 2: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø (30 –º–∏–Ω—É—Ç)

#### –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `lib/data/route_groups_initializer.dart`

```dart
class RouteGroupsInitializer {
  static List<RouteGroup> get initialGroups {
    final now = DateTime.now();
    
    return [
      // –ì—Ä—É–ø–ø–∞ 1: –†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å
      RouteGroup(
        id: 'rostov_region',
        name: '–†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å',
        description: '–ú–∞—Ä—à—Ä—É—Ç—ã –≤ –≥–æ—Ä–æ–¥–∞ –†–æ—Å—Ç–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏',
        basePrice: 8000,
        destinationCities: ['–†–æ—Å—Ç–æ–≤', '–¢–∞–≥–∞–Ω—Ä–æ–≥', '–ë–∞—Ç–∞–π—Å–∫', '–ê–∫—Å–∞–π'],
        originCities: ['–î–æ–Ω–µ—Ü–∫', '–ú–∞–∫–µ–µ–≤–∫–∞', '–•–∞—Ä—Ü—ã–∑—Å–∫', '–ê–º–≤—Ä–æ—Å–∏–µ–≤–∫–∞', 
                       '–ó—É–≥—Ä—ç—Å', '–®–∞—Ö—Ç—ë—Ä—Å–∫', '–¢–æ—Ä–µ–∑', '–ò–ª–æ–≤–∞–π—Å–∫–∏–π', 
                       '–°—Ç–∞—Ä–æ–±–µ—à–µ–≤–æ', '–ù–æ–≤—ã–π —Å–≤–µ—Ç'],
        autoGenerateReverse: true,
        createdAt: now,
        updatedAt: now,
      ),
      
      // –ì—Ä—É–ø–ø–∞ 2: –ö—Ä—ã–º—Å–∫–∏–π –ø–æ–ª—É–æ—Å—Ç—Ä–æ–≤
      RouteGroup(
        id: 'crimea',
        name: '–ö—Ä—ã–º—Å–∫–∏–π –ø–æ–ª—É–æ—Å—Ç—Ä–æ–≤',
        description: '–í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã –Ω–∞ –ö—Ä—ã–º—Å–∫–∏–π –ø–æ–ª—É–æ—Å—Ç—Ä–æ–≤',
        basePrice: 45000,
        destinationCities: [
          '–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö—Ä—ã–º', '–°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å', '–Ø–ª—Ç–∞', '–°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å',
          '–ï–≤–ø–∞—Ç–æ—Ä–∏—è', '–§–µ–æ–¥–æ—Å–∏—è', '–ö–µ—Ä—á—å', '–ê–ª—É—à—Ç–∞', '–°—É–¥–∞–∫',
          '–ë–∞–ª–∞–∫–ª–∞–≤–∞', '–ë–µ–ª–æ–≥–æ—Ä—Å–∫', '–°–∞–∫–∏', '–î–∂–∞–Ω–∫–æ–π', '–ö—Ä–∞—Å–Ω–æ–ø–µ—Ä–µ–∫–æ–ø—Å–∫'
        ],
        originCities: ['–î–æ–Ω–µ—Ü–∫', '–ú–∞–∫–µ–µ–≤–∫–∞'],
        autoGenerateReverse: true,
        createdAt: now,
        updatedAt: now,
      ),
      
      // –ì—Ä—É–ø–ø–∞ 3: –ü—Ä–∏–∞–∑–æ–≤—å–µ
      RouteGroup(
        id: 'azov_sea',
        name: '–ü—Ä–∏–∞–∑–æ–≤—å–µ',
        description: '–ú–∞—Ä—à—Ä—É—Ç—ã –∫ –ê–∑–æ–≤—Å–∫–æ–º—É –º–æ—Ä—é',
        basePrice: 7500,
        destinationCities: [
          '–ù–æ–≤–æ–∞–∑–æ–≤—Å–∫', '–°–µ–¥–æ–≤–æ', '–ú–∞—Ä–∏—É–ø–æ–ª—å', '–ú–µ–ª–µ–∫–∏–Ω–æ', 
          '–Æ—Ä—å–µ–≤–∫–∞', '—É—Ä–∑—É—Ñ', '–ë–µ—Ä–¥—è–Ω—Å–∫'
        ],
        originCities: ['–î–æ–Ω–µ—Ü–∫'],
        autoGenerateReverse: true,
        createdAt: now,
        updatedAt: now,
      ),
      
      // –ì—Ä—É–ø–ø–∞ 4: –ß–µ—Ä–Ω–æ–º–æ—Ä—Å–∫–æ–µ –ø–æ–±–µ—Ä–µ–∂—å–µ (–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π)
      RouteGroup(
        id: 'black_sea_coast',
        name: '–ß–µ—Ä–Ω–æ–º–æ—Ä—Å–∫–æ–µ –ø–æ–±–µ—Ä–µ–∂—å–µ',
        description: '–ö—É—Ä–æ—Ä—Ç—ã –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–æ–≥–æ –∫—Ä–∞—è',
        basePrice: 40000,
        destinationCities: [
          '–ê–Ω–∞–ø–∞', '–ì–µ–ª–µ–Ω–¥–∂–∏–∫', '–¥–∏–≤–Ω–æ–º—Ä—Å–∫–æ–µ'
        ],
        originCities: ['–î–æ–Ω–µ—Ü–∫', '–ú–∞–∫–µ–µ–≤–∫–∞', '–•–∞—Ä—Ü—ã–∑—Å–∫'],
        autoGenerateReverse: true,
        createdAt: now,
        updatedAt: now,
      ),
      
      // –ì—Ä—É–ø–ø–∞ 5: –°–æ—á–∏ (–æ—Ç–¥–µ–ª—å–Ω–∞—è –≥—Ä—É–ø–ø–∞ –∏–∑-–∑–∞ –≤—ã—Å–æ–∫–æ–π —Ü–µ–Ω—ã)
      RouteGroup(
        id: 'sochi',
        name: '–°–æ—á–∏',
        description: '–ú–∞—Ä—à—Ä—É—Ç—ã –≤ –°–æ—á–∏ –∏ –∞—ç—Ä–æ–ø–æ—Ä—Ç',
        basePrice: 50000,
        destinationCities: ['–°–æ—á–∏', '–°–æ—á–∏ –∞—ç—Ä–æ–ø–æ—Ä—Ç'],
        originCities: ['–î–æ–Ω–µ—Ü–∫'],
        autoGenerateReverse: true,
        createdAt: now,
        updatedAt: now,
      ),
      
      // –ì—Ä—É–ø–ø–∞ 6: –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä
      RouteGroup(
        id: 'krasnodar',
        name: '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä',
        description: '–ú–∞—Ä—à—Ä—É—Ç—ã –≤ –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä',
        basePrice: 30000,
        destinationCities: ['–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä'],
        originCities: [
          '–î–æ–Ω–µ—Ü–∫', '–ú–∞–∫–µ–µ–≤–∫–∞', '–•–∞—Ä—Ü—ã–∑—Å–∫', '–ò–ª–æ–≤–∞–π—Å–∫', 
          '–ê–º–≤—Ä–æ—Å–∏–µ–≤–∫–∞', '–ü—É–Ω–∫—Ç –ø—Ä–æ–ø—É—Å–∫–∞ –ê–≤–∏–ª–æ-–£—Å–ø–µ–Ω–∫–∞'
        ],
        autoGenerateReverse: true,
        createdAt: now,
        updatedAt: now,
      ),
      
      // –ì—Ä—É–ø–ø–∞ 7: –í–æ–ª–≥–æ–≥—Ä–∞–¥ –∏ –ú–∏–Ω–µ—Ä–∞–ª—å–Ω—ã–µ –í–æ–¥—ã
      RouteGroup(
        id: 'volgograd_minvody',
        name: '–í–æ–ª–≥–æ–≥—Ä–∞–¥ –∏ –ú–∏–Ω–≤–æ–¥—ã',
        description: '–ú–∞—Ä—à—Ä—É—Ç—ã –≤ –í–æ–ª–≥–æ–≥—Ä–∞–¥ –∏ –ú–∏–Ω–µ—Ä–∞–ª—å–Ω—ã–µ –í–æ–¥—ã',
        basePrice: 40000,
        destinationCities: ['–í–æ–ª–≥–æ–≥—Ä–∞–¥', '–º–∏–Ω–≤–æ–¥—ã'],
        originCities: ['–î–æ–Ω–µ—Ü–∫', '–•–∞—Ä—Ü—ã–∑—Å–∫', '–ú–∞–∫–µ–µ–≤–∫–∞'],
        autoGenerateReverse: true,
        createdAt: now,
        updatedAt: now,
      ),
      
      // –ì—Ä—É–ø–ø–∞ 8: –ï–π—Å–∫
      RouteGroup(
        id: 'yeisk',
        name: '–ï–π—Å–∫',
        description: '–ú–∞—Ä—à—Ä—É—Ç—ã –≤ –ï–π—Å–∫',
        basePrice: 22000,
        destinationCities: ['–ï–π—Å–∫'],
        originCities: ['–î–æ–Ω–µ—Ü–∫', '–ú–∞–∫–µ–µ–≤–∫–∞', '–ï–Ω–∞–∫–∏–µ–≤–æ'],
        autoGenerateReverse: true,
        createdAt: now,
        updatedAt: now,
      ),
      
      // –ì—Ä—É–ø–ø–∞ 9: –î–∞–ª—å–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ –†–æ—Å—Å–∏–∏
      RouteGroup(
        id: 'distant_russia',
        name: '–î–∞–ª—å–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ –†–æ—Å—Å–∏–∏',
        description: '–ú–æ—Å–∫–≤–∞, –í–æ—Ä–æ–Ω–µ–∂ –∏ –¥—Ä—É–≥–∏–µ –¥–∞–ª—å–Ω–∏–µ –≥–æ—Ä–æ–¥–∞',
        basePrice: 50000,
        destinationCities: ['–ú–æ—Å–∫–≤–∞', '–í–æ—Ä–æ–Ω–µ–∂'],
        originCities: ['–î–æ–Ω–µ—Ü–∫'],
        autoGenerateReverse: true,
        createdAt: now,
        updatedAt: now,
      ),
    ];
  }
  
  /// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä—É–ø–ø –≤ Firebase
  static Future<void> initializeGroups() async {
    final service = RouteGroupService();
    
    for (final group in initialGroups) {
      await service.createGroup(group);
    }
    
    print('‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ ${initialGroups.length} –≥—Ä—É–ø–ø');
  }
}
```

---

### –≠—Ç–∞–ø 3: –ü–µ—Ä–µ–¥–µ–ª–∫–∞ route_initializer.dart (1 —á–∞—Å)

#### –û–±–Ω–æ–≤–∏—Ç—å `lib/data/route_initializer.dart`

**–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –≥—Ä—É–ø–ø–∞–º–∏:**

```dart
class RouteInitializer {
  static List<PredefinedRoute> get initialRoutes {
    final now = DateTime.now();
    
    return [
      // ========================================
      // –ì–†–£–ü–ü–ê: –†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å (8000‚ÇΩ)
      // ========================================
      
      // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (–∏—Å–ø–æ–ª—å–∑—É—é—Ç –≥—Ä—É–ø–ø–æ–≤—É—é —Ü–µ–Ω—É)
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–†–æ—Å—Ç–æ–≤', 8000, 'rostov_region', now),
      _createRoute('–•–∞—Ä—Ü—ã–∑—Å–∫', '–†–æ—Å—Ç–æ–≤', 8000, 'rostov_region', now),
      _createRoute('–ê–º–≤—Ä–æ—Å–∏–µ–≤–∫–∞', '–†–æ—Å—Ç–æ–≤', 8000, 'rostov_region', now),
      _createRoute('–ó—É–≥—Ä—ç—Å', '–†–æ—Å—Ç–æ–≤', 8000, 'rostov_region', now),
      _createRoute('–®–∞—Ö—Ç—ë—Ä—Å–∫', '–†–æ—Å—Ç–æ–≤', 8000, 'rostov_region', now),
      _createRoute('–¢–æ—Ä–µ–∑', '–†–æ—Å—Çov', 8000, 'rostov_region', now),
      _createRoute('–ò–ª–æ–≤–∞–π—Å–∫–∏–π', '–†–æ—Å—Ç–æ–≤', 8000, 'rostov_region', now),
      _createRoute('–°—Ç–∞—Ä–æ–±–µ—à–µ–≤–æ', '–†–æ—Å—Ç–æ–≤', 8000, 'rostov_region', now),
      _createRoute('–ù–æ–≤—ã–π —Å–≤–µ—Ç', '–†–æ—Å—Ç–æ–≤', 8000, 'rostov_region', now),
      
      // –ò—Å–∫–ª—é—á–µ–Ω–∏—è (–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã)
      _createRouteWithCustomPrice('–ï–ª–µ–Ω–æ–≤–∫–∞', '–†–æ—Å—Ç–æ–≤', 10000, 'rostov_region', now),
      _createRouteWithCustomPrice('–ú–∞—Ä–∏—É–ø–æ–ª—å', '–†–æ—Å—Ç–æ–≤', 10000, 'rostov_region', now),
      _createRouteWithCustomPrice('–ï–Ω–∞–∫–∏–µ–≤–æ', '–†–æ—Å—Ç–æ–≤', 12000, 'rostov_region', now),
      _createRouteWithCustomPrice('–î–æ–∫—É—á–∞–µ–≤—Å–∫', '–†–æ—Å—Ç–æ–≤', 12000, 'rostov_region', now),
      _createRouteWithCustomPrice('–Ø—Å–∏–Ω–æ–≤–∞—Ç–∞—è', '–†–æ—Å—Ç–æ–≤', 12000, 'rostov_region', now),
      _createRouteWithCustomPrice('–í–æ–ª–Ω–æ–≤–∞—Ö–∞', '–†–æ—Å—Ç–æ–≤', 13000, 'rostov_region', now),
      
      // –ü—Ä–∏–≥–æ—Ä–æ–¥—ã –†–æ—Å—Ç–æ–≤–∞
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–ë–∞—Ç–∞–π—Å–∫', 10000, 'rostov_region', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–ê–∫—Å–∞–π', 10000, 'rostov_region', now),
      
      // ========================================
      // –ì–†–£–ü–ü–ê: –ö—Ä—ã–º—Å–∫–∏–π –ø–æ–ª—É–æ—Å—Ç—Ä–æ–≤ (45000‚ÇΩ)
      // ========================================
      
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö—Ä—ã–º', 45000, 'crimea', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å', 45000, 'crimea', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–Ø–ª—Ç–∞', 45000, 'crimea', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å', 45000, 'crimea', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–ï–≤–ø–∞—Ç–æ—Ä–∏—è', 45000, 'crimea', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–§–µ–æ–¥–æ—Å–∏—è', 45000, 'crimea', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–ö–µ—Ä—á—å', 45000, 'crimea', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–ê–ª—É—à—Ç–∞', 45000, 'crimea', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–°—É–¥–∞–∫', 45000, 'crimea', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–ë–∞–ª–∞–∫–ª–∞–≤–∞', 45000, 'crimea', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–ë–µ–ª–æ–≥–æ—Ä—Å–∫', 45000, 'crimea', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–°–∞–∫–∏', 45000, 'crimea', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–î–∂–∞–Ω–∫–æ–π', 45000, 'crimea', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–ö—Ä–∞—Å–Ω–æ–ø–µ—Ä–µ–∫–æ–ø—Å–∫', 45000, 'crimea', now),
      
      // ========================================
      // –ì–†–£–ü–ü–ê: –ü—Ä–∏–∞–∑–æ–≤—å–µ (7500‚ÇΩ)
      // ========================================
      
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–ù–æ–≤–æ–∞–∑–æ–≤—Å–∫', 7000, 'azov_sea', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–°–µ–¥–æ–≤–æ', 7000, 'azov_sea', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–ú–∞—Ä–∏—É–ø–æ–ª—å', 7000, 'azov_sea', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–ú–µ–ª–µ–∫–∏–Ω–æ', 8000, 'azov_sea', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–Æ—Ä—å–µ–≤–∫–∞', 8500, 'azov_sea', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '—É—Ä–∑—É—Ñ', 8500, 'azov_sea', now),
      _createRouteWithCustomPrice('–î–æ–Ω–µ—Ü–∫', '–ë–µ—Ä–¥—è–Ω—Å–∫', 12000, 'azov_sea', now),
      
      // ========================================
      // –ì–†–£–ü–ü–ê: –ß–µ—Ä–Ω–æ–º–æ—Ä—Å–∫–æ–µ –ø–æ–±–µ—Ä–µ–∂—å–µ (40000‚ÇΩ)
      // ========================================
      
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–ê–Ω–∞–ø–∞', 40000, 'black_sea_coast', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–ì–µ–ª–µ–Ω–¥–∂–∏–∫', 40000, 'black_sea_coast', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–¥–∏–≤–Ω–æ–º—Ä—Å–∫–æ–µ', 40000, 'black_sea_coast', now),
      
      // ========================================
      // –ì–†–£–ü–ü–ê: –°–æ—á–∏ (50000‚ÇΩ)
      // ========================================
      
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–°–æ—á–∏', 50000, 'sochi', now),
      _createRouteWithCustomPrice('–î–æ–Ω–µ—Ü–∫', '–°–æ—á–∏ –∞—ç—Ä–æ–ø–æ—Ä—Ç', 55000, 'sochi', now),
      
      // ========================================
      // –ì–†–£–ü–ü–ê: –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä (30000‚ÇΩ)
      // ========================================
      
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', 30000, 'krasnodar', now),
      _createRoute('–ú–∞–∫–µ–µ–≤–∫–∞', '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', 30000, 'krasnodar', now),
      _createRoute('–•–∞—Ä—Ü—ã–∑—Å–∫', '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', 30000, 'krasnodar', now),
      _createRoute('–ò–ª–æ–≤–∞–π—Å–∫', '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', 30000, 'krasnodar', now),
      _createRoute('–ê–º–≤—Ä–æ—Å–∏–µ–≤–∫–∞', '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', 30000, 'krasnodar', now),
      _createRoute('–ü—É–Ω–∫—Ç –ø—Ä–æ–ø—É—Å–∫–∞ –ê–≤–∏–ª–æ-–£—Å–ø–µ–Ω–∫–∞', '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', 30000, 'krasnodar', now),
      
      // ========================================
      // –ì–†–£–ü–ü–ê: –í–æ–ª–≥–æ–≥—Ä–∞–¥ –∏ –ú–∏–Ω–≤–æ–¥—ã (40000‚ÇΩ)
      // ========================================
      
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–í–æ–ª–≥–æ–≥—Ä–∞–¥', 40000, 'volgograd_minvody', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–º–∏–Ω–≤–æ–¥—ã', 40000, 'volgograd_minvody', now),
      _createRoute('–•–∞—Ä—Ü—ã–∑—Å–∫', '–í–æ–ª–≥–æ–≥—Ä–∞–¥', 40000, 'volgograd_minvody', now),
      _createRoute('–•–∞—Ä—Ü—ã–∑—Å–∫', '–º–∏–Ω–≤–æ–¥—ã', 40000, 'volgograd_minvody', now),
      _createRoute('–ú–∞–∫–µ–µ–≤–∫–∞', '–í–æ–ª–≥–æ–≥—Ä–∞–¥', 40000, 'volgograd_minvody', now),
      _createRoute('–ú–∞–∫–µ–µ–≤–∫–∞', '–º–∏–Ω–≤–æ–¥—ã', 40000, 'volgograd_minvody', now),
      
      // ========================================
      // –ì–†–£–ü–ü–ê: –ï–π—Å–∫ (22000‚ÇΩ)
      // ========================================
      
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–ï–π—Å–∫', 22000, 'yeisk', now),
      _createRoute('–ú–∞–∫–µ–µ–≤–∫–∞', '–ï–π—Å–∫', 22000, 'yeisk', now),
      _createRouteWithCustomPrice('–ï–Ω–∞–∫–∏–µ–≤–æ', '–ï–π—Å–∫', 24000, 'yeisk', now),
      
      // ========================================
      // –ì–†–£–ü–ü–ê: –î–∞–ª—å–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ –†–æ—Å—Å–∏–∏ (50000‚ÇΩ+)
      // ========================================
      
      _createRouteWithCustomPrice('–î–æ–Ω–µ—Ü–∫', '–ú–æ—Å–∫–≤–∞', 77000, 'distant_russia', now),
      _createRoute('–î–æ–Ω–µ—Ü–∫', '–í–æ—Ä–æ–Ω–µ–∂', 50000, 'distant_russia', now),
    ];
  }
  
  /// –°–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç —Å –≥—Ä—É–ø–ø–æ–≤–æ–π —Ü–µ–Ω–æ–π
  static PredefinedRoute _createRoute(
    String from,
    String to,
    double price,
    String groupId,
    DateTime now,
  ) {
    return PredefinedRoute(
      id: '',
      fromCity: from,
      toCity: to,
      price: price,
      groupId: groupId,
      useGroupPrice: true,      // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–µ–Ω—É –≥—Ä—É–ø–ø—ã
      customPrice: false,        // –ù–ï –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
      isReverse: false,
      createdAt: now,
      updatedAt: now,
    );
  }
  
  /// –°–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ)
  static PredefinedRoute _createRouteWithCustomPrice(
    String from,
    String to,
    double price,
    String groupId,
    DateTime now,
  ) {
    return PredefinedRoute(
      id: '',
      fromCity: from,
      toCity: to,
      price: price,
      groupId: groupId,
      useGroupPrice: false,     // –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–µ–Ω—É –≥—Ä—É–ø–ø—ã
      customPrice: true,         // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤—Ä—É—á–Ω—É—é
      isReverse: false,
      createdAt: now,
      updatedAt: now,
    );
  }
  
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã
}
```

---

### –≠—Ç–∞–ø 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ RouteManagementService (1 —á–∞—Å)

#### –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –≤ `lib/services/route_management_service.dart`

```dart
class RouteManagementService {
  // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã...
  
  // ========================================
  // –ù–û–í–´–ï –ú–ï–¢–û–î–´ –î–õ–Ø –†–ê–ë–û–¢–´ –° –ì–†–£–ü–ü–ê–ú–ò
  // ========================================
  
  /// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã –≥—Ä—É–ø–ø—ã
  Future<List<PredefinedRoute>> getRoutesByGroup(String groupId) async {
    try {
      final snapshot = await _firestore
          .collection(_collectionPath)
          .where('groupId', isEqualTo: groupId)
          .get();
      
      return snapshot.docs
          .map((doc) => PredefinedRoute.fromFirestore(doc.data(), doc.id))
          .toList();
    } catch (e) {
      print('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≥—Ä—É–ø–ø—ã: $e');
      return [];
    }
  }
  
  /// –û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—ã –≤—Å–µ—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≥—Ä—É–ø–ø—ã
  Future<void> updateGroupRoutes(String groupId, double newPrice) async {
    try {
      // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã –≥—Ä—É–ø–ø—ã
      final routes = await getRoutesByGroup(groupId);
      
      // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≥—Ä—É–ø–ø–æ–≤—É—é —Ü–µ–Ω—É
      final batch = _firestore.batch();
      int updatedCount = 0;
      
      for (final route in routes) {
        if (route.useGroupPrice && !route.customPrice) {
          final docRef = _firestore.collection(_collectionPath).doc(route.id);
          batch.update(docRef, {
            'price': newPrice,
            'updatedAt': FieldValue.serverTimestamp(),
          });
          updatedCount++;
        }
      }
      
      await batch.commit();
      print('‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ $updatedCount –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –≥—Ä—É–ø–ø–µ $groupId');
      
    } catch (e) {
      print('‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≥—Ä—É–ø–ø—ã: $e');
      rethrow;
    }
  }
  
  /// –ò–∑–º–µ–Ω–∏—Ç—å —Ü–µ–Ω—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ (–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ)
  Future<void> updateRoutePrice(String routeId, double newPrice) async {
    try {
      await _firestore.collection(_collectionPath).doc(routeId).update({
        'price': newPrice,
        'useGroupPrice': false,
        'customPrice': true,
        'updatedAt': FieldValue.serverTimestamp(),
      });
      
      print('‚úÖ –¶–µ–Ω–∞ –º–∞—Ä—à—Ä—É—Ç–∞ $routeId –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞ $newPrice‚ÇΩ');
      
    } catch (e) {
      print('‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω—ã –º–∞—Ä—à—Ä—É—Ç–∞: $e');
      rethrow;
    }
  }
  
  /// –í–µ—Ä–Ω—É—Ç—å –º–∞—Ä—à—Ä—É—Ç –∫ –≥—Ä—É–ø–ø–æ–≤–æ–π —Ü–µ–Ω–µ
  Future<void> resetRouteToGroupPrice(String routeId, double groupPrice) async {
    try {
      await _firestore.collection(_collectionPath).doc(routeId).update({
        'price': groupPrice,
        'useGroupPrice': true,
        'customPrice': false,
        'updatedAt': FieldValue.serverTimestamp(),
      });
      
      print('‚úÖ –ú–∞—Ä—à—Ä—É—Ç $routeId –≤–æ–∑–≤—Ä–∞—â—ë–Ω –∫ –≥—Ä—É–ø–ø–æ–≤–æ–π —Ü–µ–Ω–µ $groupPrice‚ÇΩ');
      
    } catch (e) {
      print('‚ùå –û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞ —Ü–µ–Ω—ã –º–∞—Ä—à—Ä—É—Ç–∞: $e');
      rethrow;
    }
  }
  
  /// –°–æ–∑–¥–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç
  Future<void> createReverseRoute(PredefinedRoute originalRoute) async {
    try {
      final reverseRoute = PredefinedRoute(
        id: '',
        fromCity: originalRoute.toCity,
        toCity: originalRoute.fromCity,
        price: originalRoute.price,
        groupId: originalRoute.groupId,
        useGroupPrice: originalRoute.useGroupPrice,
        customPrice: originalRoute.customPrice,
        isReverse: true,
        createdAt: DateTime.now(),
        updatedAt: DateTime.now(),
      );
      
      await addRoute(
        fromCity: reverseRoute.fromCity,
        toCity: reverseRoute.toCity,
        price: reverseRoute.price,
        groupId: reverseRoute.groupId,
        useGroupPrice: reverseRoute.useGroupPrice,
        customPrice: reverseRoute.customPrice,
        isReverse: true,
      );
      
      print('‚úÖ –°–æ–∑–¥–∞–Ω –æ–±—Ä–∞—Ç–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç: ${reverseRoute.fromCity} ‚Üí ${reverseRoute.toCity}');
      
    } catch (e) {
      print('‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞: $e');
      rethrow;
    }
  }
}
```

---

### –≠—Ç–∞–ø 5: UI –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (2-3 —á–∞—Å–∞)

#### 5.1. –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –≥—Ä—É–ø–ø

**–§–∞–π–ª:** `lib/features/admin/screens/route_groups_admin_screen.dart`

```dart
class RouteGroupsAdminScreen extends StatefulWidget {
  @override
  State<RouteGroupsAdminScreen> createState() => _RouteGroupsAdminScreenState();
}

class _RouteGroupsAdminScreenState extends State<RouteGroupsAdminScreen> {
  final RouteGroupService _groupService = RouteGroupService();
  List<RouteGroup> _groups = [];
  bool _isLoading = true;
  
  @override
  void initState() {
    super.initState();
    _loadGroups();
  }
  
  Future<void> _loadGroups() async {
    setState(() => _isLoading = true);
    try {
      final groups = await _groupService.getAllGroups();
      setState(() {
        _groups = groups;
        _isLoading = false;
      });
    } catch (e) {
      setState(() => _isLoading = false);
      _showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≥—Ä—É–ø–ø: $e');
    }
  }
  
  @override
  Widget build(BuildContext context) {
    return CupertinoPageScaffold(
      navigationBar: CupertinoNavigationBar(
        middle: Text('–ì—Ä—É–ø–ø—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤'),
        trailing: CupertinoButton(
          padding: EdgeInsets.zero,
          child: Icon(CupertinoIcons.add),
          onPressed: _addGroup,
        ),
      ),
      child: SafeArea(
        child: _isLoading
            ? Center(child: CupertinoActivityIndicator())
            : ListView.builder(
                itemCount: _groups.length,
                itemBuilder: (context, index) {
                  final group = _groups[index];
                  return RouteGroupCard(
                    group: group,
                    onTap: () => _openGroupDetails(group),
                    onDelete: () => _deleteGroup(group),
                  );
                },
              ),
      ),
    );
  }
  
  void _openGroupDetails(RouteGroup group) {
    Navigator.of(context).push(
      CupertinoPageRoute(
        builder: (context) => RouteGroupDetailsScreen(group: group),
      ),
    );
  }
  
  // –û—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã...
}
```

#### 5.2. –≠–∫—Ä–∞–Ω –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –≥—Ä—É–ø–ø—ã

**–§–∞–π–ª:** `lib/features/admin/screens/route_group_details_screen.dart`

```dart
class RouteGroupDetailsScreen extends StatefulWidget {
  final RouteGroup group;
  
  const RouteGroupDetailsScreen({required this.group});
  
  @override
  State<RouteGroupDetailsScreen> createState() => _RouteGroupDetailsScreenState();
}

class _RouteGroupDetailsScreenState extends State<RouteGroupDetailsScreen> {
  final RouteManagementService _routeService = RouteManagementService.instance;
  final TextEditingController _priceController = TextEditingController();
  List<PredefinedRoute> _routes = [];
  bool _isLoading = true;
  
  @override
  void initState() {
    super.initState();
    _priceController.text = widget.group.basePrice.toStringAsFixed(0);
    _loadRoutes();
  }
  
  Future<void> _loadRoutes() async {
    setState(() => _isLoading = true);
    try {
      final routes = await _routeService.getRoutesByGroup(widget.group.id);
      setState(() {
        _routes = routes;
        _isLoading = false;
      });
    } catch (e) {
      setState(() => _isLoading = false);
      _showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤: $e');
    }
  }
  
  @override
  Widget build(BuildContext context) {
    return CupertinoPageScaffold(
      navigationBar: CupertinoNavigationBar(
        middle: Text(widget.group.name),
      ),
      child: SafeArea(
        child: CustomScrollView(
          slivers: [
            // –ë–ª–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–∑–æ–≤–æ–π —Ü–µ–Ω—ã –≥—Ä—É–ø–ø—ã
            SliverToBoxAdapter(
              child: Container(
                margin: EdgeInsets.all(16),
                padding: EdgeInsets.all(16),
                decoration: BoxDecoration(
                  color: CupertinoColors.systemBackground,
                  borderRadius: BorderRadius.circular(12),
                  border: Border.all(color: CupertinoColors.systemGrey4),
                ),
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    Text(
                      '–ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ –≥—Ä—É–ø–ø—ã',
                      style: TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w600,
                      ),
                    ),
                    SizedBox(height: 12),
                    Row(
                      children: [
                        Expanded(
                          child: CupertinoTextField(
                            controller: _priceController,
                            keyboardType: TextInputType.number,
                            placeholder: '–¶–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö',
                            suffix: Padding(
                              padding: EdgeInsets.only(right: 8),
                              child: Text('‚ÇΩ'),
                            ),
                          ),
                        ),
                        SizedBox(width: 12),
                        CupertinoButton.filled(
                          child: Text('–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ –≤—Å–µ–º'),
                          onPressed: _applyGroupPrice,
                        ),
                      ],
                    ),
                    SizedBox(height: 8),
                    Text(
                      '–ò–∑–º–µ–Ω–∏—Ç —Ü–µ–Ω—É —É –≤—Å–µ—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å –≥—Ä—É–ø–ø–æ–≤–æ–π —Ü–µ–Ω–æ–π',
                      style: TextStyle(
                        fontSize: 12,
                        color: CupertinoColors.systemGrey,
                      ),
                    ),
                  ],
                ),
              ),
            ),
            
            // –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–ø–∏—Å–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤
            SliverToBoxAdapter(
              child: Padding(
                padding: EdgeInsets.symmetric(horizontal: 16, vertical: 8),
                child: Text(
                  '–ú–∞—Ä—à—Ä—É—Ç—ã –≤ –≥—Ä—É–ø–ø–µ (${_routes.length})',
                  style: TextStyle(
                    fontSize: 16,
                    fontWeight: FontWeight.w600,
                  ),
                ),
              ),
            ),
            
            // –°–ø–∏—Å–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤
            _isLoading
                ? SliverFillRemaining(
                    child: Center(child: CupertinoActivityIndicator()),
                  )
                : SliverList(
                    delegate: SliverChildBuilderDelegate(
                      (context, index) {
                        final route = _routes[index];
                        return RouteInGroupItem(
                          route: route,
                          group: widget.group,
                          onPriceChanged: () => _loadRoutes(),
                        );
                      },
                      childCount: _routes.length,
                    ),
                  ),
          ],
        ),
      ),
    );
  }
  
  Future<void> _applyGroupPrice() async {
    final newPriceText = _priceController.text.trim();
    final newPrice = double.tryParse(newPriceText);
    
    if (newPrice == null || newPrice <= 0) {
      _showError('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ü–µ–Ω—É');
      return;
    }
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
    final confirmed = await showCupertinoDialog<bool>(
      context: context,
      builder: (context) => CupertinoAlertDialog(
        title: Text('–ò–∑–º–µ–Ω–∏—Ç—å —Ü–µ–Ω—ã?'),
        content: Text(
          '–≠—Ç–æ –∏–∑–º–µ–Ω–∏—Ç —Ü–µ–Ω—É —É –≤—Å–µ—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å –≥—Ä—É–ø–ø–æ–≤–æ–π —Ü–µ–Ω–æ–π.\n\n'
          '–ú–∞—Ä—à—Ä—É—Ç—ã —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π –Ω–µ –∏–∑–º–µ–Ω—è—Ç—Å—è.',
        ),
        actions: [
          CupertinoDialogAction(
            child: Text('–û—Ç–º–µ–Ω–∞'),
            onPressed: () => Navigator.of(context).pop(false),
          ),
          CupertinoDialogAction(
            isDefaultAction: true,
            child: Text('–ü—Ä–∏–º–µ–Ω–∏—Ç—å'),
            onPressed: () => Navigator.of(context).pop(true),
          ),
        ],
      ),
    );
    
    if (confirmed == true) {
      try {
        await _routeService.updateGroupRoutes(widget.group.id, newPrice);
        _showSuccess('–¶–µ–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã!');
        _loadRoutes();
      } catch (e) {
        _showError('–û—à–∏–±–∫–∞: $e');
      }
    }
  }
  
  // –û—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã...
}
```

#### 5.3. –í–∏–¥–∂–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∞ –≤ –≥—Ä—É–ø–ø–µ

**–§–∞–π–ª:** `lib/features/admin/widgets/route_in_group_item.dart`

```dart
class RouteInGroupItem extends StatelessWidget {
  final PredefinedRoute route;
  final RouteGroup group;
  final VoidCallback onPriceChanged;
  
  const RouteInGroupItem({
    required this.route,
    required this.group,
    required this.onPriceChanged,
  });
  
  @override
  Widget build(BuildContext context) {
    final hasCustomPrice = route.customPrice;
    
    return Container(
      margin: EdgeInsets.symmetric(horizontal: 16, vertical: 4),
      padding: EdgeInsets.all(12),
      decoration: BoxDecoration(
        color: CupertinoColors.systemBackground,
        borderRadius: BorderRadius.circular(8),
        border: Border.all(
          color: hasCustomPrice 
              ? CupertinoColors.systemOrange 
              : CupertinoColors.systemGrey5,
        ),
      ),
      child: Row(
        children: [
          // –ò–∫–æ–Ω–∫–∞
          Icon(
            hasCustomPrice 
                ? CupertinoIcons.exclamationmark_circle 
                : CupertinoIcons.checkmark_circle,
            color: hasCustomPrice 
                ? CupertinoColors.systemOrange 
                : CupertinoColors.systemGreen,
            size: 20,
          ),
          SizedBox(width: 12),
          
          // –ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞
          Expanded(
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                Text(
                  '${route.fromCity} ‚Üí ${route.toCity}',
                  style: TextStyle(
                    fontSize: 15,
                    fontWeight: FontWeight.w500,
                  ),
                ),
                SizedBox(height: 4),
                Text(
                  hasCustomPrice 
                      ? '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞' 
                      : '–¶–µ–Ω–∞ –∏–∑ –≥—Ä—É–ø–ø—ã',
                  style: TextStyle(
                    fontSize: 12,
                    color: hasCustomPrice 
                        ? CupertinoColors.systemOrange 
                        : CupertinoColors.systemGrey,
                  ),
                ),
              ],
            ),
          ),
          
          // –¶–µ–Ω–∞
          Container(
            padding: EdgeInsets.symmetric(horizontal: 12, vertical: 6),
            decoration: BoxDecoration(
              color: CupertinoColors.systemGrey6,
              borderRadius: BorderRadius.circular(6),
            ),
            child: Text(
              '${route.price.toInt()} ‚ÇΩ',
              style: TextStyle(
                fontSize: 16,
                fontWeight: FontWeight.w600,
              ),
            ),
          ),
          
          SizedBox(width: 8),
          
          // –ú–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π
          CupertinoButton(
            padding: EdgeInsets.zero,
            child: Icon(CupertinoIcons.ellipsis_vertical),
            onPressed: () => _showActionSheet(context),
          ),
        ],
      ),
    );
  }
  
  void _showActionSheet(BuildContext context) {
    showCupertinoModalPopup(
      context: context,
      builder: (context) => CupertinoActionSheet(
        title: Text('${route.fromCity} ‚Üí ${route.toCity}'),
        actions: [
          CupertinoActionSheetAction(
            child: Text('–ò–∑–º–µ–Ω–∏—Ç—å —Ü–µ–Ω—É'),
            onPressed: () {
              Navigator.pop(context);
              _showEditPriceDialog(context);
            },
          ),
          if (route.customPrice)
            CupertinoActionSheetAction(
              child: Text('–í–µ—Ä–Ω—É—Ç—å —Ü–µ–Ω—É –≥—Ä—É–ø–ø—ã (${group.basePrice.toInt()}‚ÇΩ)'),
              onPressed: () {
                Navigator.pop(context);
                _resetToGroupPrice(context);
              },
            ),
        ],
        cancelButton: CupertinoActionSheetAction(
          isDefaultAction: true,
          child: Text('–û—Ç–º–µ–Ω–∞'),
          onPressed: () => Navigator.pop(context),
        ),
      ),
    );
  }
  
  void _showEditPriceDialog(BuildContext context) {
    final controller = TextEditingController(
      text: route.price.toStringAsFixed(0),
    );
    
    showCupertinoDialog(
      context: context,
      builder: (context) => CupertinoAlertDialog(
        title: Text('–ò–∑–º–µ–Ω–∏—Ç—å —Ü–µ–Ω—É'),
        content: Column(
          children: [
            SizedBox(height: 12),
            Text('${route.fromCity} ‚Üí ${route.toCity}'),
            SizedBox(height: 12),
            CupertinoTextField(
              controller: controller,
              keyboardType: TextInputType.number,
              placeholder: '–¶–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö',
              autofocus: true,
            ),
          ],
        ),
        actions: [
          CupertinoDialogAction(
            child: Text('–û—Ç–º–µ–Ω–∞'),
            onPressed: () => Navigator.pop(context),
          ),
          CupertinoDialogAction(
            isDefaultAction: true,
            child: Text('–°–æ—Ö—Ä–∞–Ω–∏—Ç—å'),
            onPressed: () async {
              final newPrice = double.tryParse(controller.text);
              if (newPrice != null && newPrice > 0) {
                try {
                  await RouteManagementService.instance
                      .updateRoutePrice(route.id, newPrice);
                  Navigator.pop(context);
                  onPriceChanged();
                } catch (e) {
                  // –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É
                }
              }
            },
          ),
        ],
      ),
    );
  }
  
  void _resetToGroupPrice(BuildContext context) async {
    try {
      await RouteManagementService.instance
          .resetRouteToGroupPrice(route.id, group.basePrice);
      onPriceChanged();
    } catch (e) {
      // –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É
    }
  }
}
```

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏:

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```dart
class RouteMigrationService {
  /// –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –≤ –≥—Ä—É–ø–ø—ã
  static Future<void> migrateToGroups() async {
    print('üîÑ –ù–∞—á–∞–ª–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –≥—Ä—É–ø–ø—ã...');
    
    final routeService = RouteManagementService.instance;
    final routes = await routeService.getAllRoutes();
    
    int migrated = 0;
    
    for (final route in routes) {
      // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —É–∂–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
      if (route.groupId != null) continue;
      
      // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≥—Ä—É–ø–ø—É –ø–æ –≥–æ—Ä–æ–¥—É –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
      final groupId = _determineGroupId(route.toCity);
      
      if (groupId != null) {
        // –û–±–Ω–æ–≤–ª—è–µ–º –º–∞—Ä—à—Ä—É—Ç
        await _updateRouteWithGroup(route, groupId);
        migrated++;
      }
    }
    
    print('‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ $migrated –º–∞—Ä—à—Ä—É—Ç–æ–≤');
  }
  
  static String? _determineGroupId(String cityName) {
    final city = cityName.toLowerCase();
    
    // –†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å
    if (city.contains('—Ä–æ—Å—Ç–æ–≤') || city == '—Ç–∞–≥–∞–Ω—Ä–æ–≥' || 
        city == '–±–∞—Ç–∞–π—Å–∫' || city == '–∞–∫—Å–∞–π') {
      return 'rostov_region';
    }
    
    // –ö—Ä—ã–º
    if (city.contains('–∫—Ä—ã–º') || city == '—Å–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å' || 
        city == '—è–ª—Ç–∞' || city == '—Å–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å' || 
        city == '–µ–≤–ø–∞—Ç–æ—Ä–∏—è' || city == '—Ñ–µ–æ–¥–æ—Å–∏—è' ||
        city == '–∫–µ—Ä—á—å' || city == '–∞–ª—É—à—Ç–∞' || city == '—Å—É–¥–∞–∫') {
      return 'crimea';
    }
    
    // –ü—Ä–∏–∞–∑–æ–≤—å–µ
    if (city == '–Ω–æ–≤–æ–∞–∑–æ–≤—Å–∫' || city == '—Å–µ–¥–æ–≤–æ' || 
        city == '–º–∞—Ä–∏—É–ø–æ–ª—å' || city == '–º–µ–ª–µ–∫–∏–Ω–æ' ||
        city == '—é—Ä—å–µ–≤–∫–∞' || city == '—É—Ä–∑—É—Ñ' || city == '–±–µ—Ä–¥—è–Ω—Å–∫') {
      return 'azov_sea';
    }
    
    // –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä
    if (city == '–∫—Ä–∞—Å–Ω–æ–¥–∞—Ä') {
      return 'krasnodar';
    }
    
    // –°–æ—á–∏
    if (city.contains('—Å–æ—á–∏')) {
      return 'sochi';
    }
    
    // –ß–µ—Ä–Ω–æ–º–æ—Ä—Å–∫–æ–µ –ø–æ–±–µ—Ä–µ–∂—å–µ
    if (city == '–∞–Ω–∞–ø–∞' || city == '–≥–µ–ª–µ–Ω–¥–∂–∏–∫' || city == '–¥–∏–≤–Ω–æ–º—Ä—Å–∫–æ–µ') {
      return 'black_sea_coast';
    }
    
    // –í–æ–ª–≥–æ–≥—Ä–∞–¥ –∏ –ú–∏–Ω–≤–æ–¥—ã
    if (city == '–≤–æ–ª–≥–æ–≥—Ä–∞–¥' || city == '–º–∏–Ω–≤–æ–¥—ã') {
      return 'volgograd_minvody';
    }
    
    // –ï–π—Å–∫
    if (city == '–µ–π—Å–∫') {
      return 'yeisk';
    }
    
    // –î–∞–ª—å–Ω–∏–µ –≥–æ—Ä–æ–¥–∞
    if (city == '–º–æ—Å–∫–≤–∞' || city == '–≤–æ—Ä–æ–Ω–µ–∂') {
      return 'distant_russia';
    }
    
    return null;
  }
  
  static Future<void> _updateRouteWithGroup(
    PredefinedRoute route, 
    String groupId,
  ) async {
    // –û–±–Ω–æ–≤–ª—è–µ–º –≤ Firebase
    await FirebaseFirestore.instance
        .collection('predefined_routes')
        .doc(route.id)
        .update({
      'groupId': groupId,
      'useGroupPrice': true,
      'customPrice': false,
      'isReverse': false,
      'updatedAt': FieldValue.serverTimestamp(),
    });
  }
}
```

---

## üìù –ß–µ–∫-–ª–∏—Å—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ú–æ–¥–µ–ª–∏ –∏ —Å–µ—Ä–≤–∏—Å—ã
- [ ] –°–æ–∑–¥–∞—Ç—å `lib/models/route_group.dart`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `lib/models/predefined_route.dart`
- [ ] –°–æ–∑–¥–∞—Ç—å `lib/services/route_group_service.dart`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `lib/services/route_management_service.dart`

### –≠—Ç–∞–ø 2: –î–∞–Ω–Ω—ã–µ
- [ ] –°–æ–∑–¥–∞—Ç—å `lib/data/route_groups_initializer.dart`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `lib/data/route_initializer.dart`
- [ ] –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

### –≠—Ç–∞–ø 3: UI
- [ ] –°–æ–∑–¥–∞—Ç—å `lib/features/admin/screens/route_groups_admin_screen.dart`
- [ ] –°–æ–∑–¥–∞—Ç—å `lib/features/admin/screens/route_group_details_screen.dart`
- [ ] –°–æ–∑–¥–∞—Ç—å `lib/features/admin/widgets/route_group_card.dart`
- [ ] –°–æ–∑–¥–∞—Ç—å `lib/features/admin/widgets/route_in_group_item.dart`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `lib/features/admin/screens/admin_routes_screen.dart`

### –≠—Ç–∞–ø 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä—É–ø–ø –≤ Firebase
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –≥—Ä—É–ø–ø–æ–≤–æ–π —Ü–µ–Ω–µ
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Ä–∞—Ç–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä —Å–º–æ–∂–µ—Ç:

1. **–í–∏–¥–µ—Ç—å –≥—Ä—É–ø–ø—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤** —Å –±–∞–∑–æ–≤–æ–π —Ü–µ–Ω–æ–π
2. **–ò–∑–º–µ–Ω—è—Ç—å —Ü–µ–Ω—É –≥—Ä—É–ø–ø—ã** –æ–¥–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π ‚Üí –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã
3. **–ò–∑–º–µ–Ω—è—Ç—å —Ü–µ–Ω—É –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞** ‚Üí –º–∞—Ä—à—Ä—É—Ç –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
4. **–í–∏–¥–µ—Ç—å —Å—Ç–∞—Ç—É—Å –º–∞—Ä—à—Ä—É—Ç–æ–≤**:
   - üü¢ –ò—Å–ø–æ–ª—å–∑—É—é—Ç –≥—Ä—É–ø–ø–æ–≤—É—é —Ü–µ–Ω—É
   - üü† –ò–º–µ—é—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—É—é —Ü–µ–Ω—É
5. **–í–æ–∑–≤—Ä–∞—â–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç –∫ –≥—Ä—É–ø–ø–æ–≤–æ–π —Ü–µ–Ω–µ** –æ–¥–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π
6. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã**

---

## ‚è±Ô∏è –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

| –≠—Ç–∞–ø | –í—Ä–µ–º—è |
|------|-------|
| –ú–æ–¥–µ–ª–∏ –∏ —Å–µ—Ä–≤–∏—Å—ã | 1-2 —á–∞—Å–∞ |
| –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø | 30 –º–∏–Ω—É—Ç |
| –ü–µ—Ä–µ–¥–µ–ª–∫–∞ route_initializer | 1 —á–∞—Å |
| –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ RouteManagementService | 1 —á–∞—Å |
| UI –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ | 2-3 —á–∞—Å–∞ |
| –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö | 1 —á–∞—Å |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 1-2 —á–∞—Å–∞ |
| **–ò–¢–û–ì–û** | **7-10 —á–∞—Å–æ–≤** |

---

## üìû –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≥—Ä—É–ø–ø** ‚úÖ
2. **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ UI** ‚úÖ
3. **–ù–∞—á–∞–ª–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** ‚è≥
4. **–ü–æ—ç—Ç–∞–ø–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚è≥
5. **–î–µ–ø–ª–æ–π –∏ –º–∏–≥—Ä–∞—Ü–∏—è** ‚è≥
