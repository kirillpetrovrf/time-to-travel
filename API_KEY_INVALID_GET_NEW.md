# ❌ API КЛЮЧ НЕВАЛИДЕН - ТРЕБУЕТСЯ НОВЫЙ

## Текущая ситуация
✅ **Приложение работает БЕЗ краша!** MapKit инициализирован корректно.  
❌ **Но API ключ невалиден** - Яндекс возвращает "Forbidden: Invalid api key"

## Ошибка из логов
```
W/yandex.maps: njTHJat74vw9kzRqtvQU: Unexpected server response: Forbidden. Body :Invalid api key
W/yandex.maps: Could not fetch [https://proxy.mob.maps.yandex.net:443/mapkit2/init/2.x/random]
E/yandex.maps: 7ObAYoV8iVDb1pnoL6oF: The request cannot be processed by any of the hosts.
```

## Что делать?

### 1. Получить новый API ключ

Перейдите на сайт Яндекса:
https://developer.tech.yandex.ru/

**Шаги:**
1. Войдите в личный кабинет
2. Перейдите в раздел "Ключи"
3. Создайте новый ключ для **MapKit Mobile SDK**
4. Активируйте следующие API:
   - ✅ **MapKit** (карты)
   - ✅ **Search API** (поиск и автозаполнение)
   - ✅ **Suggest API** (подсказки адресов)
5. Добавьте платформу: **Android** (укажите package name: `com.timetotravel.app`)
6. Скопируйте новый ключ

### 2. Заменить ключ в приложении

Откройте файл `lib/main.dart` и замените ключ:

```dart
// Было (НЕВАЛИДНЫЙ КЛЮЧ):
await mapkit_init.initMapkit(
  apiKey: "2f1d6a75-b751-4077-b305-c6abaea0b542",
);

// Должно быть (ВАШ НОВЫЙ КЛЮЧ):
await mapkit_init.initMapkit(
  apiKey: "ВАШ_НОВЫЙ_API_КЛЮЧ_ЗДЕСЬ",
);
```

### 3. Перезапустить приложение

```bash
# Hot restart (быстрее):
# Нажмите "R" в терминале с flutter run

# Или полный перезапуск:
flutter run
```

### 4. Проверить работу

После перезапуска введите адрес в поле автозаполнения.  
Должны появиться подсказки от Яндекса!

## Альтернатива: Проверить существующий ключ

Возможно, ключ `2f1d6a75-b751-4077-b305-c6abaea0b542` существует, но:
- Не активирован Search API
- Не добавлен Android как платформа
- Истек срок действия
- Заблокирован

**Решение:** Войдите в личный кабинет Яндекса и проверьте настройки этого ключа.

## Требования к API ключу

Для работы автозаполнения адресов нужен ключ с активированными:
- ✅ **MapKit Mobile SDK**
- ✅ **Search API** (для поиска мест)
- ✅ **Suggest API** (для автозаполнения)

**Важно:** Бесплатный лимит Яндекс MapKit:
- 25,000 запросов в день
- Для коммерческого использования может потребоваться платный тариф

## После получения ключа

1. Замените ключ в `lib/main.dart`
2. Hot restart (нажмите "R" в терминале)
3. Протестируйте автозаполнение
4. Если работает - обновите документацию

## Статус

- ✅ **Краш исправлен** - MapKit инициализируется корректно
- ✅ **Приложение работает** - нет SIGSEGV
- ❌ **API ключ невалиден** - нужен новый ключ
- ⏳ **Автозаполнение** - заработает после замены ключа

---

**Следующий шаг:** Получить новый API ключ на https://developer.tech.yandex.ru/
