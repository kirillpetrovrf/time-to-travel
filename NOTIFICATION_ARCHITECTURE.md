# ğŸ—ºï¸ ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ« Ğ£Ğ’Ğ•Ğ”ĞĞœĞ›Ğ•ĞĞ˜Ğ™

## ğŸ“ ĞĞ±Ñ‰Ğ°Ñ ÑÑ…ĞµĞ¼Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TIME TO TRAVEL APP                        â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              NOTIFICATION SYSTEM                      â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚  â”‚   Scheduled  â”‚â”€â”€â”€â”€â–¶â”‚   Display    â”‚              â”‚   â”‚
â”‚  â”‚  â”‚ Notificationsâ”‚     â”‚ Notification â”‚              â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â”‚         â”‚                     â”‚                      â”‚   â”‚
â”‚  â”‚         â–¼                     â–¼                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚  â”‚  User Taps   â”‚â”€â”€â”€â”€â–¶â”‚  Navigation  â”‚              â”‚   â”‚
â”‚  â”‚  â”‚ Notification â”‚     â”‚   Handler    â”‚              â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â”‚                              â”‚                       â”‚   â”‚
â”‚  â”‚                              â–¼                       â”‚   â”‚
â”‚  â”‚                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚                       â”‚  Booking     â”‚              â”‚   â”‚
â”‚  â”‚                       â”‚  Details     â”‚              â”‚   â”‚
â”‚  â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### 1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°ĞºĞ°Ğ·Ğ°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User    â”‚â”€â”€â”€â”€â–¶â”‚ Create       â”‚â”€â”€â”€â”€â–¶â”‚ Schedule         â”‚
â”‚  Action  â”‚     â”‚ Booking      â”‚     â”‚ Notifications    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                              â–¼
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚ â€¢ 24h reminder       â”‚
                                  â”‚ â€¢ 1h reminder        â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Scheduled   â”‚â”€â”€â”€â”€â–¶â”‚  Android     â”‚â”€â”€â”€â”€â–¶â”‚  Display     â”‚
â”‚  Time        â”‚     â”‚  System      â”‚     â”‚  on Screen   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                  â”‚
                                                  â–¼
                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                     â”‚ ğŸš— Icon             â”‚
                                     â”‚ ğŸ”Š Sound            â”‚
                                     â”‚ ğŸ“³ Vibration        â”‚
                                     â”‚ ğŸ’¡ LED              â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¸ Ğ½Ğ°Ğ¶Ğ°Ñ‚Ğ¸Ğ¸
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Tap    â”‚â”€â”€â”€â”€â–¶â”‚  Parse       â”‚â”€â”€â”€â”€â–¶â”‚  Navigate    â”‚
â”‚              â”‚     â”‚  Payload     â”‚     â”‚  to Screen   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ booking:abc  â”‚
                    â”‚    â†‘     â†‘   â”‚
                    â”‚  type   id   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

### 1. NotificationService
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     NotificationService                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ initialize()                          â”‚
â”‚ â€¢ showNotification()                    â”‚
â”‚ â€¢ schedule24HourReminder()              â”‚
â”‚ â€¢ schedule1HourReminder()               â”‚
â”‚ â€¢ sendTestNotificationNow()             â”‚
â”‚ â€¢ sendTestNotification1MinuteAppOn()    â”‚
â”‚ â€¢ sendTestNotification2MinuteAppOff()   â”‚
â”‚ â€¢ getPendingNotifications()             â”‚
â”‚ â€¢ cancelBookingNotifications()          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Global Handlers                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  notificationTapBackground()             â”‚
â”‚  â”œâ”€ Ğ”Ğ»Ñ background Ğ½Ğ°Ğ¶Ğ°Ñ‚Ğ¸Ğ¹              â”‚
â”‚  â””â”€ Ğ’Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ _handleNotificationNav()   â”‚
â”‚                                          â”‚
â”‚  _onNotificationTappedStatic()           â”‚
â”‚  â”œâ”€ Ğ”Ğ»Ñ foreground Ğ½Ğ°Ğ¶Ğ°Ñ‚Ğ¸Ğ¹              â”‚
â”‚  â””â”€ Ğ’Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ _handleNotificationNav()   â”‚
â”‚                                          â”‚
â”‚  _handleNotificationNavigation()         â”‚
â”‚  â”œâ”€ ĞŸĞ°Ñ€ÑĞ¸Ñ‚ payload                      â”‚
â”‚  â”œâ”€ ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚ Ñ‚Ğ¸Ğ¿ (booking/test)       â”‚
â”‚  â””â”€ Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ                 â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Navigation Stack                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  navigatorKey (Global)                   â”‚
â”‚  â”œâ”€ Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ğ¸Ğ· Ğ»ÑĞ±Ğ¾Ğ¹ Ñ‚Ğ¾Ñ‡ĞºĞ¸             â”‚
â”‚  â””â”€ Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸          â”‚
â”‚                                          â”‚
â”‚  Routes:                                 â”‚
â”‚  â”œâ”€ /auth                               â”‚
â”‚  â”œâ”€ /home                               â”‚
â”‚  â””â”€ /booking-details (NEW!)             â”‚
â”‚      â”œâ”€ Arguments: bookingId            â”‚
â”‚      â””â”€ Widget: _BookingDetailsLoader   â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹

### Android Notification Details
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AndroidNotificationDetails             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Channel:                               â”‚
â”‚  â”œâ”€ ID: 'test_notifications'            â”‚
â”‚  â”œâ”€ Name: 'Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ'        â”‚
â”‚  â””â”€ Description: 'Ğ”Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ'     â”‚
â”‚                                         â”‚
â”‚  Visual:                                â”‚
â”‚  â”œâ”€ Icon: @drawable/ic_notification_car â”‚
â”‚  â”œâ”€ Importance: MAX                     â”‚
â”‚  â””â”€ Priority: MAX                       â”‚
â”‚                                         â”‚
â”‚  Sound & Vibration:                     â”‚
â”‚  â”œâ”€ Sound: System default               â”‚
â”‚  â”œâ”€ Vibration: Custom pattern           â”‚
â”‚  â””â”€ LED: Green/Red                      â”‚
â”‚                                         â”‚
â”‚  Behavior:                              â”‚
â”‚  â”œâ”€ autoCancel: false                   â”‚
â”‚  â”œâ”€ ongoing: false                      â”‚
â”‚  â””â”€ fullScreenIntent: true              â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Ğ–Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ

```
START
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User creates      â”‚
â”‚  booking           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Calculate         â”‚
â”‚  notification      â”‚
â”‚  times             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Schedule          â”‚
â”‚  notifications     â”‚
â”‚  â€¢ 24h before      â”‚
â”‚  â€¢ 1h before       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Wait for          â”‚
â”‚  scheduled time    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Android triggers  â”‚
â”‚  notification      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Display on        â”‚
â”‚  screen            â”‚
â”‚  ğŸš— ğŸ”Š ğŸ“³ ğŸ’¡       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”
    â”‚ User  â”‚
    â”‚ taps? â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”˜
        â”‚
        â”œâ”€ YES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚
        â”‚                â–¼
        â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚     â”‚ Parse payload      â”‚
        â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚
        â”‚              â–¼
        â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚     â”‚ Navigate to        â”‚
        â”‚     â”‚ booking details    â”‚
        â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚
        â”‚              â–¼
        â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚     â”‚ Show booking info  â”‚
        â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â””â”€ NO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚
                        â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Stays in       â”‚
                â”‚ notification   â”‚
                â”‚ tray           â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
                      END
```

---

## ğŸ“± UI Screens Flow

```
Settings Screen
      â”‚
      â”œâ”€ Tap "Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ" block
      â”‚
      â–¼
Notifications Screen
      â”‚
      â”œâ”€ Shows all scheduled
      â”‚  notifications
      â”‚
      â””â”€ Tap notification
            â”‚
            â–¼
      Booking Details
            â”‚
            â”œâ”€ Shows route info
            â”œâ”€ Shows time info
            â”œâ”€ Shows price info
            â””â”€ Cancel button
```

---

## ğŸ” Permissions Flow

```
App Launch
      â”‚
      â–¼
Check Notification Permission
      â”‚
      â”œâ”€ Granted â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                  â”‚
      â””â”€ Not granted     â”‚
            â”‚            â”‚
            â–¼            â”‚
    Request Permission   â”‚
            â”‚            â”‚
            â”œâ”€ Granted â”€â”€â”¤
            â”‚            â”‚
            â””â”€ Denied    â”‚
                  â”‚      â”‚
                  â–¼      â–¼
            Show Dialog  Initialize Notifications
                         â”‚
                         â–¼
                    Ready to use
```

---

## ğŸ§© Integration Points

### With BookingService
```
BookingService
      â”‚
      â”œâ”€ createBooking()
      â”‚     â”‚
      â”‚     â””â”€â”€â–¶ NotificationService.scheduleAll()
      â”‚
      â”œâ”€ cancelBooking()
      â”‚     â”‚
      â”‚     â””â”€â”€â–¶ NotificationService.cancel()
      â”‚
      â””â”€ getCurrentBookings()
            â”‚
            â””â”€â”€â–¶ NotificationsScreen.display()
```

### With Settings Screen
```
SettingsScreen
      â”‚
      â”œâ”€ Check permissions
      â”‚     â”‚
      â”‚     â””â”€â”€â–¶ PermissionService
      â”‚
      â”œâ”€ Get pending count
      â”‚     â”‚
      â”‚     â””â”€â”€â–¶ NotificationService.getPending()
      â”‚
      â”œâ”€ Send test notification
      â”‚     â”‚
      â”‚     â””â”€â”€â–¶ NotificationService.sendTest()
      â”‚
      â””â”€ Open notifications screen
            â”‚
            â””â”€â”€â–¶ NotificationsScreen
```

---

## ğŸ¯ Data Flow Example

### Creating a booking and scheduling notifications:

```
1. User fills booking form
         â†“
2. BookingService.createBooking()
         â†“
3. Booking saved to database
         â†“
4. NotificationService.scheduleAllBookingNotifications()
         â†“
5. Calculate notification times:
   â€¢ departureTime - 24 hours = reminderTime24h
   â€¢ departureTime - 1 hour = reminderTime1h
         â†“
6. Schedule notifications:
   â€¢ ID: ${bookingId}_24h
   â€¢ ID: ${bookingId}_1h
   â€¢ Payload: booking:${bookingId}
         â†“
7. Return success
         â†“
8. Show confirmation to user
```

### Receiving and handling notification:

```
1. Android triggers notification at scheduled time
         â†“
2. Notification displayed with:
   â€¢ Icon: ğŸš— (ic_notification_car)
   â€¢ Title: "ĞĞ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğµ: ĞŸĞ¾ĞµĞ·Ğ´ĞºĞ° Ñ‡ĞµÑ€ĞµĞ· Ñ‡Ğ°Ñ"
   â€¢ Body: "Ğ”Ğ¾Ğ½ĞµÑ†Ğº â†’ Ğ Ğ¾ÑÑ‚Ğ¾Ğ²-Ğ½Ğ°-Ğ”Ğ¾Ğ½Ñƒ"
   â€¢ Sound: ğŸ”Š
   â€¢ Vibration: ğŸ“³
         â†“
3. User taps notification
         â†“
4. notificationTapBackground() OR _onNotificationTappedStatic()
         â†“
5. _handleNotificationNavigation(payload)
         â†“
6. Parse payload: "booking:abc123"
   â€¢ type = "booking"
   â€¢ id = "abc123"
         â†“
7. Navigator.pushNamed('/booking-details', arguments: id)
         â†“
8. _BookingDetailsLoader loads booking
         â†“
9. BookingDetailScreen displays booking info
         â†“
10. User sees booking details
```

---

## ğŸ“Š Monitoring & Debugging

### Logging Points:
```
NotificationService
  â”‚
  â”œâ”€ âœ… Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
  â”œâ”€ ğŸ”” Ğ—Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾
  â”œâ”€ ğŸ“¨ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾
  â”œâ”€ ğŸ”” ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¾
  â”œâ”€ ğŸ“± ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸
  â””â”€ âŒ ĞÑˆĞ¸Ğ±ĞºĞ¸
```

### Debug Console Output:
```
I/flutter: âœ… Ğ¡ĞµÑ€Ğ²Ğ¸Ñ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ñ… ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½
I/flutter: ğŸ”” ĞĞ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ° 1Ñ‡ Ğ·Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾ Ğ´Ğ»Ñ Ğ”Ğ¾Ğ½ĞµÑ†Ğº â†’ Ğ Ğ¾ÑÑ‚Ğ¾Ğ²
I/flutter: ğŸ”” ========================================
I/flutter: ğŸ”” Ğ£Ğ’Ğ•Ğ”ĞĞœĞ›Ğ•ĞĞ˜Ğ• ĞŸĞĞ›Ğ£Ğ§Ğ•ĞĞ!
I/flutter: ğŸ”” ID: 1001
I/flutter: ğŸ”” Payload: booking:abc123
I/flutter: ğŸ”” ========================================
I/flutter: ğŸ”” ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸: booking:abc123
I/flutter: ğŸ“± ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğº Ğ´ĞµÑ‚Ğ°Ğ»ÑĞ¼ Ğ·Ğ°ĞºĞ°Ğ·Ğ°: abc123
```

---

## ğŸ”§ Configuration Files

```
project/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart
â”‚   â”‚   â”œâ”€â”€ navigatorKey (global)
â”‚   â”‚   â”œâ”€â”€ Routes configuration
â”‚   â”‚   â””â”€â”€ _BookingDetailsLoader
â”‚   â”‚
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ notification_service.dart
â”‚   â”‚       â”œâ”€â”€ NotificationService class
â”‚   â”‚       â”œâ”€â”€ Global handlers
â”‚   â”‚       â””â”€â”€ Navigation handler
â”‚   â”‚
â”‚   â””â”€â”€ features/
â”‚       â”œâ”€â”€ settings/
â”‚       â”‚   â””â”€â”€ settings_screen.dart
â”‚       â”‚       â”œâ”€â”€ Notifications block
â”‚       â”‚       â”œâ”€â”€ Test buttons
â”‚       â”‚       â””â”€â”€ Navigation methods
â”‚       â”‚
â”‚       â””â”€â”€ notifications/
â”‚           â””â”€â”€ notifications_screen.dart
â”‚               â””â”€â”€ List of notifications
â”‚
â””â”€â”€ android/
    â””â”€â”€ app/src/main/res/
        â””â”€â”€ drawable/
            â””â”€â”€ ic_notification_car.xml (NEW!)
```

---

## âœ… System Health Checklist

- [x] NotificationService initialized
- [x] Permissions granted
- [x] Icon configured (ic_notification_car)
- [x] Sounds enabled
- [x] Vibration patterns set
- [x] LED indicators configured
- [x] NavigatorKey registered
- [x] Routes configured
- [x] Handlers registered
- [x] Payload format validated
- [x] Navigation tested
- [x] Background handling works
- [x] Logging enabled

---

## ğŸ“ Best Practices Applied

1. âœ… **Separation of Concerns**
   - Service layer for notifications
   - UI layer for display
   - Navigation layer for routing

2. âœ… **Error Handling**
   - Try-catch blocks
   - Null safety
   - Fallback screens

3. âœ… **User Experience**
   - Fast test notifications (5-10s)
   - Clear visual feedback
   - Intuitive navigation

4. âœ… **Performance**
   - Lazy loading of booking details
   - Efficient state management
   - Minimal rebuilds

5. âœ… **Maintainability**
   - Clear code structure
   - Comprehensive documentation
   - Debug logging

---

**Ğ”Ğ°Ñ‚Ğ°:** 22 Ğ¾ĞºÑ‚ÑĞ±Ñ€Ñ 2025  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.0.0  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** Production Ready âœ…
