# üéØ –ü–µ—Ä–µ–¥–µ–ª–∫–∞ –±–ª–æ–∫–∞ "–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è" - –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä

## üìÖ –î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 14 –æ–∫—Ç—è–±—Ä—è 2025

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

### 1. –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã
```dart
import '../../../models/trip_settings.dart';
import '../../../services/trip_settings_service.dart';
```

### 2. –ò–∑–º–µ–Ω–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
**–ë–´–õ–û:**
```dart
DateTime _selectedDate = DateTime.now(); // –í—Å–µ–≥–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
TimeOfDay _selectedTime = TimeOfDay.now(); // TimeOfDay
```

**–°–¢–ê–õ–û:**
```dart
DateTime? _selectedDate; // nullable - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–±—Ä–∞—Ç—å
String _selectedTime = ''; // String –¥–ª—è SQLite
TripSettings? _tripSettings; // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å –≤—Ä–µ–º–µ–Ω–∞–º–∏
```

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
```dart
@override
void initState() {
  super.initState();
  _loadRouteStops();
  _loadTripSettings(); // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
}

Future<void> _loadTripSettings() async {
  try {
    final settings = await TripSettingsService().getCurrentSettings();
    setState(() {
      _tripSettings = settings;
    });
  } catch (e) {
    print('‚ùå [INDIVIDUAL] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫: $e');
  }
}
```

### 4. –†–∞–∑–¥–µ–ª–µ–Ω UI –±–ª–æ–∫ "–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è"
**–ë–´–õ–û:** –û–¥–∏–Ω –±–ª–æ–∫ "–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è"
```dart
_buildSectionTitle('–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è', theme),
_buildDateTimePicker(theme),
```

**–°–¢–ê–õ–û:** –î–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –±–ª–æ–∫–∞
```dart
// –î–∞—Ç–∞ –ø–æ–µ–∑–¥–∫–∏
_buildSectionTitle('–î–∞—Ç–∞ –ø–æ–µ–∑–¥–∫–∏', theme),
_buildDatePicker(theme),

const SizedBox(height: 24),

// –í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
_buildSectionTitle('–í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è', theme),
_buildTimePicker(theme),
```

### 5. –ü–µ—Ä–µ–¥–µ–ª–∞–Ω –º–µ—Ç–æ–¥ `_buildDatePicker()`
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ö—Ä–∞—Å–Ω–∞—è —Ä–∞–º–∫–∞ –µ—Å–ª–∏ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ (`_selectedDate == null`)
- ‚úÖ –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä "–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –ø–æ–µ–∑–¥–∫–∏"
- ‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∫–∞–ª–µ–Ω–¥–∞—Ä—ë–º
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: —Å–µ–≥–æ–¥–Ω—è ‚Üí +30 –¥–Ω–µ–π

```dart
Widget _buildDatePicker(theme) {
  return Container(
    decoration: BoxDecoration(
      border: Border.all(
        color: _selectedDate != null
            ? theme.separator.withOpacity(0.2)
            : theme.systemRed, // ‚Üê –ö—Ä–∞—Å–Ω–∞—è —Ä–∞–º–∫–∞
      ),
    ),
    child: CupertinoButton(
      onPressed: () => _showDatePicker(),
      child: Text(
        _selectedDate == null
            ? '–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –ø–æ–µ–∑–¥–∫–∏'
            : _formatDate(_selectedDate!),
      ),
    ),
  );
}
```

### 6. –ü–µ—Ä–µ–¥–µ–ª–∞–Ω –º–µ—Ç–æ–¥ `_buildTimePicker()`
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ö—Ä–∞—Å–Ω–∞—è —Ä–∞–º–∫–∞ –µ—Å–ª–∏ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ (`_selectedTime.isEmpty`)
- ‚úÖ –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä "–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
- ‚úÖ –°–ø–∏—Å–æ–∫ –≤—Ä–µ–º—ë–Ω –∏–∑ `TripSettings`
- ‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å `CupertinoPicker`

```dart
Widget _buildTimePicker(theme) {
  final departureTimes = _tripSettings?.departureTimes ?? [];

  if (departureTimes.isEmpty) {
    return Container(
      child: Text('–í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ'),
    );
  }

  return CupertinoButton(
    onPressed: () => _showTimePickerModal(theme),
    child: Container(
      decoration: BoxDecoration(
        border: Border.all(
          color: _selectedTime.isNotEmpty
              ? theme.separator.withOpacity(0.2)
              : theme.systemRed, // ‚Üê –ö—Ä–∞—Å–Ω–∞—è —Ä–∞–º–∫–∞
        ),
      ),
      child: Text(
        _selectedTime.isEmpty
            ? '–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è'
            : _selectedTime,
      ),
    ),
  );
}
```

### 7. –ü–µ—Ä–µ–¥–µ–ª–∞–Ω –º–µ—Ç–æ–¥ `_showDatePicker()`
**–ë–´–õ–û:** –ü—Ä–æ—Å—Ç–æ–π `CupertinoDatePicker`
**–°–¢–ê–õ–û:** –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –∏ –∫–Ω–æ–ø–∫–æ–π "–í—ã–±—Ä–∞—Ç—å"

```dart
void _showDatePicker() {
  final now = DateTime.now();
  final today = DateTime(now.year, now.month, now.day);
  DateTime tempSelectedDate = _selectedDate ?? today;

  showCupertinoModalPopup(
    context: context,
    builder: (context) => Container(
      height: 350,
      child: Column(
        children: [
          // –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∫–Ω–æ–ø–∫–æ–π "–í—ã–±—Ä–∞—Ç—å"
          Container(
            padding: const EdgeInsets.all(16),
            child: Row(
              children: [
                Text('–î–∞—Ç–∞ –ø–æ–µ–∑–¥–∫–∏'),
                CupertinoButton(
                  child: Text('–í—ã–±—Ä–∞—Ç—å'),
                  onPressed: () {
                    setState(() {
                      _selectedDate = tempSelectedDate;
                    });
                    Navigator.of(context).pop();
                  },
                ),
              ],
            ),
          ),
          // –ö–∞–ª–µ–Ω–¥–∞—Ä—å
          Expanded(
            child: CupertinoDatePicker(
              mode: CupertinoDatePickerMode.date,
              initialDateTime: tempSelectedDate,
              minimumDate: today,
              maximumDate: today.add(const Duration(days: 30)),
              onDateTimeChanged: (date) {
                tempSelectedDate = date;
              },
            ),
          ),
        ],
      ),
    ),
  );
}
```

### 8. –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_showTimePickerModal()`
**–ù–û–í–´–ô –ú–ï–¢–û–î** - –≤—ã–±–æ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞ –≤—Ä–µ–º—ë–Ω

```dart
void _showTimePickerModal(theme) {
  final departureTimes = _tripSettings?.departureTimes ?? [];

  if (departureTimes.isEmpty) {
    return;
  }

  String tempSelectedTime = _selectedTime.isNotEmpty
      ? _selectedTime
      : departureTimes.first;

  showCupertinoModalPopup(
    context: context,
    builder: (context) => Container(
      height: MediaQuery.of(context).size.height * 0.4,
      child: Column(
        children: [
          // –ó–∞–≥–æ–ª–æ–≤–æ–∫
          Container(
            padding: const EdgeInsets.all(16),
            child: Row(
              children: [
                Text('–í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è'),
                CupertinoButton(
                  child: Text('–í—ã–±—Ä–∞—Ç—å'),
                  onPressed: () {
                    setState(() {
                      _selectedTime = tempSelectedTime;
                    });
                    Navigator.of(context).pop();
                  },
                ),
              ],
            ),
          ),
          // –°–ø–∏—Å–æ–∫ –≤—Ä–µ–º–µ–Ω–∏
          Expanded(
            child: CupertinoPicker(
              itemExtent: 44,
              scrollController: FixedExtentScrollController(
                initialItem: _selectedTime.isNotEmpty
                    ? departureTimes.indexOf(_selectedTime)
                    : 0,
              ),
              onSelectedItemChanged: (index) {
                tempSelectedTime = departureTimes[index];
              },
              children: departureTimes.map((time) {
                return Center(
                  child: Text(
                    time,
                    style: TextStyle(fontSize: 20),
                  ),
                );
              }).toList(),
            ),
          ),
        ],
      ),
    ),
  );
}
```

### 9. –£–¥–∞–ª–µ–Ω –º–µ—Ç–æ–¥ `_formatTime(TimeOfDay)`
**–ë–´–õ–û:**
```dart
String _formatTime(TimeOfDay time) {
  return '${time.hour.toString().padLeft(2, '0')}:${time.minute.toString().padLeft(2, '0')}';
}
```

**–°–¢–ê–õ–û:** –ú–µ—Ç–æ–¥ —É–¥–∞–ª–µ–Ω, —Ç.–∫. `_selectedTime` —É–∂–µ String

### 10. –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_formatDate()`
–ú–µ—Ç–æ–¥ –æ—Å—Ç–∞–ª—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π - —É–∂–µ —Ä–∞–±–æ—Ç–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 11. –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ `_bookTrip()`
```dart
Future<void> _bookTrip() async {
  // –í–∞–ª–∏–¥–∞—Ü–∏—è –≥–æ—Ä–æ–¥–æ–≤
  if (_selectedFromStop == null || _selectedToStop == null) {
    _showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è');
    return;
  }

  // ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç—ã
  if (_selectedDate == null) {
    _showError(
      '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –ø–æ–µ–∑–¥–∫–∏',
      onOkPressed: () => _showDatePicker(),
    );
    return;
  }

  // ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏
  if (_selectedTime.isEmpty) {
    final theme = context.themeManager.currentTheme;
    _showError(
      '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è',
      onOkPressed: () => _showTimePickerModal(theme),
    );
    return;
  }

  // –í–∞–ª–∏–¥–∞—Ü–∏—è –∞–¥—Ä–µ—Å–æ–≤
  if (_pickupController.text.trim().isEmpty ||
      _dropoffController.text.trim().isEmpty) {
    _showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è');
    return;
  }

  // –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
  final booking = Booking(
    // ...
    departureDate: _selectedDate!, // ‚úÖ DateTime –¥–ª—è SQLite
    departureTime: _selectedTime,  // ‚úÖ String –¥–ª—è SQLite
    // ...
  );

  await BookingService().createBooking(booking);
}
```

### 12. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_calculatePrice()`
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø—É—Å—Ç–æ–º `_selectedTime` –≤—ã–∑—ã–≤–∞–ª—Å—è `FormatException`

**–†–ï–®–ï–ù–ò–ï:**
```dart
int _calculatePrice() {
  // ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–µ –≤—Ä–µ–º—è
  if (_selectedTime.isEmpty) {
    return 8000; // –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞
  }
  
  final basePrice = TripPricing.getIndividualTripPrice(
    _selectedTime,
    _selectedDirection,
  );
  final baggagePrice = _calculateBaggagePrice();
  final petPrice = _calculatePetPrice();
  final vkDiscount = _hasVKDiscount ? 30.0 : 0.0;

  return (basePrice + baggagePrice + petPrice - vkDiscount).toInt();
}
```

### 13. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_buildPricingSummary()`
```dart
Widget _buildPricingSummary(theme) {
  final totalPrice = _calculatePrice();
  
  // ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–µ –≤—Ä–µ–º—è
  final basePrice = _selectedTime.isEmpty
      ? 8000
      : TripPricing.getIndividualTripPrice(
          _selectedTime,
          _selectedDirection,
        );
  
  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
}
```

---

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SQLite

### ‚úÖ –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
```dart
departureDate: DateTime?  // –•—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ ISO8601 string –≤ SQLite
departureTime: String     // –•—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ '15:00' –≤ SQLite
```

### ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É
```dart
final booking = Booking(
  departureDate: _selectedDate!,  // DateTime ‚Üí ISO8601 string
  departureTime: _selectedTime,   // String '15:00'
  // ...
);

await BookingService().createBooking(booking);
// ‚Üì
// SQLite: INSERT INTO bookings (departure_date, departure_time, ...)
//         VALUES ('2025-10-14T00:00:00.000', '15:00', ...)
// Firebase: {departureDate: '2025-10-14T00:00:00.000', departureTime: '15:00', ...}
```

---

## üé® –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –î–æ:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üìÖ 14 –æ–∫—Ç—è–±—Ä—è 2025           ‚Ä∫  ‚îÇ
‚îÇ üïê 15:10                     ‚Ä∫  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü–æ—Å–ª–µ:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –î–∞—Ç–∞ –ø–æ–µ–∑–¥–∫–∏                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üìÖ –í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –ø–æ–µ–∑–¥–∫–∏     ‚Ä∫  ‚îÇ ‚Üê –ö—Ä–∞—Å–Ω–∞—è —Ä–∞–º–∫–∞
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üïê –í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è            ‚Ä∫  ‚îÇ ‚Üê –ö—Ä–∞—Å–Ω–∞—è —Ä–∞–º–∫–∞
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìÖ 14 –æ–∫—Ç—è–±—Ä—è 2025           ‚Ä∫  ‚îÇ ‚Üê –û–±—ã—á–Ω–∞—è —Ä–∞–º–∫–∞
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üïê 15:00                     ‚Ä∫  ‚îÇ ‚Üê –û–±—ã—á–Ω–∞—è —Ä–∞–º–∫–∞
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏

### 1. ‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
–û–±–∞ —ç–∫—Ä–∞–Ω–∞ (–≥—Ä—É–ø–ø–æ–≤–∞—è –∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –ø–æ–µ–∑–¥–∫–∞) —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ.

### 2. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è SQLite
- `DateTime` –¥–ª—è –¥–∞—Ç—ã (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ ISO8601)
- `String` –¥–ª—è –≤—Ä–µ–º–µ–Ω–∏ (–±–µ–∑ –ª–∏—à–Ω–∏—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π)

### 3. ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è
–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏.

### 4. ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –≤—Ä–µ–º–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
–í—Ä–µ–º–µ–Ω–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ `TripSettings` (Firebase/SQLite).

### 5. ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è
–ö—Ä–∞—Å–Ω–∞—è —Ä–∞–º–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–µ–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
1. ‚úÖ –û—Ç–∫—Ä—ã—Ç—å —ç–∫—Ä–∞–Ω ‚Üí –∫—Ä–∞—Å–Ω—ã–µ —Ä–∞–º–∫–∏ —É –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏
2. ‚úÖ –í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É ‚Üí —Ä–∞–º–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ–±—ã—á–Ω–æ–π
3. ‚úÖ –í—ã–±—Ä–∞—Ç—å –≤—Ä–µ–º—è –∏–∑ —Å–ø–∏—Å–∫–∞ ‚Üí —Ä–∞–º–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ–±—ã—á–Ω–æ–π
4. ‚úÖ –ü–æ–ø—ã—Ç–∫–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ –¥–∞—Ç—ã ‚Üí –æ—à–∏–±–∫–∞ + –æ—Ç–∫—Ä—ã—Ç–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
5. ‚úÖ –ü–æ–ø—ã—Ç–∫–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ –≤—Ä–µ–º–µ–Ω–∏ ‚Üí –æ—à–∏–±–∫–∞ + –æ—Ç–∫—Ä—ã—Ç–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Ä–µ–º—ë–Ω
6. ‚úÖ –£—Å–ø–µ—à–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ SQLite —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏
7. ‚úÖ –û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º ‚Üí –≤—Ä–µ–º–µ–Ω–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π SQLite

---

## üì¶ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `/lib/features/booking/screens/individual_booking_screen.dart`
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã: `trip_settings.dart`, `trip_settings_service.dart`
   - –ò–∑–º–µ–Ω–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: `_selectedDate`, `_selectedTime`, `_tripSettings`
   - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥: `_loadTripSettings()`
   - –ü–µ—Ä–µ–¥–µ–ª–∞–Ω—ã –º–µ—Ç–æ–¥—ã: `_buildDatePicker()`, `_buildTimePicker()`
   - –ü–µ—Ä–µ–¥–µ–ª–∞–Ω—ã –º–µ—Ç–æ–¥—ã: `_showDatePicker()`, –¥–æ–±–∞–≤–ª–µ–Ω `_showTimePickerModal()`
   - –£–¥–∞–ª–µ–Ω –º–µ—Ç–æ–¥: `_formatTime(TimeOfDay)`
   - –û–±–Ω–æ–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã: `_calculatePrice()`, `_buildPricingSummary()`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤: `_bookTrip()`

---

## ‚úÖ –°—Ç–∞—Ç—É—Å: –ó–ê–í–ï–†–®–ï–ù–û

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã.
–≠–∫—Ä–∞–Ω "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä" —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç "–ì—Ä—É–ø–ø–æ–≤–æ–π –ø–æ–µ–∑–¥–∫–µ".
–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SQLite –æ–±–µ—Å–ø–µ—á–µ–Ω–∞.

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
2. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å SQLite
3. ‚è≥ –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–∫–∞–∑–æ–≤
4. ‚è≥ –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Git
5. ‚è≥ –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ GitHub
