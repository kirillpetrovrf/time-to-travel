# üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á—Ç–æ –∑–∞–∫–∞–∑—ã —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 22 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å backend:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù –ò –ó–ê–î–ï–ü–õ–û–ï–ù

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

Backend —Ç–µ–ø–µ—Ä—å **–ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–∫–∞–∑—ã –ë–ï–ó –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç** - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å:
- `fromAddress` (–æ—Ç–∫—É–¥–∞)
- `toAddress` (–∫—É–¥–∞)
- `finalPrice` (—Ü–µ–Ω–∞)
- `passengerCount` (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤)

–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏ –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–∞—Å—á—ë—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–∑–∂–µ.

---

## üì± –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∞—Å—Å–∞–∂–∏—Ä–∞
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –∏–ª–∏ —ç–º—É–ª—è—Ç–æ—Ä–µ.

### –®–∞–≥ 2: –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑
1. –£–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å **–æ—Ç–∫—É–¥–∞**: –Ω–∞–ø—Ä–∏–º–µ—Ä "–î–æ–Ω–µ—Ü–∫, —É–ª. –ê—Ä—Ç—ë–º–∞ 120"
2. –£–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å **–∫—É–¥–∞**: –Ω–∞–ø—Ä–∏–º–µ—Ä "–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É"
3. –í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è
4. –£–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤
5. –ù–∞–∂–º–∏—Ç–µ **"–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å"**

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
**–†–ê–ù–¨–®–ï –±—ã–ª–æ:**
```
‚ö†Ô∏è –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ backend: ServerException: Unknown error
üì± –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞–∫–∞–∑ –ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
üì± –°–æ–∑–¥–∞–Ω–æ –æ—Ñ—Ñ–ª–∞–π–Ω –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: offline_1769102725790
```

**–¢–ï–ü–ï–†–¨ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
‚úÖ –ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω –Ω–∞ backend
üìù ID –∑–∞–∫–∞–∑–∞: ORDER-2026-01-XXX
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∑–∞–∫–∞–∑ –ø–æ–ø–∞–ª –≤ backend
–ü–æ–ø—Ä–æ—Å–∏—Ç–µ –∫–æ–≥–æ-—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

```bash
ssh root@78.155.202.50
docker exec -i timetotravel_postgres psql -U timetotravel_user -d timetotravel \
  -c "SELECT order_id, from_address, to_address, final_price, status, created_at FROM orders ORDER BY created_at DESC LIMIT 5;"
```

**–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:**
```
     order_id      |       from_address       |    to_address     | final_price | status  |         created_at         
-------------------+--------------------------+-------------------+-------------+---------+----------------------------
 ORDER-2026-01-XXX | –î–æ–Ω–µ—Ü–∫, —É–ª. –ê—Ä—Ç—ë–º–∞ 120  | –†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É    |     4000.00 | pending | 2026-01-22 20:15:30.123...
```

‚úÖ –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –≤–∞—à –∑–∞–∫–∞–∑ - **–í–°–Å –†–ê–ë–û–¢–ê–ï–¢!**

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–∞–±–∏–Ω–µ—Ç–µ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
–û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞–±–∏–Ω–µ—Ç –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ –∏ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤–∏–¥–∏—Ç–µ –∑–∞–∫–∞–∑.

---

## üîß –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –í—Å—ë –µ—â—ë "offline_" –∑–∞–∫–∞–∑—ã
**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—ã–π –∫–æ–¥.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ
2. –ò–ª–∏ –æ—á–∏—Å—Ç–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. –ò–ª–∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ: `flutter clean && flutter build apk`

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –û—à–∏–±–∫–∞ "500 Internal Server Error"
**–ü—Ä–∏—á–∏–Ω–∞:** Backend –≤—Å—ë –µ—â—ë –Ω–µ –æ–±–Ω–æ–≤–ª—ë–Ω.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
ssh root@78.155.202.50
cd /opt/time-to-travel/backend
git pull origin main
docker compose down backend
docker compose up -d --build backend
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ó–∞–∫–∞–∑ –Ω–µ –≤–∏–¥–µ–Ω –≤ –ë–î
**–ü—Ä–∏—á–∏–Ω–∞:** –í–æ–∑–º–æ–∂–Ω–æ –º–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
ssh root@78.155.202.50
docker exec -i timetotravel_postgres psql -U timetotravel_user -d timetotravel \
  < /opt/time-to-travel/backend/database/migrations/003_make_coordinates_optional.sql
```

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–∑–¥–∞—ë—Ç –∑–∞–∫–∞–∑ –ë–ï–ó –æ—à–∏–±–∫–∏
- [ ] –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç `ORDER-2026-01-XXX` –≤–º–µ—Å—Ç–æ `offline_`
- [ ] –ó–∞–∫–∞–∑ –≤–∏–¥–µ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- [ ] –ó–∞–∫–∞–∑ –≤–∏–¥–µ–Ω –≤ –∫–∞–±–∏–Ω–µ—Ç–µ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
- [ ] –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞: `pending`

**–ï—Å–ª–∏ –≤—Å–µ –ø—É–Ω–∫—Ç—ã ‚úÖ - –¥–µ–ø–ª–æ–π —É—Å–ø–µ—à–µ–Ω!**

---

## üéØ –ß—Ç–æ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ curl

### –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ –Ω–∞–ø—Ä—è–º—É—é:
```bash
curl -X POST https://titotr.ru/api/orders \
  -H "Content-Type: application/json" \
  -d '{
    "fromAddress": "–î–æ–Ω–µ—Ü–∫",
    "toAddress": "–†–æ—Å—Ç–æ–≤",
    "finalPrice": 3500,
    "passengerCount": 1
  }'
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
HTTP/2 201 Created

{
  "order": {
    "orderId": "ORDER-2026-01-XXX",
    "fromAddress": "–î–æ–Ω–µ—Ü–∫",
    "toAddress": "–†–æ—Å—Ç–æ–≤",
    "finalPrice": 3500.0,
    "status": "pending"
  }
}
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health backend:
```bash
curl https://titotr.ru/api/health
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "service": "Time to Travel API",
  "version": "1.0.0"
}
```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–º–æ—â–∏

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend: `docker logs timetotravel_backend --tail 50`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è –∫–æ–¥–∞

**Backend URL:** https://titotr.ru  
**–ü–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π:** 22 —è–Ω–≤–∞—Ä—è 2026, 18:08 UTC  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
