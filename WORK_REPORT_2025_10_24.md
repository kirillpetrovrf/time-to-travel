# üìã –û–¢–ß–ï–¢ –û –†–ê–ë–û–¢–ï - 24 –û–ö–¢–Ø–ë–†–Ø 2025 –ì.

## üéØ –ì–õ–ê–í–ù–ê–Ø –ó–ê–î–ê–ß–ê
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤ —á–µ—Ä–µ–∑ –æ–Ω–ª–∞–π–Ω API –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç (–±–µ–∑ –º–æ–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö).

---

## ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê (–ù–ê–ß–ê–õ–û –î–ù–Ø)
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫—Ä–∞—à–∏–ª–æ—Å—å –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤–≤–æ–¥–∞ –∞–¥—Ä–µ—Å–∞ —Å –æ—à–∏–±–∫–æ–π `Fatal signal 11 (SIGSEGV)`.

### –î–µ—Ç–∞–ª–∏ –∫—Ä–∞—à–∞:
```
Fatal signal 11 (SIGSEGV), code 1 (SEGV_MAPERR)
Build fingerprint: 'google/sdk_gphone64_arm64/emu64a:14/UE1A.230829.036'
Abort message: 'art/runtime/indirect_reference_table.cc:143] JNI ERROR (app bug): local reference table overflow (max=512)'
backtrace:
  #00 pc 00000000003e8a9c  /apex/com.android.art/lib64/libart.so
  #01 pc 000000000050fc58  /apex/com.android.art/lib64/libart.so
  #02 pc 00000000005104c8  /apex/com.android.art/lib64/libart.so
  #03 pc 00000000016bbda0  /data/app/.../libmaps-mobile.so (yandex_flutter_search_SuggestSession_SearchSuggestSessionSuggestListener_new+28)
```

### –ú–µ—Å—Ç–æ –∫—Ä–∞—à–∞:
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∞–¥–∞–ª–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ `SearchSuggestSessionSuggestListener` –≤ —Ñ–∞–π–ª–µ `lib/services/yandex_suggest_service_v2.dart`.

---

## üîç –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú–´ (2-3 –ß–ê–°–ê)

### –ü–æ–ø—ã—Ç–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–í–°–ï –ù–ï–£–î–ê–ß–ù–´–ï):

#### ‚ùå –ü–æ–ø—ã—Ç–∫–∞ 1: Listener –∫–∞–∫ –ª–æ–∫–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è
```dart
Stream<List<SuggestItem>> getSuggestions(String query) async* {
  final listener = SearchSuggestSessionSuggestListener(
    onResponse: _onSuggestResponse,
    onError: _onSuggestError,
  );
  // –†–ï–ó–£–õ–¨–¢–ê–¢: SIGSEGV
}
```

#### ‚ùå –ü–æ–ø—ã—Ç–∫–∞ 2: Listener –∫–∞–∫ `late final` –ø–æ–ª–µ (—Å–æ–∑–¥–∞–Ω–∏–µ –≤ initialize())
```dart
class YandexSuggestService {
  late final SearchSuggestSessionSuggestListener _suggestListener;
  
  void initialize() {
    _suggestListener = SearchSuggestSessionSuggestListener(...);
    // –†–ï–ó–£–õ–¨–¢–ê–¢: SIGSEGV
  }
}
```

#### ‚ùå –ü–æ–ø—ã—Ç–∫–∞ 3: Listener –Ω–∞ —É—Ä–æ–≤–Ω–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø–æ–ª—è (–∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ –Ø–Ω–¥–µ–∫—Å–∞)
```dart
class YandexSuggestService {
  late final _suggestListener = SearchSuggestSessionSuggestListener(...);
  // –†–ï–ó–£–õ–¨–¢–ê–¢: SIGSEGV
}
```

#### ‚ùå –ü–æ–ø—ã—Ç–∫–∞ 4: SearchManager –∫–∞–∫ `final` –≤–º–µ—Å—Ç–æ `late final`
```dart
final _searchManager = SearchFactory.instance.createSearchManager(...);
// –†–ï–ó–£–õ–¨–¢–ê–¢: SIGSEGV
```

### –í—ã–≤–æ–¥:
**–í—Å–µ —Å–ø–æ—Å–æ–±—ã —Å–æ–∑–¥–∞–Ω–∏—è Listener –≤—ã–∑—ã–≤–∞–ª–∏ SIGSEGV!**

---

## üí° –ì–ò–ü–û–¢–ï–ó–ê –û –ü–†–ò–ß–ò–ù–ï –ö–†–ê–®–ê

–ü—Ä–æ–±–ª–µ–º–∞ –≤ **—Å–ø–æ—Å–æ–±–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ MapKit!**

### –¢–µ–∫—É—â–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–ê–Ø):
**–§–∞–π–ª:** `android/app/src/main/kotlin/com/timetotravel/app/MainApplication.kt`

```kotlin
class MainApplication : Application() {
    override fun onCreate() {
        super.onCreate()
        
        // ‚ùå –ù–ê–¢–ò–í–ù–ê–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø (–≤—ã–∑—ã–≤–∞–µ—Ç SIGSEGV)
        MapKitFactory.setApiKey("2f1d6a75-b751-4077-b305-c6abaea0b542")
        MapKitFactory.setLocale("ru_RU")
        MapKitFactory.initialize(this) // ‚ùå –ü–†–û–ë–õ–ï–ú–ê –ó–î–ï–°–¨!
    }
}
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –∫—Ä–∞—à:**
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ **Native Android API** (`MapKitFactory.initialize()`)
- –°–æ–∑–¥–∞–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã MapKit –Ω–∞ —É—Ä–æ–≤–Ω–µ Android
- **–ù–ï —Å–æ–∑–¥–∞–µ—Ç Flutter‚ÜîNative –ø—Ä–∏–≤—è–∑–∫–∏!**
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ `SearchSuggestSessionSuggestListener` –∏–∑ Flutter ‚Üí **SIGSEGV**

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ü–†–ò–ú–ï–†–ê –Ø–ù–î–ï–ö–°–ê

### –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞
**–ü—É—Ç—å:** `mapkit-flutter-demo-master/mapkit-samples/map_search`

**–ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:**
1. ‚ùå Gradle –≤–µ—Ä—Å–∏—è —É—Å—Ç–∞—Ä–µ–ª–∞ (8.1.0)
2. ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ñ–∞–π–ª `.env`
3. ‚ùå –í `main.dart` –≤—ã–∑–æ–≤ `initMapkit()` –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `apiKey`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```gradle
// android/settings.gradle
plugins {
    id "com.android.application" version "8.7.3" apply false // –ë—ã–ª–æ: 8.1.0
}
```

```dart
// lib/main.dart
// –ë—ã–ª–æ:
await init.initMapkit();

// –°—Ç–∞–ª–æ:
await init.initMapkit(apiKey: "2f1d6a75-b751-4077-b305-c6abaea0b542");
```

```xml
<!-- android/app/src/main/AndroidManifest.xml -->
<meta-data
    android:name="com.yandex.mapkit.ApiKey"
    android:value="2f1d6a75-b751-4077-b305-c6abaea0b542" />
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
‚úÖ **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏–ª–æ—Å—å –ë–ï–ó –ö–†–ê–®–ê!**

–õ–æ–≥–∏:
```
D/YandexMapsPlugin(25421): Init engineId for YandexMapsPlugin: 0
W/yandex.maps(25421): njTHJat74vw9kzRqtvQU: Unexpected server response: Forbidden. Body :Invalid api key
```

**–í—ã–≤–æ–¥—ã:**
1. ‚úÖ MapKit –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è
2. ‚úÖ Listener —Å–æ–∑–¥–∞–ª—Å—è –±–µ–∑ –∫—Ä–∞—à–∞
3. ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
4. ‚ö†Ô∏è API –∫–ª—é—á –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Invalid api key" (–Ω–æ —ç—Ç–æ –ù–ï –∫—Ä–∞—à!)

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –ö–†–ê–®–ê

### –ì–ª–∞–≤–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ:
**–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Å–ø–æ—Å–æ–±–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ MapKit!**

### –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (Flutter Plugin API):

#### –®–∞–≥ 1: –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å Native –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
**–§–∞–π–ª:** `android/app/src/main/kotlin/com/timetotravel/app/MainApplication.kt`

```kotlin
class MainApplication : Application() {
    override fun onCreate() {
        super.onCreate()
        
        // ‚ùå –ó–ê–ö–û–ú–ú–ï–ù–¢–ò–†–û–í–ê–ù–û: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è MapKit –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ main.dart
        // –ù–∞—Ç–∏–≤–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å Flutter Plugin API
        // –∏ –≤—ã–∑—ã–≤–∞–µ—Ç SIGSEGV –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ SearchSuggestSessionSuggestListener
        
        /*
        MapKitFactory.setApiKey("2f1d6a75-b751-4077-b305-c6abaea0b542")
        MapKitFactory.setLocale("ru_RU")
        MapKitFactory.initialize(this) // ‚ùå –ü–†–û–ë–õ–ï–ú–ê!
        */
        
        android.util.Log.i("MapKit", "‚ÑπÔ∏è MapKit –±—É–¥–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –≤ main.dart —á–µ—Ä–µ–∑ Flutter Plugin API")
    }
}
```

#### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤ main.dart
**–§–∞–π–ª:** `lib/main.dart`

```dart
import 'package:yandex_maps_mapkit/init.dart' as mapkit_init;

void main() async {
  WidgetsFlutterBinding.ensureInitialized();

  // Firebase initialization...
  
  // ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Yandex MapKit —á–µ—Ä–µ–∑ Flutter Plugin API
  // –ù–∞—Ç–∏–≤–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ MainApplication.kt –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞,
  // —Ç.–∫. –æ–Ω–∞ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å Flutter Plugin –∏ –≤—ã–∑—ã–≤–∞–µ—Ç SIGSEGV
  try {
    await mapkit_init.initMapkit(
      apiKey: "2f1d6a75-b751-4077-b305-c6abaea0b542",
    );
    print('‚úÖ Yandex MapKit –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —á–µ—Ä–µ–∑ Flutter Plugin API');
  } catch (e) {
    print('‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ MapKit: $e');
  }

  runApp(const TimeToTravelApp());
}
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
üéâ **–ü–†–ò–õ–û–ñ–ï–ù–ò–ï –ó–ê–ü–£–°–¢–ò–õ–û–°–¨ –ë–ï–ó –ö–†–ê–®–ê!**

–õ–æ–≥–∏ —Å —ç–º—É–ª—è—Ç–æ—Ä–∞:
```
D/YandexMapsPlugin(25840): Init engineId for YandexMapsPlugin: 0
I/flutter (25840): ‚úÖ Yandex MapKit –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —á–µ—Ä–µ–∑ Flutter Plugin API
I/flutter (25840): ‚ÑπÔ∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–æ–∫–∞–ª—å–Ω–æ (Firebase –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω)
I/flutter (25840): ‚úÖ –°–µ—Ä–≤–∏—Å –ª–æ–∫–∞–ª—å–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
I/flutter (25840): üîç HomeScreen: –ó–∞–≥—Ä—É–∂–µ–Ω —Ç–∏–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: UserType.client
```

**‚úÖ –ù–ï–¢ SIGSEGV! –ù–ï–¢ –ö–†–ê–®–ê!**

---

## üîç –ù–û–í–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: API –ù–ï –û–¢–í–ï–ß–ê–ï–¢

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∞—à–∞ —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å –Ω–æ–≤–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π:

### –°–∏–º–ø—Ç–æ–º—ã:
- ‚úÖ MapKit –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ SearchManager —Å–æ–∑–¥–∞–µ—Ç—Å—è
- ‚úÖ SuggestSession —Å–æ–∑–¥–∞–µ—Ç—Å—è
- ‚úÖ Listener —Å–æ–∑–¥–∞–µ—Ç—Å—è –±–µ–∑ –∫—Ä–∞—à–∞
- ‚úÖ –ú–µ—Ç–æ–¥ `suggest()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
- ‚ùå **Callback'–∏ listener –ù–ï –≤—ã–∑—ã–≤–∞—é—Ç—Å—è!**
- ‚ùå –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è —Ç–∞–π–º–∞—É—Ç–æ–º (5 —Å–µ–∫—É–Ω–¥)

### –õ–æ–≥–∏ —Å —ç–º—É–ª—è—Ç–æ—Ä–∞:
```
I/flutter (25840): üöÄ [Step 3] –û–¢–ü–†–ê–í–õ–Ø–ï–ú –ó–ê–ü–†–û–° –ö –Ø–ù–î–ï–ö–° API...
I/flutter (25840): ‚è≥ [Step 3.1] –ñ–¥–µ–º –æ—Ç–≤–µ—Ç –æ—Ç –Ø–Ω–¥–µ–∫—Å–∞ (—Ç–∞–π–º–∞—É—Ç 5 —Å–µ–∫—É–Ω–¥)...
W/yandex.maps(25840): poxHcJDuv2tO5gpI+pN3: No available cache for request
I/flutter (25840): ‚è±Ô∏è  [Step 4.TIMEOUT] –¢–ê–ô–ú–ê–£–¢! –Ø–Ω–¥–µ–∫—Å –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª –∑–∞ 5 —Å–µ–∫—É–Ω–¥
I/flutter (25840): ‚úÖ [FROM] –ü–æ–ª—É—á–µ–Ω–æ –ø–æ–¥—Å–∫–∞–∑–æ–∫: 0
```

### –ö–ª—é—á–µ–≤–∞—è –æ—à–∏–±–∫–∞:
```
W/yandex.maps: njTHJat74vw9kzRqtvQU: Unexpected server response: Forbidden. Body :Invalid api key
W/yandex.maps: Could not fetch [https://proxy.mob.maps.yandex.net:443/mapkit2/init/2.x/random]
```

---

## üîë –ü–†–û–í–ï–†–ö–ê API –ö–õ–Æ–ß–ê

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –Ø–Ω–¥–µ–∫—Å–∞:
```
API –∫–ª—é—á: 2f1d6a75-b751-4077-b305-c6abaea0b542
–°—Ç–∞—Ç—É—Å: ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω
–¢–∞—Ä–∏—Ñ: –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π
–ò–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–æ: 0 –∑–∞–ø—Ä–æ—Å–æ–≤
Package: com.timetotravel.app ‚úÖ
```

### –ü–∞—Ä–∞–¥–æ–∫—Å:
1. **–ö–ª—é—á –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ê–∫—Ç–∏–≤–µ–Ω"** –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
2. **–Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç—ã –†–ê–ë–û–¢–ê–õ–ò —Å–µ–≥–æ–¥–Ω—è** —Å —ç—Ç–∏–º –∂–µ –∫–ª—é—á–æ–º –Ω–∞ —ç—Ç–æ–º –∂–µ —ç–º—É–ª—è—Ç–æ—Ä–µ
3. **–ù–æ Search API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "Invalid api key"**

### –û—Ç–≤–µ—Ç –æ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –Ø–Ω–¥–µ–∫—Å–∞:
> "–£ MapKit –µ—Å—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –ï—Å–ª–∏ –≤—ã –±—É–¥–µ—Ç–µ –ø—ã—Ç–∞—Ç—å—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª—é—á MapKit –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ –ì–µ–æ–∫–æ–¥–µ—Ä—É, –≤—ã –Ω–µ–∏–∑–±–µ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç–µ 403 –æ—à–∏–±–∫—É. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ì–µ–æ–∫–æ–¥–µ—Ä –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç JS API –∑–∞–ø—Ä–µ—â–∞–µ—Ç—Å—è –≤ —Ä–∞–º–∫–∞—Ö –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞. –í –≤–∞—à–µ–º —Å–ª—É—á–∞–µ –º–æ–∂–µ—Ç–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ SearchManager."

**–í—ã–≤–æ–¥:** 
- –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º SearchManager ‚úÖ
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–π –ì–µ–æ–∫–æ–¥–µ—Ä API ‚úÖ
- –ù–æ –ø–æ—á–µ–º—É-—Ç–æ –ø–æ–ª—É—á–∞–µ–º –æ—à–∏–±–∫—É "Invalid api key"

---

## üì± –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ù–ê –†–ï–ê–õ–¨–ù–û–ú –£–°–¢–†–û–ô–°–¢–í–ï

### –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–ø—É—Å–∫–∞ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ:
1. –ü–æ–¥–∫–ª—é—á–∏–ª–∏ Samsung Galaxy —á–µ—Ä–µ–∑ USB
2. –í–∫–ª—é—á–∏–ª–∏ –æ—Ç–ª–∞–¥–∫—É –ø–æ USB
3. –ó–∞–ø—É—Å—Ç–∏–ª–∏ `flutter run`

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
**–¢–ê –ñ–ï –ü–†–û–ë–õ–ï–ú–ê!**

–õ–æ–≥–∏ —Å —Ä–µ–∞–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:
```
I/flutter (20937): ‚úÖ Yandex MapKit –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —á–µ—Ä–µ–∑ Flutter Plugin API
I/flutter (20937): üöÄ [Step 3] –û–¢–ü–†–ê–í–õ–Ø–ï–ú –ó–ê–ü–†–û–° –ö –Ø–ù–î–ï–ö–° API...
W/yandex.maps(20937): poxHcJDuv2tO5gpI+pN3: No available cache for request
I/flutter (20937): ‚è±Ô∏è  [Step 4.TIMEOUT] –¢–ê–ô–ú–ê–£–¢! –Ø–Ω–¥–µ–∫—Å –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª –∑–∞ 5 —Å–µ–∫—É–Ω–¥
I/flutter (20937): ‚úÖ [FROM] –ü–æ–ª—É—á–µ–Ω–æ –ø–æ–¥—Å–∫–∞–∑–æ–∫: 0
```

**–í—ã–≤–æ–¥—ã:**
- ‚úÖ –ö—Ä–∞—à –∏—Å–ø—Ä–∞–≤–ª–µ–Ω (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ)
- ‚ùå Callback'–∏ listener –ù–ï –≤—ã–∑—ã–≤–∞—é—Ç—Å—è
- ‚ùå "No available cache for request"
- ‚ùå –ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

---

## üìÑ –°–û–ó–î–ê–ù–ù–´–ï –î–û–ö–£–ú–ï–ù–¢–´

### –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Ç—á–µ—Ç—ã:
1. **`MAPKIT_CRASH_SOLUTION_FINAL.md`**
   - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∫—Ä–∞—à–∞
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Native vs Flutter Plugin –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
   - –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ

2. **`YANDEX_DEMO_SUCCESS.md`**
   - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–º–µ—Ä–∞ –Ø–Ω–¥–µ–∫—Å–∞
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–º–µ—Ä–∞
   - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, —á—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Å–ø–æ—Å–æ–±–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

3. **`FIX_PLAN.md`**
   - –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
   - –û–±—ä—è—Å–Ω–µ–Ω–∏–µ, –ø–æ—á–µ–º—É –Ω–∞—Ç–∏–≤–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

4. **`API_KEY_INVALID_GET_NEW.md`**
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é –Ω–æ–≤–æ–≥–æ API –∫–ª—é—á–∞
   - –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–ª—é—á—É –¥–ª—è Search API
   - –®–∞–≥–∏ –ø–æ –∑–∞–º–µ–Ω–µ –∫–ª—é—á–∞

5. **`QUICK_TEST_AUTOCOMPLETE.md`**
   - –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
   - –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

6. **`YANDEX_API_ISSUE_REPORT.md`** ‚≠ê (–ì–õ–ê–í–ù–´–ô –î–û–ö–£–ú–ï–ù–¢)
   - –ü–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –Ø–Ω–¥–µ–∫—Å–∞
   - –í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–±–ª–µ–º–µ —Å callback'–∞–º–∏
   - –õ–æ–≥–∏, –∫–æ–¥, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
   - –°–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ –∫ –Ø–Ω–¥–µ–∫—Å—É

---

## üéØ –ò–¢–û–ì–ò –†–ê–ë–û–¢–´

### ‚úÖ –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û:
1. **SIGSEGV –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ SearchSuggestSessionSuggestListener** ‚Üí –ò–°–ü–†–ê–í–õ–ï–ù–û!
   - –£–±—Ä–∞–Ω–∞ –Ω–∞—Ç–∏–≤–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è MapKit –∏–∑ `MainApplication.kt`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Flutter Plugin –≤ `main.dart`
   - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ë–ï–ó –∫—Ä–∞—à–∞ –Ω–∞ —ç–º—É–ª—è—Ç–æ—Ä–µ –∏ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

2. **–ü–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:**
   - –ù–∞—Ç–∏–≤–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (`MapKitFactory.initialize()`) –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å Flutter Plugin
   - Flutter Plugin —Ç—Ä–µ–±—É–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `init.initMapkit(apiKey: "...")`
   - –≠—Ç–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ –∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥

### ‚ùå –ß–¢–û –ù–ï –†–ê–ë–û–¢–ê–ï–¢:
1. **Callback'–∏ SearchSuggestSessionSuggestListener –ù–ï –≤—ã–∑—ã–≤–∞—é—Ç—Å—è**
   - –ù–∏ `onResponse`, –Ω–∏ `onError` –Ω–µ –ø–æ–ª—É—á–∞—é—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
   - –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è 5-—Å–µ–∫—É–Ω–¥–Ω—ã–º —Ç–∞–π–º–∞—É—Ç–æ–º
   - –û—à–∏–±–∫–∞: "No available cache for request"

2. **–í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ —Å API –∫–ª—é—á–æ–º:**
   - –ö–ª—é—á –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Invalid api key" –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ MapKit
   - –ù–æ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –∫–ª—é—á –∞–∫—Ç–∏–≤–µ–Ω
   - –ö–∞—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞–ª–∏ —Å —ç—Ç–∏–º –∫–ª—é—á–æ–º —Å–µ–≥–æ–¥–Ω—è

---

## üîÑ –ß–¢–û –ë–´–õ–û –°–î–ï–õ–ê–ù–û (–•–†–û–ù–û–õ–û–ì–ò–Ø)

### 09:00 - 11:00: –ê–Ω–∞–ª–∏–∑ –∫—Ä–∞—à–∞ SIGSEGV
- –ò–∑—É—á–µ–Ω–∏–µ stack trace
- –ü–æ–ø—ã—Ç–∫–∏ —Ä–∞–∑–Ω—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ —Å–æ–∑–¥–∞–Ω–∏—è listener
- –ò–∑—É—á–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –Ø–Ω–¥–µ–∫—Å MapKit

### 11:00 - 13:00: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–∞ –Ø–Ω–¥–µ–∫—Å–∞
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Gradle –¥–æ 8.7.3
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–∑–æ–≤–∞ `initMapkit()`
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ API –∫–ª—é—á–∞ –≤ AndroidManifest
- **–£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—É—Å–∫ –ë–ï–ó –∫—Ä–∞—à–∞!**

### 13:00 - 15:00: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ
- –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Ç–∏–≤–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Flutter Plugin –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —ç–º—É–ª—è—Ç–æ—Ä–µ
- **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏–ª–æ—Å—å –ë–ï–ó –∫—Ä–∞—à–∞!**

### 15:00 - 16:00: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –Ω–æ–≤–æ–π –ø—Ä–æ–±–ª–µ–º—ã
- Callback'–∏ –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Ç–∞–π–º–∞—É—Ç—è—Ç
- –û—à–∏–±–∫–∞ "No available cache for request"

### 16:00 - 17:00: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Samsung Galaxy
- –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–¢–∞ –∂–µ –ø—Ä–æ–±–ª–µ–º–∞ —Å callback'–∞–º–∏**

### 17:00 - 18:00: –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –¥–ª—è –Ø–Ω–¥–µ–∫—Å–∞
- –°–±–æ—Ä –≤—Å–µ—Ö –ª–æ–≥–æ–≤
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
- –°–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º

---

## üìã –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò (–î–õ–Ø –ó–ê–í–¢–†–ê)

### 1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –Ø–Ω–¥–µ–∫—Å–∞
**–§–∞–π–ª:** `YANDEX_API_ISSUE_REPORT.md`

**–ö—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å:**
- –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞: https://yandex.ru/support/mapkit/
- GitHub Issues: https://github.com/yandex/mapkit-flutter
- Email –ø–æ–¥–¥–µ—Ä–∂–∫–∏ MapKit

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã:**
1. –ü–æ—á–µ–º—É "No available cache for request"?
2. –ü–æ—á–µ–º—É callback'–∏ Listener –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è?
3. –¢—Ä–µ–±—É–µ—Ç—Å—è –ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è Search API?
4. –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ Search API –≤ Flutter plugin?

### 2. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã (–µ—Å–ª–∏ –Ø–Ω–¥–µ–∫—Å –Ω–µ –æ—Ç–≤–µ—Ç–∏—Ç –±—ã—Å—Ç—Ä–æ)

#### –í–∞—Ä–∏–∞–Ω—Ç A: –£–≤–µ–ª–∏—á–∏—Ç—å —Ç–∞–π–º–∞—É—Ç
```dart
final results = await completer.future.timeout(
  const Duration(seconds: 15), // –ë—ã–ª–æ: 5 —Å–µ–∫—É–Ω–¥
);
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
```dart
await mapkit_init.initMapkit(apiKey: "...");
await Future.delayed(Duration(seconds: 2)); // –î–∞—Ç—å MapKit –ø—Ä–æ–≥—Ä–µ—Ç—å—Å—è
```

#### –í–∞—Ä–∏–∞–Ω—Ç C: –î–æ–±–∞–≤–∏—Ç—å retry –ª–æ–≥–∏–∫—É
```dart
for (int attempt = 1; attempt <= 3; attempt++) {
  try {
    _suggestSession.suggest(...);
    final results = await completer.future.timeout(...);
    if (results.isNotEmpty) break;
  } catch (e) {
    if (attempt == 3) rethrow;
    await Future.delayed(Duration(seconds: 2));
  }
}
```

#### –í–∞—Ä–∏–∞–Ω—Ç D: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ –¥—Ä—É–≥–æ–º –ø—Ä–∏–º–µ—Ä–µ –Ø–Ω–¥–µ–∫—Å–∞
–ó–∞–ø—É—Å—Ç–∏—Ç—å –¥—Ä—É–≥–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ `mapkit-flutter-demo` –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —É –Ω–∏—Ö Search API.

### 3. –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–∂–µ—Ç
–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:
- Google Places API (–Ω–æ —Ç—Ä–µ–±—É–µ—Ç Google Services)
- HERE Maps API
- Nominatim (OpenStreetMap)
- –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –†–ê–ë–û–¢–´

### –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: ~9 —á–∞—Å–æ–≤
- –ê–Ω–∞–ª–∏–∑ –∫—Ä–∞—à–∞: 2 —á–∞—Å–∞
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–∞: 2 —á–∞—Å–∞
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π: 2 —á–∞—Å–∞
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ: 1 —á–∞—Å
- –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏: 2 —á–∞—Å–∞

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫—Ä–∞—à SIGSEGV (100%)
- ‚ö†Ô∏è Search API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ç—Ä–µ–±—É–µ—Ç –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏–∑—É—á–µ–Ω–∏—è)
- üìÑ –°–æ–∑–¥–∞–Ω–æ 6+ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤
- üéØ –ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞

---

## üîë –ö–õ–Æ–ß–ï–í–´–ï –í–´–í–û–î–´

### 1. –°–ø–æ—Å–æ–± –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ MapKit –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω!
**–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û** (–≤—ã–∑—ã–≤–∞–µ—Ç SIGSEGV):
```kotlin
// –í MainApplication.kt
MapKitFactory.initialize(this)
```

**–ü–†–ê–í–ò–õ–¨–ù–û** (—Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∫—Ä–∞—à–∞):
```dart
// –í main.dart
await init.initMapkit(apiKey: "...")
```

### 2. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ø–Ω–¥–µ–∫—Å–∞ –Ω–µ–ø–æ–ª–Ω–∞—è
- –í –ø—Ä–∏–º–µ—Ä–∞—Ö –Ω–µ –ø–æ–∫–∞–∑–∞–Ω–æ, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Search API –≤ Flutter
- –ù–µ—Ç —á–µ—Ç–∫–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è –Ω–∞ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –Ω–∞—Ç–∏–≤–Ω–æ–π –∏ Flutter –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –û—à–∏–±–∫–∞ "Invalid api key" –ø–æ—è–≤–ª—è–µ—Ç—Å—è –¥–∞–∂–µ —Å –≤–∞–ª–∏–¥–Ω—ã–º –∫–ª—é—á–æ–º

### 3. Listener callback'–∏ –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è
- –≠—Ç–æ –ª–∏–±–æ –±–∞–≥ Flutter plugin
- –õ–∏–±–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–Ω–µ —É–∫–∞–∑–∞–Ω–Ω–∞—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏)
- –õ–∏–±–æ –ø—Ä–æ–±–ª–µ–º–∞ —Å —Å–∞–º–∏–º API –∫–ª—é—á–æ–º (—Ö–æ—Ç—è –æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ê–∫—Ç–∏–≤–µ–Ω")

### 4. "No available cache for request" - –∫–ª—é—á–µ–≤–∞—è –æ—à–∏–±–∫–∞
–≠—Ç–∞ –æ—à–∏–±–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –ª–æ–≥–∞—Ö MapKit –∏, –≤–µ—Ä–æ—è—Ç–Ω–æ, —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏—á–∏–Ω–æ–π —Ç–æ–≥–æ, —á—Ç–æ callback'–∏ –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è.

---

## üé® –í–ò–ó–£–ê–õ–¨–ù–û–ï –†–ï–ó–Æ–ú–ï

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ü–†–û–ë–õ–ï–ú–ê: SIGSEGV –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Listener                ‚îÇ
‚îÇ                                                           ‚îÇ
‚îÇ  ‚ùå –ü—Ä–∏—á–∏–Ω–∞:                                             ‚îÇ
‚îÇ     MapKit –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è –≤ MainApplication.kt        ‚îÇ
‚îÇ     —á–µ—Ä–µ–∑ –Ω–∞—Ç–∏–≤–Ω—ã–π API (MapKitFactory.initialize())     ‚îÇ
‚îÇ                                                           ‚îÇ
‚îÇ  ‚úÖ –†–µ—à–µ–Ω–∏–µ:                                             ‚îÇ
‚îÇ     1. –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Ç–∏–≤–Ω—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é          ‚îÇ
‚îÇ     2. –î–æ–±–∞–≤–∏—Ç—å Flutter Plugin –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤ main.dart‚îÇ
‚îÇ     3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å init.initMapkit(apiKey: "...")     ‚îÇ
‚îÇ                                                           ‚îÇ
‚îÇ  üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç:                                           ‚îÇ
‚îÇ     –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ë–ï–ó –∫—Ä–∞—à–∞!                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ù–û–í–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: Callback'–∏ listener –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è       ‚îÇ
‚îÇ                                                           ‚îÇ
‚îÇ  ‚ùå –°–∏–º–ø—Ç–æ–º—ã:                                            ‚îÇ
‚îÇ     ‚Ä¢ MapKit –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è ‚úÖ                         ‚îÇ
‚îÇ     ‚Ä¢ SearchManager —Å–æ–∑–¥–∞–µ—Ç—Å—è ‚úÖ                         ‚îÇ
‚îÇ     ‚Ä¢ Listener —Å–æ–∑–¥–∞–µ—Ç—Å—è ‚úÖ                              ‚îÇ
‚îÇ     ‚Ä¢ suggest() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è ‚úÖ                            ‚îÇ
‚îÇ     ‚Ä¢ Callback'–∏ –ù–ï –≤—ã–∑—ã–≤–∞—é—Ç—Å—è ‚ùå                        ‚îÇ
‚îÇ     ‚Ä¢ –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Ç–∞–π–º–∞—É—Ç—è—Ç ‚ùå                          ‚îÇ
‚îÇ                                                           ‚îÇ
‚îÇ  ‚ö†Ô∏è –û—à–∏–±–∫–∞:                                              ‚îÇ
‚îÇ     "No available cache for request"                     ‚îÇ
‚îÇ     "Invalid api key" (—Ö–æ—Ç—è –∫–ª—é—á –∞–∫—Ç–∏–≤–µ–Ω)               ‚îÇ
‚îÇ                                                           ‚îÇ
‚îÇ  üìù –°—Ç–∞—Ç—É—Å:                                              ‚îÇ
‚îÇ     –°–æ–∑–¥–∞–Ω –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –¥–ª—è –Ø–Ω–¥–µ–∫—Å–∞                  ‚îÇ
‚îÇ     –û–∂–∏–¥–∞–µ–º –æ—Ç–≤–µ—Ç –æ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìù –í–ê–ñ–ù–´–ï –§–ê–ô–õ–´ –î–õ–Ø –°–ü–†–ê–í–ö–ò

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. **`android/app/src/main/kotlin/com/timetotravel/app/MainApplication.kt`**
   - –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞—Ç–∏–≤–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è MapKit

2. **`lib/main.dart`**
   - –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç: `import 'package:yandex_maps_mapkit/init.dart' as mapkit_init;`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: `await mapkit_init.initMapkit(apiKey: "...")`

3. **`lib/services/yandex_suggest_service_v2.dart`**
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
   - Listener —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–∞–∫ `late final` –ø–æ–ª–µ –∫–ª–∞—Å—Å–∞

### –§–∞–π–ª—ã –ø—Ä–∏–º–µ—Ä–∞ –Ø–Ω–¥–µ–∫—Å–∞:
1. **`mapkit-flutter-demo-master/mapkit-samples/map_search/lib/main.dart`**
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `initMapkit(apiKey: "...")`

2. **`mapkit-flutter-demo-master/mapkit-samples/map_search/android/settings.gradle`**
   - –û–±–Ω–æ–≤–ª–µ–Ω Gradle –¥–æ 8.7.3

3. **`mapkit-flutter-demo-master/mapkit-samples/map_search/android/app/src/main/AndroidManifest.xml`**
   - –î–æ–±–∞–≤–ª–µ–Ω API –∫–ª—é—á –≤ meta-data

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- **`YANDEX_API_ISSUE_REPORT.md`** ‚≠ê - –ì–ª–∞–≤–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –¥–ª—è –Ø–Ω–¥–µ–∫—Å–∞
- **`MAPKIT_CRASH_SOLUTION_FINAL.md`** - –†–µ—à–µ–Ω–∏–µ –∫—Ä–∞—à–∞
- **`API_KEY_INVALID_GET_NEW.md`** - –ü—Ä–æ API –∫–ª—é—á

---

## üîÆ –ü–†–û–ì–ù–û–ó –ù–ê –ó–ê–í–¢–†–ê

### –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:
1. –Ø–Ω–¥–µ–∫—Å –æ—Ç–≤–µ—Ç–∏—Ç –Ω–∞ –æ—Ç—á–µ—Ç
2. –û–Ω–∏ —É–∫–∞–∂—É—Ç –Ω–∞ –æ—à–∏–±–∫—É –≤ –Ω–∞—à–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. –ú—ã –∏—Å–ø—Ä–∞–≤–∏–º –∏ –≤—Å—ë –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç

### –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:
1. –Ø–Ω–¥–µ–∫—Å –æ—Ç–≤–µ—Ç–∏—Ç —á–µ—Ä–µ–∑ 1-2 –¥–Ω—è
2. –ù–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã
3. –í–æ–∑–º–æ–∂–Ω–æ, –Ω–∞–π–¥–µ–º —Ä–µ—à–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–º –ø—Ä–æ–± –∏ –æ—à–∏–±–æ–∫

### –ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:
1. –≠—Ç–æ –±–∞–≥ Flutter plugin –¥–ª—è MapKit
2. –ü—Ä–∏–¥–µ—Ç—Å—è –∂–¥–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è plugin
3. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è (Google Places, etc.)

---

**–î–∞—Ç–∞ –æ—Ç—á–µ—Ç–∞:** 24 –æ–∫—Ç—è–±—Ä—è 2025 –≥., 18:00  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot + –ö–∏—Ä–∏–ª–ª –ü–µ—Ç—Ä–æ–≤  
**–°—Ç–∞—Ç—É—Å:** –ö—Ä–∞—à –∏—Å–ø—Ä–∞–≤–ª–µ–Ω ‚úÖ, Search API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚ö†Ô∏è  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ñ–¥–µ–º –æ—Ç–≤–µ—Ç–∞ –æ—Ç –Ø–Ω–¥–µ–∫—Å–∞

---

## üéØ CHECKLIST –î–õ–Ø –ó–ê–í–¢–†–ê

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—á—Ç—É/GitHub –Ω–∞ –æ—Ç–≤–µ—Ç –æ—Ç –Ø–Ω–¥–µ–∫—Å–∞
- [ ] –ï—Å–ª–∏ –Ω–µ—Ç –æ—Ç–≤–µ—Ç–∞ - –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –í–∞—Ä–∏–∞–Ω—Ç A (—É–≤–µ–ª–∏—á–∏—Ç—å —Ç–∞–π–º–∞—É—Ç)
- [ ] –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –í–∞—Ä–∏–∞–Ω—Ç B (–∑–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏)
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥—Ä—É–≥–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ mapkit-flutter-demo
- [ ] –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ - –Ω–∞—á–∞—Ç—å –∏–∑—É—á–µ–Ω–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤ (Google Places API)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –Ω–æ–≤—ã—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

---

**P.S.:** –°–µ–≥–æ–¥–Ω—è –º—ã –ø—Ä–æ–¥–µ–ª–∞–ª–∏ –æ–≥—Ä–æ–º–Ω—É—é —Ä–∞–±–æ—Ç—É! –ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ (–∫—Ä–∞—à) —Ä–µ—à–µ–Ω–∞. –û—Å—Ç–∞–ª–æ—Å—å —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å –≤—ã–∑–æ–≤–æ–º callback'–æ–≤, –∏ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç! üí™
