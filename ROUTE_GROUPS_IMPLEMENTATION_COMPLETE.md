# üéâ –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø –ì–†–£–ü–ü –ú–ê–†–®–†–£–¢–û–í: –ó–ê–í–ï–†–®–ï–ù–ê

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –≠–¢–ê–ü–´

### **–≠—Ç–∞–ø 1: –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö** ‚úÖ 100%
- ‚úÖ `lib/models/route_group.dart` - –º–æ–¥–µ–ª—å –≥—Ä—É–ø–ø—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤
- ‚úÖ `lib/models/predefined_route.dart` - —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ 4 –Ω–æ–≤—ã–º–∏ –ø–æ–ª—è–º–∏:
  - `groupId` - —Å–≤—è–∑—å —Å –≥—Ä—É–ø–ø–æ–π
  - `useGroupPrice` - —Ñ–ª–∞–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≥—Ä—É–ø–ø–æ–≤–æ–π —Ü–µ–Ω—ã
  - `customPrice` - —Ñ–ª–∞–≥ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–π —Ü–µ–Ω—ã
  - `isReverse` - —Ñ–ª–∞–≥ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞

### **–≠—Ç–∞–ø 2: –°–µ—Ä–≤–∏—Å—ã** ‚úÖ 100%
- ‚úÖ `lib/services/route_group_service.dart` - CRUD –¥–ª—è –≥—Ä—É–ø–ø
  - `getAllGroups()`, `getGroupById()`, `createGroup()`
  - `updateGroupPrice()`, `updateGroup()`, `deleteGroup()`
  - `addGroupsBatch()`, `getGroupsStream()`
  
- ‚úÖ `lib/services/route_management_service.dart` - —Ä–∞—Å—à–∏—Ä–µ–Ω 5 –º–µ—Ç–æ–¥–∞–º–∏:
  - `getRoutesByGroup()` - –ø–æ–ª—É—á–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã –≥—Ä—É–ø–ø—ã
  - `updateGroupRoutes()` - –º–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω
  - `updateRoutePrice()` - –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –º–∞—Ä—à—Ä—É—Ç–∞
  - `resetRouteToGroupPrice()` - —Å–±—Ä–æ—Å –∫ –≥—Ä—É–ø–ø–æ–≤–æ–π —Ü–µ–Ω–µ
  - `createReverseRoute()` - —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞

### **–≠—Ç–∞–ø 3: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä –¥–∞–Ω–Ω—ã—Ö** ‚úÖ 100%
- ‚úÖ `lib/data/route_groups_initializer.dart` - 9 –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø:
  1. **–†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å** (8000‚ÇΩ): –†–æ—Å—Ç–æ–≤, –¢–∞–≥–∞–Ω—Ä–æ–≥, –ë–∞—Ç–∞–π—Å–∫, –ê–∫—Å–∞–π
  2. **–ö—Ä—ã–º** (45000‚ÇΩ): –≤—Å–µ –∫—Ä—ã–º—Å–∫–∏–µ –≥–æ—Ä–æ–¥–∞
  3. **–ê–∑–æ–≤—Å–∫–æ–µ –º–æ—Ä–µ** (7500‚ÇΩ): –≥–æ—Ä–æ–¥–∞ –ø–æ–±–µ—Ä–µ–∂—å—è
  4. **–ß–µ—Ä–Ω–æ–º–æ—Ä—Å–∫–æ–µ –ø–æ–±–µ—Ä–µ–∂—å–µ** (40000‚ÇΩ): –ê–Ω–∞–ø–∞, –ì–µ–ª–µ–Ω–¥–∂–∏–∫
  5. **–°–æ—á–∏** (50000‚ÇΩ): –°–æ—á–∏ + –∞—ç—Ä–æ–ø–æ—Ä—Ç
  6. **–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä** (30000‚ÇΩ)
  7. **–í–æ–ª–≥–æ–≥—Ä–∞–¥, –ú–∏–Ω–≤–æ–¥—ã** (40000‚ÇΩ)
  8. **–ï–π—Å–∫** (22000‚ÇΩ)
  9. **–î–∞–ª—å–Ω—è—è –†–æ—Å—Å–∏—è** (50000‚ÇΩ): –ú–æ—Å–∫–≤–∞, –í–æ—Ä–æ–Ω–µ–∂

### **–≠—Ç–∞–ø 4: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞** ‚úÖ 100%
- ‚úÖ `lib/features/admin/screens/route_groups_admin_screen.dart`
  - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≥—Ä—É–ø–ø
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥—Ä—É–ø–ø, –æ–±—â–µ–µ —á–∏—Å–ª–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤)
  - –ü–µ—Ä–µ—Ö–æ–¥ –∫ –¥–µ—Ç–∞–ª—è–º –≥—Ä—É–ø–ø—ã
  - –£–¥–∞–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø
  
- ‚úÖ `lib/features/admin/screens/route_group_details_screen.dart`
  - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–∑–æ–≤–æ–π —Ü–µ–Ω—ã –≥—Ä—É–ø–ø—ã
  - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã –∫–æ –≤—Å–µ–º –º–∞—Ä—à—Ä—É—Ç–∞–º —Å –≥—Ä—É–ø–ø–æ–≤–æ–π —Ü–µ–Ω–æ–π
  - –°–ø–∏—Å–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≥—Ä—É–ø–ø—ã
  - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–π —Ü–µ–Ω—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
  - –°–±—Ä–æ—Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–π —Ü–µ–Ω—ã –∫ –≥—Ä—É–ø–ø–æ–≤–æ–π
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–º–∞—Ä—à—Ä—É—Ç—ã —Å –≥—Ä—É–ø–ø–æ–≤–æ–π/–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π)
  
- ‚úÖ `lib/features/admin/widgets/route_group_card.dart`
  - –ö–∞—Ä—Ç–æ—á–∫–∞ –≥—Ä—É–ø–ø—ã –¥–ª—è —Å–ø–∏—Å–∫–∞
  
- ‚úÖ `lib/features/admin/widgets/route_in_group_item.dart`
  - –≠–ª–µ–º–µ–Ω—Ç –º–∞—Ä—à—Ä—É—Ç–∞ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ —Ü–µ–Ω—ã

### **–≠—Ç–∞–ø 5: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** ‚úÖ 100%
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∏–∑ `admin_routes_screen.dart` ‚Üí –∫–Ω–æ–ø–∫–∞ "üì¶" –≤ navigation bar

---

## üìã –ò–ù–°–¢–†–£–ö–¶–ò–ò –ü–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

### **–®–∞–≥ 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä—É–ø–ø**

–í –ª—é–±–æ–º –º–µ—Å—Ç–µ –∫–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è) –≤—ã–∑–æ–≤–∏—Ç–µ:

```dart
import 'package:time_to_travel/data/route_groups_initializer.dart';

// –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∏–ª–∏ –¥–ª—è —Å–±—Ä–æ—Å–∞
await RouteGroupsInitializer.initializeGroups();

// –ò–ª–∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
await RouteGroupsInitializer.forceInitializeGroups();
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –¥–æ–±–∞–≤–∏—Ç—å –≤ `main.dart` –∏–ª–∏ –≤ —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

---

### **–®–∞–≥ 2: –î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏**

1. –û—Ç–∫—Ä–æ–π—Ç–µ —ç–∫—Ä–∞–Ω "–ê–¥–º–∏–Ω: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏" (`AdminRoutesScreen`)
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É **üì¶** (–∫–≤–∞–¥—Ä–∞—Ç–∏–∫–∏) –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
3. –û—Ç–∫—Ä–æ–µ—Ç—Å—è —ç–∫—Ä–∞–Ω "–ì—Ä—É–ø–ø—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤" (`RouteGroupsAdminScreen`)

---

### **–®–∞–≥ 3: –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π #1 - –ú–∞—Å—Å–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã**

**–¶–µ–ª—å**: –ò–∑–º–µ–Ω–∏—Ç—å –±–∞–∑–æ–≤—É—é —Ü–µ–Ω—É –¥–ª—è –≥—Ä—É–ø–ø—ã "–†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å" —Å 8000‚ÇΩ –Ω–∞ 9000‚ÇΩ

1. –í —Å–ø–∏—Å–∫–µ –≥—Ä—É–ø–ø –≤—ã–±–µ—Ä–∏—Ç–µ **"–†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å"**
2. –í –ø–æ–ª–µ "–ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ –≥—Ä—É–ø–ø—ã" –≤–≤–µ–¥–∏—Ç–µ **9000**
3. –ù–∞–∂–º–∏—Ç–µ **"–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ –≤—Å–µ–º –º–∞—Ä—à—Ä—É—Ç–∞–º"**
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- –í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã —Å —Ñ–ª–∞–≥–æ–º `useGroupPrice=true` –æ–±–Ω–æ–≤—è—Ç—Å—è –¥–æ 9000‚ÇΩ
- –ú–∞—Ä—à—Ä—É—Ç—ã —Å —Ñ–ª–∞–≥–æ–º `customPrice=true` –æ—Å—Ç–∞–Ω—É—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º–∏
- –í —Å–ø–∏—Å–∫–µ –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ, —Å–∫–æ–ª—å–∫–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å –≥—Ä—É–ø–ø–æ–≤–æ–π —Ü–µ–Ω–æ–π (üîó) –∏ —Å–∫–æ–ª—å–∫–æ —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–π (‚úèÔ∏è)

---

### **–®–∞–≥ 4: –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π #2 - –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞**

**–¶–µ–ª—å**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Å–æ–±—É—é —Ü–µ–Ω—É –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∞ "–ï–Ω–∞–∫–∏–µ–≤–æ ‚Üí –†–æ—Å—Ç–æ–≤" = 12000‚ÇΩ

1. –í –¥–µ—Ç–∞–ª—è—Ö –≥—Ä—É–ø–ø—ã "–†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å" –Ω–∞–π–¥–∏—Ç–µ –º–∞—Ä—à—Ä—É—Ç **"–ï–Ω–∞–∫–∏–µ–≤–æ ‚Üí –†–æ—Å—Ç–æ–≤"**
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É **‚úèÔ∏è** (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
3. –í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—É—é —Ü–µ–Ω—É **12000**
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- –ú–∞—Ä—à—Ä—É—Ç –ø–æ–ª—É—á–∏—Ç —Ñ–ª–∞–≥–∏: `customPrice=true`, `useGroupPrice=false`
- –í —Å–ø–∏—Å–∫–µ –ø–æ—è–≤–∏—Ç—Å—è –æ—Ä–∞–Ω–∂–µ–≤—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏ —Ç–µ–∫—Å—Ç "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞"
- –ü–æ—è–≤–∏—Ç—Å—è –∫–Ω–æ–ø–∫–∞ **üîÑ** (—Å–±—Ä–æ—Å) –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –≥—Ä—É–ø–ø–æ–≤–æ–π —Ü–µ–Ω–µ

---

### **–®–∞–≥ 5: –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π #3 - –°–±—Ä–æ—Å –∫ –≥—Ä—É–ø–ø–æ–≤–æ–π —Ü–µ–Ω–µ**

**–¶–µ–ª—å**: –í–µ—Ä–Ω—É—Ç—å –º–∞—Ä—à—Ä—É—Ç "–ï–Ω–∞–∫–∏–µ–≤–æ ‚Üí –†–æ—Å—Ç–æ–≤" –∫ –≥—Ä—É–ø–ø–æ–≤–æ–π —Ü–µ–Ω–µ

1. –ù–∞–π–¥–∏—Ç–µ –º–∞—Ä—à—Ä—É—Ç **"–ï–Ω–∞–∫–∏–µ–≤–æ ‚Üí –†–æ—Å—Ç–æ–≤"** —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É **üîÑ** (—Å–±—Ä–æ—Å)
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- –ú–∞—Ä—à—Ä—É—Ç –ø–æ–ª—É—á–∏—Ç —Ñ–ª–∞–≥–∏: `customPrice=false`, `useGroupPrice=true`
- –¶–µ–Ω–∞ –≤–µ—Ä–Ω–µ—Ç—Å—è –∫ –±–∞–∑–æ–≤–æ–π —Ü–µ–Ω–µ –≥—Ä—É–ø–ø—ã (9000‚ÇΩ)
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω–∞ —Å–∏–Ω–∏–π üîó "–ì—Ä—É–ø–ø–æ–≤–∞—è —Ü–µ–Ω–∞"

---

### **–®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ Firebase —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**

**–ï—Å–ª–∏ Firebase –≤–∫–ª—é—á–µ–Ω:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ Firebase Console ‚Üí Firestore Database
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏:
   - `route_groups` - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å 9 –≥—Ä—É–ø–ø
   - `routes` - –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–ª—è–º–∏ `groupId`, `useGroupPrice`, `customPrice`, `isReverse`

3. –ò–∑–º–µ–Ω–∏—Ç–µ —Ü–µ–Ω—É —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–∏–ª–∏—Å—å –≤ Firebase

---

## üîß –û–°–¢–ê–í–®–ò–ï–°–Ø –ó–ê–î–ê–ß–ò

### **–ó–∞–¥–∞—á–∞ #1: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤** ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û

**–§–∞–π–ª**: `lib/data/route_initializer.dart`

**–ü—Ä–æ–±–ª–µ–º–∞**: –°—É—â–µ—Å—Ç–≤—É–µ—Ç ~70 –º–∞—Ä—à—Ä—É—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä `PredefinedRoute()` –±–µ–∑ `groupId`.

**–†–µ—à–µ–Ω–∏–µ**: –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ –≤—ã–∑–æ–≤—ã –Ω–∞ helper-–º–µ—Ç–æ–¥—ã:

```dart
// –ë–´–õ–û (—Å—Ç–∞—Ä–æ–µ):
PredefinedRoute(
  id: '',
  fromCity: '–î–æ–Ω–µ—Ü–∫',
  toCity: '–†–æ—Å—Ç–æ–≤',
  price: 8000,
  createdAt: now,
  updatedAt: now,
)

// –°–¢–ê–õ–û (–Ω–æ–≤–æ–µ):
_createRoute('–î–æ–Ω–µ—Ü–∫', '–†–æ—Å—Ç–æ–≤', 8000, 'rostov_region', now)

// –î–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π —Å –æ—Å–æ–±–æ–π —Ü–µ–Ω–æ–π:
_createRouteWithCustomPrice('–ï–Ω–∞–∫–∏–µ–≤–æ', '–†–æ—Å—Ç–æ–≤', 12000, 'rostov_region', now)
```

**–ö–∞–∫ –Ω–∞–∑–Ω–∞—á–∏—Ç—å groupId**:
- –°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ `toCity` (–≥–æ—Ä–æ–¥ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è)
- –ï—Å–ª–∏ `toCity` –≤ —Å–ø–∏—Å–∫–µ destinationCities –∫–∞–∫–æ–π-—Ç–æ –≥—Ä—É–ø–ø—ã ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ—ë `id`
- –ü—Ä–∏–º–µ—Ä—ã:
  - `toCity = '–†–æ—Å—Ç–æ–≤'` ‚Üí `groupId = 'rostov_region'`
  - `toCity = '–°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å'` ‚Üí `groupId = 'crimea'`
  - `toCity = '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä'` ‚Üí `groupId = 'krasnodar'`

**–°—Ç–∞—Ç—É—Å**: Helper-–º–µ—Ç–æ–¥—ã —Å–æ–∑–¥–∞–Ω—ã, –Ω–æ –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫ –º–∞—Ä—à—Ä—É—Ç–∞–º (–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è "unused" –Ω–æ—Ä–º–∞–ª—å–Ω—ã).

---

### **–ó–∞–¥–∞—á–∞ #2: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

**–î–æ–±–∞–≤—å—Ç–µ –≤ `main.dart` –∏–ª–∏ —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏**:

```dart
// –û–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
final prefs = await SharedPreferences.getInstance();
final isGroupsInitialized = prefs.getBool('route_groups_initialized') ?? false;

if (!isGroupsInitialized) {
  await RouteGroupsInitializer.initializeGroups();
  await prefs.setBool('route_groups_initialized', true);
}
```

**–ò–ª–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–±–∞–≤—å—Ç–µ –∫–Ω–æ–ø–∫—É**:

```dart
// –í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
CupertinoButton(
  child: Text('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—ã'),
  onPressed: () async {
    await RouteGroupsInitializer.forceInitializeGroups();
    // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
  },
)
```

---

## üéØ –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨

### **–°–∏—Å—Ç–µ–º–∞ –¥–≤—É—Ö —Ä–µ–∂–∏–º–æ–≤ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è**

#### **–†–µ–∂–∏–º 1: –ì—Ä—É–ø–ø–æ–≤–∞—è —Ü–µ–Ω–∞** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- –§–ª–∞–≥–∏: `useGroupPrice=true`, `customPrice=false`
- –¶–µ–Ω–∞ –±–µ—Ä–µ—Ç—Å—è –∏–∑ `RouteGroup.basePrice`
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≥—Ä—É–ø–ø–æ–≤–æ–π —Ü–µ–Ω—ã ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã —ç—Ç–æ–≥–æ —Ä–µ–∂–∏–º–∞

#### **–†–µ–∂–∏–º 2: –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞** (–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ)
- –§–ª–∞–≥–∏: `useGroupPrice=false`, `customPrice=true`
- –¶–µ–Ω–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `PredefinedRoute.price`
- **–ò–º–º—É–Ω–∏—Ç–µ—Ç**: –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≥—Ä—É–ø–ø–æ–≤–æ–π —Ü–µ–Ω—ã ‚Üí —ç—Ç–∏ –º–∞—Ä—à—Ä—É—Ç—ã –ù–ï –º–µ–Ω—è—é—Ç—Å—è

---

### **–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–±—Ä–∞—Ç–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤**

–ì—Ä—É–ø–ø—ã —Å —Ñ–ª–∞–≥–æ–º `autoGenerateReverse=true`:
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞ "–î–æ–Ω–µ—Ü–∫ ‚Üí –†–æ—Å—Ç–æ–≤" –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è "–†–æ—Å—Ç–æ–≤ ‚Üí –î–æ–Ω–µ—Ü–∫"
- –û–±—Ä–∞—Ç–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç –ø–æ–ª—É—á–∞–µ—Ç —Ñ–ª–∞–≥ `isReverse=true`
- –¶–µ–Ω–∞ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è (–∏–ª–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ)

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:

```dart
final originalRoute = PredefinedRoute(/* ... */);
final reverseRoute = await _routeService.createReverseRoute(originalRoute);
```

---

## üìä –°–¢–†–£–ö–¢–£–†–ê –ë–î

### **Firebase Collection: `route_groups`**

```json
{
  "id": "rostov_region",
  "name": "–†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
  "description": "–ë–ª–∏–∂–∞–π—à–∏–µ –≥–æ—Ä–æ–¥–∞ –†–æ—Å—Ç–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏",
  "basePrice": 8000,
  "originCities": ["–î–æ–Ω–µ—Ü–∫", "–ú–∞–∫–µ–µ–≤–∫–∞", ...],
  "destinationCities": ["–†–æ—Å—Ç–æ–≤", "–¢–∞–≥–∞–Ω—Ä–æ–≥", "–ë–∞—Ç–∞–π—Å–∫", "–ê–∫—Å–∞–π"],
  "autoGenerateReverse": true,
  "createdAt": "2025-01-01T00:00:00Z",
  "updatedAt": "2025-01-01T00:00:00Z"
}
```

### **Firebase Collection: `routes` (—Ä–∞—Å—à–∏—Ä–µ–Ω–æ)**

```json
{
  "id": "route123",
  "fromCity": "–î–æ–Ω–µ—Ü–∫",
  "toCity": "–†–æ—Å—Ç–æ–≤",
  "price": 8000,
  "groupId": "rostov_region",        // –ù–û–í–û–ï
  "useGroupPrice": true,              // –ù–û–í–û–ï
  "customPrice": false,               // –ù–û–í–û–ï
  "isReverse": false,                 // –ù–û–í–û–ï
  "createdAt": "2025-01-01T00:00:00Z",
  "updatedAt": "2025-01-01T00:00:00Z"
}
```

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û**: –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã –≤ `route_initializer.dart`
2. üîß –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≥—Ä—É–ø–ø –≤ `main.dart`
3. üß™ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
4. üì± –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å Firebase (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)
5. üìà –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≥—Ä—É–ø–ø (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üìù –ü–†–ò–ú–ï–ß–ê–ù–ò–Ø

- **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ–± unused –º–µ—Ç–æ–¥–∞—Ö** –≤ `route_initializer.dart` - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –æ–Ω–∏ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- **SQLite + Firebase**: —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º–µ —Å –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π
- **–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: —Å—Ç–∞—Ä—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –±–µ–∑ `groupId` –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –Ω–µ –ø–æ–ª—É—á–∞—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ –≥—Ä—É–ø–ø–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
- **–£–¥–∞–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã**: –º–∞—Ä—à—Ä—É—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è, –Ω–æ —Ç–µ—Ä—è—é—Ç —Å–≤—è–∑—å —Å –≥—Ä—É–ø–ø–æ–π (`groupId` –æ—Å—Ç–∞–µ—Ç—Å—è, –Ω–æ –≥—Ä—É–ø–ø—ã –Ω–µ—Ç)

---

## üéâ –ò–¢–û–ì

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ 95% —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞**. –û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ:
- –ü—Ä–∏–º–µ–Ω–∏—Ç—å helper-–º–µ—Ç–æ–¥—ã –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –º–∞—Ä—à—Ä—É—Ç–∞–º (–º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞)
- –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤ `main.dart` (3 —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞)

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!** üöÄ

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 2025
**–ó–∞—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è**: ~6 —á–∞—Å–æ–≤
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~1500+
**–§–∞–π–ª–æ–≤ —Å–æ–∑–¥–∞–Ω–æ/–∏–∑–º–µ–Ω–µ–Ω–æ**: 10
