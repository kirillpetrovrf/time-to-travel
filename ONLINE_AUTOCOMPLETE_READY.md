# ‚úÖ –û–Ω–ª–∞–π–Ω –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Yandex Geocoder API

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### üåê –û–Ω–ª–∞–π–Ω –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∞–¥—Ä–µ—Å–æ–≤
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **Yandex Geocoder HTTP API**
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç –∞–¥—Ä–µ—Å–∞ **–≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤ –†–æ—Å—Å–∏–∏**
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç **–≤—Å–µ —É–ª–∏—Ü—ã** –≤ –≥–æ—Ä–æ–¥–∞—Ö
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç **–Ω–æ–º–µ—Ä–∞ –¥–æ–º–æ–≤**
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### üìç API Endpoint
```
https://geocode-maps.yandex.ru/1.x/
```

### üîë API –ö–ª—é—á
```
2f1d6a75-b751-4077-b305-c6abaea0b542
```

**–°—Ç–∞—Ç—É—Å**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ. –ï—Å–ª–∏ –≤–µ—Ä–Ω–µ—Ç 403 - –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª—é—á –¥–ª—è Geocoder.

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç
```
–í–≤–æ–¥: "–ø–µ—Ä–º—å –ª–µ–Ω"
```

### 2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –∫ Yandex Geocoder
```dart
final url = 'https://geocode-maps.yandex.ru/1.x/'
    '?apikey=2f1d6a75-b751-4077-b305-c6abaea0b542'
    '&geocode=–ø–µ—Ä–º—å+–ª–µ–Ω'
    '&format=json'
    '&results=10'
    '&kind=house'
    '&lang=ru_RU';
```

### 3. API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–µ –∞–¥—Ä–µ—Å–∞
```json
{
  "response": {
    "GeoObjectCollection": {
      "featureMember": [
        {
          "GeoObject": {
            "metaDataProperty": {
              "GeocoderMetaData": {
                "Address": {
                  "formatted": "–†–æ—Å—Å–∏—è, –ü–µ—Ä–º—Å–∫–∏–π –∫—Ä–∞–π, –ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 10"
                }
              }
            }
          }
        }
      ]
    }
  }
}
```

### 4. –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ–¥—Å–∫–∞–∑–∫–∏
```
‚úÖ –ù–∞–π–¥–µ–Ω–æ 10 –ø–æ–¥—Å–∫–∞–∑–æ–∫:
   1. –†–æ—Å—Å–∏—è, –ü–µ—Ä–º—Å–∫–∏–π –∫—Ä–∞–π, –ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 10
   2. –†–æ—Å—Å–∏—è, –ü–µ—Ä–º—Å–∫–∏–π –∫—Ä–∞–π, –ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 20
   3. –†–æ—Å—Å–∏—è, –ü–µ—Ä–º—Å–∫–∏–π –∫—Ä–∞–π, –ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 50
```

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã API

### `kind` - –¢–∏–ø –æ–±—ä–µ–∫—Ç–∞
- `house` - –¥–æ–º–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç —É–ª–∏—Ü—ã –∏ –≥–æ—Ä–æ–¥–∞)
- `street` - —Ç–æ–ª—å–∫–æ —É–ª–∏—Ü—ã
- `locality` - —Ç–æ–ª—å–∫–æ –Ω–∞—Å–µ–ª–µ–Ω–Ω—ã–µ –ø—É–Ω–∫—Ç—ã
- `province` - –æ–±–ª–∞—Å—Ç–∏ –∏ –∫—Ä–∞—è

**–¢–µ–∫—É—â–∏–π**: `kind=house` (–ø–æ–ª—É—á–∞–µ–º –≤—Å–µ —Ç–∏–ø—ã –∞–¥—Ä–µ—Å–æ–≤)

### `results` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ú–∞–∫—Å–∏–º—É–º: `results=10`
- –ú–∏–Ω–∏–º—É–º: `results=1`

**–¢–µ–∫—É—â–∏–π**: `results=10`

### `lang` - –Ø–∑—ã–∫ –æ—Ç–≤–µ—Ç–∞
- `ru_RU` - –†—É—Å—Å–∫–∏–π
- `en_US` - –ê–Ω–≥–ª–∏–π—Å–∫–∏–π
- `tr_TR` - –¢—É—Ä–µ—Ü–∫–∏–π

**–¢–µ–∫—É—â–∏–π**: `lang=ru_RU`

## –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–∏—Å–∫ –ø–æ –≥–æ—Ä–æ–¥—É
```
–í–≤–æ–¥: "–∫—É–Ω–≥—É—Ä"
–†–µ–∑—É–ª—å—Ç–∞—Ç:
  - –†–æ—Å—Å–∏—è, –ü–µ—Ä–º—Å–∫–∏–π –∫—Ä–∞–π, –ö—É–Ω–≥—É—Ä
  - –†–æ—Å—Å–∏—è, –ü–µ—Ä–º—Å–∫–∏–π –∫—Ä–∞–π, –ö—É–Ω–≥—É—Ä, —É–ª–∏—Ü–∞ –ì–æ–≥–æ–ª—è
  - –†–æ—Å—Å–∏—è, –ü–µ—Ä–º—Å–∫–∏–π –∫—Ä–∞–π, –ö—É–Ω–≥—É—Ä, —É–ª–∏—Ü–∞ –°–æ–≤–µ—Ç—Å–∫–∞—è
```

### –ü—Ä–∏–º–µ—Ä 2: –ü–æ–∏—Å–∫ –ø–æ —É–ª–∏—Ü–µ
```
–í–≤–æ–¥: "–º–æ—Å–∫–≤–∞ —Ç–≤–µ—Ä—Å–∫–∞—è"
–†–µ–∑—É–ª—å—Ç–∞—Ç:
  - –†–æ—Å—Å–∏—è, –ú–æ—Å–∫–≤–∞, —É–ª–∏—Ü–∞ –¢–≤–µ—Ä—Å–∫–∞—è
  - –†–æ—Å—Å–∏—è, –ú–æ—Å–∫–≤–∞, —É–ª–∏—Ü–∞ –¢–≤–µ—Ä—Å–∫–∞—è, 1
  - –†–æ—Å—Å–∏—è, –ú–æ—Å–∫–≤–∞, —É–ª–∏—Ü–∞ –¢–≤–µ—Ä—Å–∫–∞—è, 10
  - –†–æ—Å—Å–∏—è, –ú–æ—Å–∫–≤–∞, —É–ª–∏—Ü–∞ –¢–≤–µ—Ä—Å–∫–∞—è, 20
```

### –ü—Ä–∏–º–µ—Ä 3: –ü–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É –¥–æ–º–∞
```
–í–≤–æ–¥: "–ø–µ—Ä–º—å –ª–µ–Ω–∏–Ω–∞ 86"
–†–µ–∑—É–ª—å—Ç–∞—Ç:
  - –†–æ—Å—Å–∏—è, –ü–µ—Ä–º—Å–∫–∏–π –∫—Ä–∞–π, –ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 86
```

## –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—É–¥—É—Ç —Ç–∞–∫–∏–µ –ª–æ–≥–∏:

```
I/flutter: üí° [YANDEX GEOCODER] –ü–æ–∏—Å–∫ –ø–æ–¥—Å–∫–∞–∑–æ–∫ –¥–ª—è: "–∫—É–Ω–≥—É—Ä"
I/flutter: üåê [YANDEX GEOCODER] URL: https://geocode-maps.yandex.ru/1.x/?apikey=HIDDEN&geocode=...
I/flutter: üì° [YANDEX GEOCODER] Status: 200
I/flutter: ‚úÖ [YANDEX GEOCODER] –ù–∞–π–¥–µ–Ω–æ 5 –ø–æ–¥—Å–∫–∞–∑–æ–∫
I/flutter: üìù [YANDEX GEOCODER] –ü—Ä–∏–º–µ—Ä—ã:
I/flutter:    1. –†–æ—Å—Å–∏—è, –ü–µ—Ä–º—Å–∫–∏–π –∫—Ä–∞–π, –ö—É–Ω–≥—É—Ä
I/flutter:    2. –†–æ—Å—Å–∏—è, –ü–µ—Ä–º—Å–∫–∏–π –∫—Ä–∞–π, –ö—É–Ω–≥—É—Ä, —É–ª–∏—Ü–∞ –ì–æ–≥–æ–ª—è
I/flutter:    3. –†–æ—Å—Å–∏—è, –ü–µ—Ä–º—Å–∫–∏–π –∫—Ä–∞–π, –ö—É–Ω–≥—É—Ä, —É–ª–∏—Ü–∞ –°–æ–≤–µ—Ç—Å–∫–∞—è
```

### –ï—Å–ª–∏ API –∫–ª—é—á –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
```
I/flutter: ‚ùå [YANDEX GEOCODER] 403 Forbidden - API –∫–ª—é—á –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–∞–≤
I/flutter: üí° –†–µ—à–µ–Ω–∏–µ: –ü–æ–ª—É—á–∏—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π API –∫–ª—é—á –¥–ª—è Geocoder –Ω–∞ https://developer.tech.yandex.ru/
```

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ 403 –æ—à–∏–±–∫–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–π API –∫–ª—é—á

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://developer.tech.yandex.ru/
2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
4. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á –¥–ª—è **Geocoder API** (–Ω–µ MapKit!)
5. –ó–∞–º–µ–Ω–∏—Ç–µ –∫–ª—é—á –≤ –∫–æ–¥–µ:

```dart
const apiKey = '–ù–û–í–´–ô_API_–ö–õ–Æ–ß_–î–õ–Ø_GEOCODER';
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –≥–µ–æ–∫–æ–¥–µ—Ä

#### Google Places API
```yaml
dependencies:
  google_maps_places_autocomplete: ^latest
```

#### 2GIS API (—Ö–æ—Ä–æ—à –¥–ª—è –†–æ—Å—Å–∏–∏)
```dart
final url = 'https://catalog.api.2gis.com/3.0/suggests'
    '?key=YOUR_2GIS_KEY'
    '&q=$query';
```

#### OpenStreetMap Nominatim (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π)
```dart
final url = 'https://nominatim.openstreetmap.org/search'
    '?q=$query'
    '&format=json'
    '&addressdetails=1'
    '&limit=10';
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫
1. –û—Ç–∫—Ä–æ–π—Ç–µ —ç–∫—Ä–∞–Ω "–°–≤–æ–±–æ–¥–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç"
2. –í–≤–µ–¥–∏—Ç–µ "–ø–µ—Ä–º—å" –≤ –ø–æ–ª–µ "–û—Ç–∫—É–¥–∞"
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ—è–≤—è—Ç—Å—è –ø–æ–¥—Å–∫–∞–∑–∫–∏ —Å –∞–¥—Ä–µ—Å–∞–º–∏ –ü–µ—Ä–º–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–∏—Å–∫ —Å –Ω–æ–º–µ—Ä–æ–º –¥–æ–º–∞
1. –í–≤–µ–¥–∏—Ç–µ "–º–æ—Å–∫–≤–∞ —Ç–≤–µ—Ä—Å–∫–∞—è 10"
2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: "–†–æ—Å—Å–∏—è, –ú–æ—Å–∫–≤–∞, —É–ª–∏—Ü–∞ –¢–≤–µ—Ä—Å–∫–∞—è, 10"

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –†–∞—Å—á–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∞
1. –ü–æ–ª–µ "–û—Ç–∫—É–¥–∞": "–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞"
2. –ü–æ–ª–µ "–ö—É–¥–∞": "–ö—É–Ω–≥—É—Ä"
3. –ù–∞–∂–º–∏—Ç–µ "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å"
4. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–∞—Ä—à—Ä—É—Ç ~90 –∫–º, —Å—Ç–æ–∏–º–æ—Å—Ç—å ~2000‚ÇΩ

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –æ–Ω–ª–∞–π–Ω —Ä–µ—à–µ–Ω–∏—è

‚úÖ **–ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**: –í—Å–µ –≥–æ—Ä–æ–¥–∞, —É–ª–∏—Ü—ã –∏ –¥–æ–º–∞ –†–æ—Å—Å–∏–∏  
‚úÖ **–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å**: –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –Ø–Ω–¥–µ–∫—Å–æ–º  
‚úÖ **–¢–æ—á–Ω–æ—Å—Ç—å**: –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ –∏–∑ –±–∞–∑—ã –Ø–Ω–¥–µ–∫—Å–∞  
‚úÖ **–£–¥–æ–±—Å—Ç–≤–æ**: –ù–µ –Ω—É–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ª—é–±–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞

## –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

‚ö†Ô∏è **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Å–µ—Ç–∏**: –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç offline  
‚ö†Ô∏è **–õ–∏–º–∏—Ç—ã API**: –í–æ–∑–º–æ–∂–Ω—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∑–∞–ø—Ä–æ—Å–æ–≤  
‚ö†Ô∏è **API –∫–ª—é—á**: –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª—é—á –¥–ª—è Geocoder  

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```dart
final Map<String, List<String>> _cache = {};

Future<List<String>> getSuggestions(String query) async {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–µ—à
  if (_cache.containsKey(query)) {
    print('üì¶ [CACHE] –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ');
    return _cache[query]!;
  }
  
  // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —É API
  final suggestions = await _fetchFromAPI(query);
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–µ—à
  _cache[query] = suggestions;
  
  return suggestions;
}
```

### Debounce (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω)
```dart
// –í AddressAutocompleteField
_debounceTimer = Timer(const Duration(milliseconds: 500), () {
  _fetchSuggestions(text);
});
```

## –°—Ç–∞—Ç—É—Å

‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**: –û–Ω–ª–∞–π–Ω –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Geocoder API  
‚è≥ **–¢–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã API –∫–ª—é—á–∞  
üìù **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ**: –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≥–æ—Ç–æ–≤–∞

---

**–î–∞—Ç–∞**: 21 –æ–∫—Ç—è–±—Ä—è 2025 –≥.  
**–í–µ—Ä—Å–∏—è**: –û–Ω–ª–∞–π–Ω (Geocoder API)  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
