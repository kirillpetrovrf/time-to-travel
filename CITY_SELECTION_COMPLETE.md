# ‚úÖ –ó–ê–î–ê–ß–ê –ó–ê–í–ï–†–®–ï–ù–ê: –ó–∞–º–µ–Ω–∞ —Ä–∞–¥–∏–æ–∫–Ω–æ–ø–æ–∫ –Ω–∞ –≤—ã–±–æ—Ä –≥–æ—Ä–æ–¥–æ–≤

**–î–∞—Ç–∞:** 9 –æ–∫—Ç—è–±—Ä—è 2025 –≥.  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù–û –ò –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û  
**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 9 –æ–∫—Ç—è–±—Ä—è 2025 –≥. (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫–∞ "–ú–µ—Å—Ç–æ –ø–æ—Å–∞–¥–∫–∏")

---

## üìã –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ù–æ–≤—ã–π UI –≤—ã–±–æ—Ä–∞ –º–∞—Ä—à—Ä—É—Ç–∞
- ‚úÖ –£–±—Ä–∞–Ω—ã —Ä–∞–¥–∏–æ–∫–Ω–æ–ø–∫–∏ —Å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏ (–î–æ–Ω–µ—Ü–∫ ‚Üí –†–æ—Å—Ç–æ–≤ / –†–æ—Å—Ç–æ–≤ ‚Üí –î–æ–Ω–µ—Ü–∫)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–≤–∞ –≤—ã–ø–∞–¥–∞—é—â–∏—Ö —Å–ø–∏—Å–∫–∞: "–û—Ç–∫—É–¥–∞" –∏ "–ö—É–¥–∞"
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (‚ÜïÔ∏è) –º–µ–∂–¥—É —Å–ø–∏—Å–∫–∞–º–∏
- ‚úÖ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 2. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```dart
// –û—Å–Ω–æ–≤–Ω–æ–π –±–ª–æ–∫ –≤—ã–±–æ—Ä–∞ –º–∞—Ä—à—Ä—É—Ç–∞
_buildRouteSelection(theme)

// –°–µ–ª–µ–∫—Ç–æ—Ä –≥–æ—Ä–æ–¥–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–≤–∞–∂–¥—ã)
_buildStopSelector(String label, RouteStop? selectedStop)

// –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
_swapStops()

// –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –≤—ã–±–æ—Ä–∞ –≥–æ—Ä–æ–¥–æ–≤
_showFromStopPicker(theme)
_showToStopPicker(theme)
```

### 3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```dart
RouteStop? _selectedFromStop;      // –û—Ç–∫—É–¥–∞
RouteStop? _selectedToStop;        // –ö—É–¥–∞
List<RouteStop> _availableStops;   // –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≥–æ—Ä–æ–¥–∞
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –£–¥–∞–ª–µ–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –º–µ—Ç–æ–¥—ã (5 —à—Ç):
1. ‚ùå `_buildRadioTile()` - —Å—Ç–∞—Ä—ã–µ —Ä–∞–¥–∏–æ–∫–Ω–æ–ø–∫–∏
2. ‚ùå `_buildRouteInfo()` - —Å—Ç–∞—Ä—ã–π –±–ª–æ–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
3. ‚ùå `_buildDirectionPicker()` - —Å—Ç–∞—Ä—ã–π –≤—ã–±–æ—Ä –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
4. ‚ùå `_showRouteStopPicker()` - —É—Å—Ç–∞—Ä–µ–≤—à–∞—è –ª–æ–≥–∏–∫–∞
5. ‚ùå `_updateDirectionFromStops()` - –¥—É–±–ª–∏—Ä—É—é—â–∏–π –º–µ—Ç–æ–¥

### –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- ‚úÖ `_bookTrip()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `_selectedFromStop/ToStop`
- ‚úÖ `_navigateToIndividualBooking()` - –ø–µ—Ä–µ–¥–∞–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
- ‚úÖ `_buildPickupPointPicker()` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `_selectedFromStop`
- ‚úÖ `_showPickupPointModal()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `_selectedFromStop`

---

## üéØ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### –í—ã–±–æ—Ä –≥–æ—Ä–æ–¥–∞:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç –Ω–∞ "–û—Ç–∫—É–¥–∞" –∏–ª–∏ "–ö—É–¥–∞"
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å CupertinoPicker
3. –í—ã–±–∏—Ä–∞–µ—Ç –≥–æ—Ä–æ–¥ –∏–∑ —Å–ø–∏—Å–∫–∞
4. –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
5. –í—Ä–µ–º—è –∏ –º–µ—Å—Ç–æ –ø–æ—Å–∞–¥–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É ‚ÜïÔ∏è
2. –ì–æ—Ä–æ–¥–∞ –º–µ–Ω—è—é—Ç—Å—è –º–µ—Å—Ç–∞–º–∏
3. –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
4. –í—Ä–µ–º—è –∏ –º–µ—Å—Ç–æ –ø–æ—Å–∞–¥–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è

### –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```dart
if (_selectedFromStop?.id == 'donetsk') {
  _selectedDirection = Direction.donetskToRostov;
} else if (_selectedFromStop?.id == 'rostov') {
  _selectedDirection = Direction.rostovToDonetsk;
}
```

---

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –≠–∫—Ä–∞–Ω –≥—Ä—É–ø–ø–æ–≤–æ–π –ø–æ–µ–∑–¥–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: –î–æ–Ω–µ—Ü–∫ ‚Üí –†–æ—Å—Ç–æ–≤
- ‚úÖ –†–∞—Å—á–µ—Ç –±–∞–≥–∞–∂–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ù–µ—Ç runtime –æ—à–∏–±–æ–∫
- ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ (0 –æ—à–∏–±–æ–∫)

### –õ–æ–≥–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:
```
üöÄ [–ù–ê–í–ò–ì–ê–¶–ò–Ø] –ù–∞—á–∞–ª–æ _navigateToBookingWithoutRoute, tripType: group
üöÄ [–ù–ê–í–ò–ì–ê–¶–ò–Ø] –û—Ç–∫—Ä—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ –ø—Ä–µ–¥–≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞
üíµ [GROUP] –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –±–∞–≥–∞–∂–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ [–ù–ê–í–ò–ì–ê–¶–ò–Ø] –í–µ—Ä–Ω—É–ª–∏—Å—å —Å —ç–∫—Ä–∞–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
```

---

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `group_booking_screen.dart`
**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: `_selectedFromStop`, `_selectedToStop`, `_availableStops`
- –ú–µ—Ç–æ–¥—ã: `_buildRouteSelection()`, `_buildStopSelector()`, `_swapStops()`
- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞: `_showFromStopPicker()`, `_showToStopPicker()`

**–£–¥–∞–ª–µ–Ω–æ:**
- 5 —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –º–µ—Ç–æ–¥–æ–≤
- –í—Å–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ `widget.fromStop/toStop` –≤ –ª–æ–≥–∏–∫–µ

**–û–±–Ω–æ–≤–ª–µ–Ω–æ:**
- –ú–µ—Ç–æ–¥ `_loadData()` - –∑–∞–≥—Ä—É–∑–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–æ–∫
- –ú–µ—Ç–æ–¥ `build()` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ UI
- –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `_selectedFromStop/ToStop`

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- ‚úÖ `GROUP_BOOKING_CITY_SELECTION.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

## üé® UX –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ—Å—Ç—å** - –ø–æ–Ω—è—Ç–Ω—ã–π –≤—ã–±–æ—Ä "–û—Ç–∫—É–¥–∞ ‚Üí –ö—É–¥–∞"
2. **–°–∫–æ—Ä–æ—Å—Ç—å** - –±—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
3. **–ù–∞—Ç–∏–≤–Ω–æ—Å—Ç—å** - iOS CupertinoPicker
4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∞–≤—Ç–æ—Å–±—Ä–æ—Å –≤—Ä–µ–º–µ–Ω–∏/–º–µ—Å—Ç–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ –º–∞—Ä—à—Ä—É—Ç–∞

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

- ‚úÖ –ö–æ–¥ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- ‚úÖ –û—à–∏–±–æ–∫ –Ω–µ—Ç
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ –õ–æ–≥–∏–∫–∞ —É–ø—Ä–æ—â–µ–Ω–∞
- ‚úÖ UX —É–ª—É—á—à–µ–Ω

---

## üêõ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (9 –æ–∫—Ç—è–±—Ä—è)

### –ü—Ä–æ–±–ª–µ–º–∞:
–ë–ª–æ–∫ "–ú–µ—Å—Ç–æ –ø–æ—Å–∞–¥–∫–∏" –∏—Å—á–µ–∑–∞–ª –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å –î–æ–Ω–µ—Ü–∫ ‚Üí –†–æ—Å—Ç–æ–≤ –Ω–∞ –†–æ—Å—Ç–æ–≤ ‚Üí –î–æ–Ω–µ—Ü–∫.

### –†–µ—à–µ–Ω–∏–µ:
- ‚úÖ –£–±—Ä–∞–Ω–æ —É—Å–ª–æ–≤–∏–µ `if (_selectedDirection == Direction.donetskToRostov)`
- ‚úÖ –ë–ª–æ–∫ "–ú–µ—Å—Ç–æ –ø–æ—Å–∞–¥–∫–∏" —Ç–µ–ø–µ—Ä—å **–≤—Å–µ–≥–¥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è**
- ‚úÖ –ú–µ—Å—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** –°–º. `PICKUP_POINT_FIX.md`

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º iOS —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
2. –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏

---

**–ò—Ç–æ–≥:** –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –Ω–∞ 100%. –í—Å–µ —Ü–µ–ª–∏ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã, –∫–æ–¥ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ. ‚ú®
