# –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –ó–ê–î–ê–ù–ò–ï
## –î–æ—Ä–∞–±–æ—Ç–∫–∞ Custom Route Booking Modal (–°–≤–æ–±–æ–¥–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç)

**–î–∞—Ç–∞:** 30 –Ω–æ—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** –ù–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π

---

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï

1. [–û–±–∑–æ—Ä –ø—Ä–æ–±–ª–µ–º](#–æ–±–∑–æ—Ä-–ø—Ä–æ–±–ª–µ–º)
2. [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ –¥–æ—Ä–∞–±–æ—Ç–∫–µ](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è-–ø–æ-–¥–æ—Ä–∞–±–æ—Ç–∫–µ)
3. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏](#—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ-–¥–µ—Ç–∞–ª–∏)
4. [–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#–ø–ª–∞–Ω-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
5. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## üîç –û–ë–ó–û–† –ü–†–û–ë–õ–ï–ú

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ (`custom_route_booking_modal.dart`) –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. ‚ùå **–õ–∏—à–Ω—è—è –∫–Ω–æ–ø–∫–∞ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å"** –Ω–∞ —à–∞–≥–∞—Ö 4-8
2. ‚ùå **–ó–∞–≥–æ–ª–æ–≤–∫–∏ –Ω–µ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã** (–ø—Ä–∏–∂–∞—Ç—ã –∫ –ª–µ–≤–æ–º—É –∫—Ä–∞—é)
3. ‚ùå **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã** —É –±–ª–æ–∫–æ–≤ (—Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ –∫ –∫—Ä–∞—è–º)
4. ‚ùå **–ù–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ü–µ–Ω–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞** –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –∫–ª–∞—Å—Å–∞
5. ‚ùå **–ù–µ–ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è** (–Ω–µ—Ç –¥–µ—Ç–µ–π, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞, —Ü–µ–Ω)
6. ‚ùå **–õ–∏—à–Ω–∏–π –¥–∏–∞–ª–æ–≥ "–ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω"** –ø–æ—Å–ª–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
7. ‚ùå **–ù–µ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –∑–∞–∫–∞–∑** (–¥–µ—Ç–∏, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç, –∂–∏–≤–æ—Ç–Ω—ã–µ)

---

## ‚úÖ –¢–†–ï–ë–û–í–ê–ù–ò–Ø –ü–û –î–û–†–ê–ë–û–¢–ö–ï

### 1. –£–¥–∞–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å"

**–§–∞–π–ª:** `lib/widgets/custom_route_booking_modal.dart`

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
- –£–¥–∞–ª–∏—Ç—å –º–µ—Ç–æ–¥ `_skipStep()` (—Å—Ç—Ä–æ–∫–∞ 86-88)
- –£–¥–∞–ª–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `canSkip` (—Å—Ç—Ä–æ–∫–∞ 1234)
- –£–¥–∞–ª–∏—Ç—å —É—Å–ª–æ–≤–Ω—ã–π –±–ª–æ–∫ —Å –∫–Ω–æ–ø–∫–æ–π "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å" (—Å—Ç—Ä–æ–∫–∏ 1263-1279)

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
–í—Å–µ —à–∞–≥–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è, –∫–Ω–æ–ø–∫–∞ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å" –≤–≤–æ–¥–∏—Ç –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ.

---

### 2. –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏ –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–æ–≤

**–§–∞–π–ª:** `lib/widgets/custom_route_booking_modal.dart`

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
–î–ª—è –≤—Å–µ—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —à–∞–≥–æ–≤ –¥–æ–±–∞–≤–∏—Ç—å:
```dart
// –ë–´–õ–û:
Text(
  '–ó–∞–≥–æ–ª–æ–≤–æ–∫',
  style: TextStyle(...),
)

// –°–¢–ê–õ–û:
Text(
  '–ó–∞–≥–æ–ª–æ–≤–æ–∫',
  textAlign: TextAlign.center,
  style: TextStyle(...),
)
```

**–ì–¥–µ –ø—Ä–∏–º–µ–Ω–∏—Ç—å:**
- –®–∞–≥ 1: "–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –ø–æ–µ–∑–¥–∫–∏"
- –®–∞–≥ 2: "–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
- –®–∞–≥ 3: "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤"
- –®–∞–≥ 4: "–î–µ—Ç–∏" / "–î–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–µ–π"
- –®–∞–≥ 5: "–ë–∞–≥–∞–∂"
- –®–∞–≥ 6: "–ñ–∏–≤–æ—Ç–Ω—ã–µ"
- –®–∞–≥ 7: "–í–∏–¥ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞"
- –®–∞–≥ 8: "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∑–∞–∫–∞–∑—É"
- –®–∞–≥ 9: "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞"

---

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç—Å—Ç—É–ø–æ–≤ —É –±–ª–æ–∫–æ–≤

**–§–∞–π–ª:** `lib/widgets/custom_route_booking_modal.dart`

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
–ü—Ä–∏–º–µ–Ω–∏—Ç—å –æ—Ç—Å—Ç—É–ø—ã –∫–∞–∫ –≤ `individual_booking_screen.dart`:

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã:**
```dart
// –û—Å–Ω–æ–≤–Ω—ã–µ –±–ª–æ–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
padding: const EdgeInsets.all(16)

// –ë–ª–æ–∫–∏ —Å –≤—ã–±–æ—Ä–æ–º –æ–ø—Ü–∏–π
padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 12)

// –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Å–µ–∫—Ü–∏–π
padding: const EdgeInsets.only(bottom: 12)
```

**–ì–¥–µ –ø—Ä–∏–º–µ–Ω–∏—Ç—å:**
- –ö–∞–∂–¥—ã–π —à–∞–≥ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å `Padding` —Å `EdgeInsets.all(16)` –≤–æ–∫—Ä—É–≥ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ë–ª–æ–∫–∏ –≤—ã–±–æ—Ä–∞ (–¥–∞—Ç–∞, –≤—Ä–µ–º—è, –ø–∞—Å—Å–∞–∂–∏—Ä—ã) - `EdgeInsets.symmetric(horizontal: 16, vertical: 12)`
- –ú–µ–∂–¥—É –±–ª–æ–∫–∞–º–∏ –¥–æ–±–∞–≤–∏—Ç—å `SizedBox(height: 24)`

---

### 4. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ü–µ–Ω—ã –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞

**–§–∞–π–ª 1:** `lib/widgets/custom_route_booking_modal.dart`

**–î–æ–±–∞–≤–∏—Ç—å –≤ state:**
```dart
double? _vehicleExtraPrice; // –î–æ–ø–ª–∞—Ç–∞ –∑–∞ –∫–ª–∞—Å—Å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
```

**–§–∞–π–ª 2:** `lib/features/booking/screens/vehicle_selection_screen.dart`

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –î–æ–±–∞–≤–∏—Ç—å —Ü–µ–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Å–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –≤ `VehicleClass` enum:
```dart
enum VehicleClass {
  sedan(name: '–°–µ–¥–∞–Ω', extraPrice: 0),
  wagon(name: '–£–Ω–∏–≤–µ—Ä—Å–∞–ª', extraPrice: 500),
  minivan(name: '–ú–∏–Ω–∏–≤—ç–Ω', extraPrice: 1500),
  microbus(name: '–ú–∏–∫—Ä–æ–∞–≤—Ç–æ–±—É—Å', extraPrice: 3000);
  
  final String name;
  final double extraPrice;
  const VehicleClass({required this.name, required this.extraPrice});
}
```

2. –í `custom_route_booking_modal.dart` –æ–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —à–∞–≥–µ 7:
```dart
// –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –∫–ª–∞—Å—Å–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å
if (_selectedVehicleClass != null)
  Text(
    '–î–æ–ø–ª–∞—Ç–∞: ${_selectedVehicleClass!.extraPrice.toInt()}‚ÇΩ',
    style: TextStyle(
      color: theme.systemGreen,
      fontSize: 16,
      fontWeight: FontWeight.w600,
    ),
  )
```

3. –û–±–Ω–æ–≤–∏—Ç—å `_calculateTotalPrice()`:
```dart
// –î–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–ª–∞—Ç—É –∑–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç
if (_selectedVehicleClass != null) {
  total += _selectedVehicleClass!.extraPrice;
}
```

---

### 5. –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

**–§–∞–π–ª:** `lib/widgets/custom_route_booking_modal.dart`  
**–ú–µ—Ç–æ–¥:** `_buildConfirmationStep()`

**–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å:**

```dart
Widget _buildConfirmationStep() {
  final theme = context.themeManager.currentTheme;
  
  return SingleChildScrollView(
    padding: const EdgeInsets.all(16),
    child: Column(
      crossAxisAlignment: CrossAxisAlignment.center,
      children: [
        // –ó–∞–≥–æ–ª–æ–≤–æ–∫
        Text(
          '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞',
          textAlign: TextAlign.center,
          style: TextStyle(
            fontSize: 24,
            fontWeight: FontWeight.bold,
            color: theme.label,
          ),
        ),
        const SizedBox(height: 24),
        
        // –ú–∞—Ä—à—Ä—É—Ç
        _buildSummarySection(
          '–ú–∞—Ä—à—Ä—É—Ç',
          '${widget.fromAddress}\n‚Üí\n${widget.toAddress}',
          theme,
        ),
        
        // –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è
        _buildSummarySection(
          '–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è',
          '${_formatDate(_selectedDate)}\n${_selectedTime.format(context)}',
          theme,
        ),
        
        // –ù–û–í–û–ï: –ü–∞—Å—Å–∞–∂–∏—Ä—ã —Å —Ä–∞–∑–±–∏–≤–∫–æ–π –ø–æ —Ç–∏–ø–∞–º
        _buildPassengersSummary(theme),
        
        // –ù–û–í–û–ï: –î–µ—Ç–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
        if (_hasChildren()) _buildChildrenSummary(theme),
        
        // –ë–∞–≥–∞–∂ (–µ—Å–ª–∏ –µ—Å—Ç—å)
        if (_baggage.isNotEmpty) _buildBaggageSummary(theme),
        
        // –ù–û–í–û–ï: –ñ–∏–≤–æ—Ç–Ω—ã–µ —Å —Ü–µ–Ω–∞–º–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
        if (_pets.isNotEmpty) _buildPetsSummary(theme),
        
        // –ù–û–í–û–ï: –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç —Å —Ü–µ–Ω–æ–π (–µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω)
        if (_selectedVehicleClass != null) _buildVehicleSummary(theme),
        
        // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
        if (_notes.isNotEmpty)
          _buildSummarySection('–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏', _notes, theme),
        
        const SizedBox(height: 24),
        
        // –ò–¢–û–ì–û–í–ê–Ø –¶–ï–ù–ê
        _buildTotalPrice(theme),
      ],
    ),
  );
}

// –ù–æ–≤—ã–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

Widget _buildPassengersSummary(CustomTheme theme) {
  final adults = _passengers.where((p) => p.type == PassengerType.adult).length;
  final children = _passengers.where((p) => p.type == PassengerType.child).length;
  
  String text = '$adults –≤–∑—Ä–æ—Å–ª—ã—Ö';
  if (children > 0) {
    text += ', $children –¥–µ—Ç–µ–π';
  }
  
  return _buildSummarySection('–ü–∞—Å—Å–∞–∂–∏—Ä—ã', text, theme);
}

bool _hasChildren() {
  return _passengers.any((p) => p.type == PassengerType.child);
}

Widget _buildChildrenSummary(CustomTheme theme) {
  final children = _passengers.where((p) => p.type == PassengerType.child).toList();
  
  String details = children.map((child) {
    String ageText = child.ageMonths != null 
      ? '${child.ageMonths! ~/ 12} –ª–µ—Ç ${child.ageMonths! % 12} –º–µ—Å'
      : '–≤–æ–∑—Ä–∞—Å—Ç –Ω–µ —É–∫–∞–∑–∞–Ω';
    String seatText = child.childSeatType != null
      ? '–ö—Ä–µ—Å–ª–æ: ${_getSeatTypeName(child.childSeatType!)}'
      : '';
    return '$ageText${seatText.isNotEmpty ? ", $seatText" : ""}';
  }).join('\n');
  
  return _buildSummarySection('–î–µ—Ç–∞–ª–∏ –æ –¥–µ—Ç—è—Ö', details, theme);
}

Widget _buildBaggageSummary(CustomTheme theme) {
  // –ü–æ–¥—Å—á–µ—Ç –±–∞–≥–∞–∂–∞ –ø–æ —Ç–∏–ø–∞–º
  int sCount = _baggage.where((b) => b.size == BaggageSize.small).length;
  int mCount = _baggage.where((b) => b.size == BaggageSize.medium).length;
  int lCount = _baggage.where((b) => b.size == BaggageSize.large).length;
  
  List<String> items = [];
  if (sCount > 0) items.add('S: $sCount —à—Ç (500‚ÇΩ/—à—Ç)');
  if (mCount > 0) items.add('M: $mCount —à—Ç (1000‚ÇΩ/—à—Ç)');
  if (lCount > 0) items.add('L: $lCount —à—Ç (2000‚ÇΩ/—à—Ç)');
  
  // –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –±–∞–≥–∞–∂–∞
  double baggageCost = _calculateBaggageCost();
  String summary = items.join('\n');
  if (baggageCost > 0) {
    summary += '\n\n–°—Ç–æ–∏–º–æ—Å—Ç—å: ${baggageCost.toInt()}‚ÇΩ';
  }
  
  return _buildSummarySection('–ë–∞–≥–∞–∂', summary, theme);
}

Widget _buildPetsSummary(CustomTheme theme) {
  List<String> items = _pets.map((pet) {
    String category = _getPetCategoryName(pet.category);
    return '$category (${pet.cost.toInt()}‚ÇΩ)';
  }).toList();
  
  double totalPetCost = _pets.fold(0, (sum, pet) => sum + pet.cost);
  String summary = items.join('\n');
  summary += '\n\n–ò—Ç–æ–≥–æ –∑–∞ –∂–∏–≤–æ—Ç–Ω—ã—Ö: ${totalPetCost.toInt()}‚ÇΩ';
  
  return _buildSummarySection('–ñ–∏–≤–æ—Ç–Ω—ã–µ', summary, theme);
}

Widget _buildVehicleSummary(CustomTheme theme) {
  String text = _selectedVehicleClass!.name;
  if (_selectedVehicleClass!.extraPrice > 0) {
    text += '\n–î–æ–ø–ª–∞—Ç–∞: ${_selectedVehicleClass!.extraPrice.toInt()}‚ÇΩ';
  }
  return _buildSummarySection('–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç', text, theme);
}

Widget _buildSummarySection(String title, String content, CustomTheme theme) {
  return Container(
    margin: const EdgeInsets.only(bottom: 16),
    padding: const EdgeInsets.all(16),
    decoration: BoxDecoration(
      color: theme.secondarySystemBackground,
      borderRadius: BorderRadius.circular(12),
    ),
    child: Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text(
          title,
          style: TextStyle(
            fontSize: 14,
            color: theme.secondaryLabel,
            fontWeight: FontWeight.w500,
          ),
        ),
        const SizedBox(height: 8),
        Text(
          content,
          style: TextStyle(
            fontSize: 16,
            color: theme.label,
            fontWeight: FontWeight.w600,
          ),
        ),
      ],
    ),
  );
}

Widget _buildTotalPrice(CustomTheme theme) {
  return Container(
    padding: const EdgeInsets.all(20),
    decoration: BoxDecoration(
      color: theme.systemRed.withOpacity(0.1),
      borderRadius: BorderRadius.circular(12),
      border: Border.all(color: theme.systemRed, width: 2),
    ),
    child: Column(
      children: [
        Text(
          '–ò–¢–û–ì–û –ö –û–ü–õ–ê–¢–ï',
          style: TextStyle(
            fontSize: 14,
            color: theme.secondaryLabel,
            fontWeight: FontWeight.w600,
          ),
        ),
        const SizedBox(height: 8),
        Text(
          '${_calculateTotalPrice().toInt()}‚ÇΩ',
          style: TextStyle(
            fontSize: 32,
            color: theme.systemRed,
            fontWeight: FontWeight.bold,
          ),
        ),
      ],
    ),
  );
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π
String _getSeatTypeName(ChildSeatType type) {
  switch (type) {
    case ChildSeatType.baby:
      return '–ê–≤—Ç–æ–ª—é–ª—å–∫–∞';
    case ChildSeatType.group1:
      return '–ì—Ä—É–ø–ø–∞ 1 (9-18 –∫–≥)';
    case ChildSeatType.group2_3:
      return '–ì—Ä—É–ø–ø–∞ 2-3 (15-36 –∫–≥)';
    case ChildSeatType.booster:
      return '–ë—É—Å—Ç–µ—Ä';
  }
}

String _getPetCategoryName(String category) {
  switch (category) {
    case 'upTo5kgWithCarrier':
      return '–î–æ 5 –∫–≥ —Å –ø–µ—Ä–µ–Ω–æ—Å–∫–æ–π';
    case 'upTo5kgWithoutCarrier':
      return '–î–æ 5 –∫–≥ –±–µ–∑ –ø–µ—Ä–µ–Ω–æ—Å–∫–∏';
    case 'over6kg':
      return '–ë–æ–ª–µ–µ 6 –∫–≥';
    default:
      return category;
  }
}

double _calculateBaggageCost() {
  // –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –±–∞–≥–∞–∂–∞ —Å —É—á–µ—Ç–æ–º –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö
  // (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—É –∂–µ –ª–æ–≥–∏–∫—É —á—Ç–æ –≤ BaggageSelectionScreen)
  // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è:
  int freeS = _passengers.length * 2;
  int freeM = _passengers.length;
  int freeL = _passengers.length;
  
  int paidS = max(0, _baggage.where((b) => b.size == BaggageSize.small).length - freeS);
  int paidM = max(0, _baggage.where((b) => b.size == BaggageSize.medium).length - freeM);
  int paidL = max(0, _baggage.where((b) => b.size == BaggageSize.large).length - freeL);
  
  return (paidS * 500) + (paidM * 1000) + (paidL * 2000).toDouble();
}
```

---

### 6. –£–¥–∞–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞ "–ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω"

**–§–∞–π–ª:** `lib/widgets/custom_route_booking_modal.dart`

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**

1. –í –º–µ—Ç–æ–¥–µ `_completeBooking()` –Ω–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É —Å –≤—ã–∑–æ–≤–æ–º –¥–∏–∞–ª–æ–≥–∞:
```dart
// –£–î–ê–õ–ò–¢–¨ —ç—Ç–æ—Ç –±–ª–æ–∫ (–µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å):
showCupertinoDialog(
  context: context,
  builder: (context) => CupertinoAlertDialog(
    title: const Text('–ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω'),
    content: const Text('–í–∞—à –∑–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!'),
    actions: [
      CupertinoDialogAction(
        child: const Text('–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–∫–∞–∑'),
        onPressed: () {
          Navigator.pop(context);
          // –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ BookingDetailScreen
        },
      ),
    ],
  ),
);
```

2. –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –ø—Ä—è–º–æ–π –ø–µ—Ä–µ—Ö–æ–¥:
```dart
void _completeBooking() async {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
  if (_passengers.isEmpty) {
    _showError('–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ –ø–∞—Å—Å–∞–∂–∏—Ä–∞');
    return;
  }

  // –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
  final order = TaxiOrder(
    orderId: const Uuid().v4(),
    timestamp: DateTime.now(),
    fromPoint: widget.fromPoint!,
    toPoint: widget.toPoint!,
    fromAddress: widget.fromAddress,
    toAddress: widget.toAddress,
    distanceKm: widget.distanceKm ?? 0,
    rawPrice: widget.basePrice,
    finalPrice: _calculateTotalPrice(),
    baseCost: widget.baseCost,
    costPerKm: widget.costPerKm,
    status: 'pending',
    isSynced: false,
    departureDate: _selectedDate,
    departureTime: '${_selectedTime.hour.toString().padLeft(2, '0')}:${_selectedTime.minute.toString().padLeft(2, '0')}',
    passengersJson: jsonEncode(_passengers.map((p) => p.toJson()).toList()),
    baggageJson: _baggage.isNotEmpty ? jsonEncode(_baggage.map((b) => b.toJson()).toList()) : null,
    petsJson: _pets.isNotEmpty ? jsonEncode(_pets.map((p) => p.toJson()).toList()) : null,
    notes: _notes.isNotEmpty ? _notes : null,
    vehicleClass: _selectedVehicleClass?.name,
  );

  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
  print('‚úÖ [ORDER] –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω —á–µ—Ä–µ–∑ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: ${order.orderId}');
  
  // TODO: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î (SQLite + Firebase)
  // await _saveOrderToDatabase(order);
  
  // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
  if (!mounted) return;
  Navigator.of(context).popUntil((route) => route.isFirst);
  
  // –û—Ç–∫—Ä—ã—Ç—å —ç–∫—Ä–∞–Ω –¥–µ—Ç–∞–ª–µ–π –∑–∞–∫–∞–∑–∞
  Navigator.push(
    context,
    CupertinoPageRoute(
      builder: (context) => BookingDetailScreen(
        booking: _convertTaxiOrderToBooking(order),
      ),
    ),
  );
}

// –ù–æ–≤—ã–π –º–µ—Ç–æ–¥ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
Booking _convertTaxiOrderToBooking(TaxiOrder order) {
  return Booking(
    id: order.orderId,
    userId: 'current_user_id', // TODO: –ø–æ–ª—É—á–∏—Ç—å –∏–∑ AuthService
    tripType: TripType.customRoute,
    fromStop: widget.fromAddress,
    toStop: widget.toAddress,
    departureDate: order.departureDate,
    departureTime: order.departureTime,
    passengers: _passengers,
    baggage: _baggage,
    pets: _pets,
    vehicleClass: _selectedVehicleClass,
    totalPrice: order.finalPrice,
    status: BookingStatus.pending,
    createdAt: DateTime.now(),
    notes: _notes.isNotEmpty ? _notes : null,
  );
}
```

**–ò–º–ø–æ—Ä—Ç:**
```dart
import '../features/orders/screens/booking_detail_screen.dart';
```

---

### 7. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤ TaxiOrder

**–§–∞–π–ª:** `lib/widgets/custom_route_booking_modal.dart`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∑–∞–∫–∞–∑

**–†–µ—à–µ–Ω–∏–µ:**

1. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤ –º–µ—Ç–æ–¥–µ `_completeBooking()` –≤—Å–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã:
```dart
final order = TaxiOrder(
  orderId: const Uuid().v4(),
  timestamp: DateTime.now(),
  fromPoint: widget.fromPoint!,
  toPoint: widget.toPoint!,
  fromAddress: widget.fromAddress,
  toAddress: widget.toAddress,
  distanceKm: widget.distanceKm ?? 0,
  rawPrice: widget.basePrice,
  finalPrice: _calculateTotalPrice(),
  baseCost: widget.baseCost,
  costPerKm: widget.costPerKm,
  status: 'pending',
  isSynced: false,
  
  // ‚úÖ –î–ê–¢–ê –ò –í–†–ï–ú–Ø
  departureDate: _selectedDate,
  departureTime: '${_selectedTime.hour.toString().padLeft(2, '0')}:${_selectedTime.minute.toString().padLeft(2, '0')}',
  
  // ‚úÖ –ü–ê–°–°–ê–ñ–ò–†–´ (–≤–∫–ª—é—á–∞—è –¥–µ—Ç–µ–π)
  passengersJson: jsonEncode(_passengers.map((p) => p.toJson()).toList()),
  
  // ‚úÖ –ë–ê–ì–ê–ñ
  baggageJson: _baggage.isNotEmpty 
    ? jsonEncode(_baggage.map((b) => b.toJson()).toList()) 
    : null,
  
  // ‚úÖ –ñ–ò–í–û–¢–ù–´–ï
  petsJson: _pets.isNotEmpty 
    ? jsonEncode(_pets.map((p) => p.toJson()).toList()) 
    : null,
  
  // ‚úÖ –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ò
  notes: _notes.isNotEmpty ? _notes : null,
  
  // ‚úÖ –ö–õ–ê–°–° –¢–†–ê–ù–°–ü–û–†–¢–ê
  vehicleClass: _selectedVehicleClass?.name,
);
```

2. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
```dart
print('üì¶ [ORDER] –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞:');
print('   –ü–∞—Å—Å–∞–∂–∏—Ä—ã: ${_passengers.length} (${_passengers.where((p) => p.type == PassengerType.child).length} –¥–µ—Ç–µ–π)');
print('   –ë–∞–≥–∞–∂: ${_baggage.length} –ø—Ä–µ–¥–º–µ—Ç–æ–≤');
print('   –ñ–∏–≤–æ—Ç–Ω—ã–µ: ${_pets.length}');
print('   –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç: ${_selectedVehicleClass?.name ?? "–Ω–µ –≤—ã–±—Ä–∞–Ω"}');
print('   –ò—Ç–æ–≥–æ–≤–∞—è —Ü–µ–Ω–∞: ${_calculateTotalPrice().toInt()}‚ÇΩ');
```

3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –º–æ–¥–µ–ª–∏ –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã `toJson()`:
- `PassengerInfo.toJson()` - –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å –≤—Å–µ –ø–æ–ª—è (type, ageMonths, childSeatType)
- `BaggageItem.toJson()` - –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å size, description, cost
- `PetInfo.toJson()` - –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å category, breed, cost

---

## üìù –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –≠—Ç–∞–ø 1: UI –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–Ω–∏–∑–∫–∏–π —Ä–∏—Å–∫)
**–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç  
**–ó–∞–¥–∞—á–∏:**
- ‚úÖ –£–¥–∞–ª–∏—Ç—å –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å"
- ‚úÖ –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –æ—Ç—Å—Ç—É–ø—ã

### –≠—Ç–∞–ø 2: –õ–æ–≥–∏–∫–∞ —Ü–µ–Ω —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ (—Å—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫)
**–í—Ä–µ–º—è:** 45 –º–∏–Ω—É—Ç  
**–ó–∞–¥–∞—á–∏:**
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å extraPrice –≤ VehicleClass enum
- ‚úÖ –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ü–µ–Ω—É –≤ UI
- ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å _calculateTotalPrice()

### –≠—Ç–∞–ø 3: –≠–∫—Ä–∞–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (—Å—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫)
**–í—Ä–µ–º—è:** 1.5 —á–∞—Å–∞  
**–ó–∞–¥–∞—á–∏:**
- ‚úÖ –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –æ –¥–µ—Ç—è—Ö
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ü–µ–Ω—ã –∑–∞ –∂–∏–≤–æ—Ç–Ω—ã—Ö –∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç
- ‚úÖ –ö—Ä–∞—Å–∏–≤–æ –æ—Ñ–æ—Ä–º–∏—Ç—å –∏—Ç–æ–≥–æ–≤—É—é —Ü–µ–Ω—É

### –≠—Ç–∞–ø 4: –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ—Å–ª–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫)
**–í—Ä–µ–º—è:** 1 —á–∞—Å  
**–ó–∞–¥–∞—á–∏:**
- ‚úÖ –£–¥–∞–ª–∏—Ç—å –¥–∏–∞–ª–æ–≥ "–ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω"
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä—è–º–æ–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ BookingDetailScreen
- ‚úÖ –°–æ–∑–¥–∞—Ç—å –º–µ—Ç–æ–¥ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ TaxiOrder ‚Üí Booking

### –≠—Ç–∞–ø 5: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫)
**–í—Ä–µ–º—è:** 1 —á–∞—Å  
**–ó–∞–¥–∞—á–∏:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –≤—Å–µ—Ö –ø–æ–ª–µ–π –≤ TaxiOrder
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ SQLite
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å Firebase

**–û–ë–©–ï–ï –í–†–ï–ú–Ø:** ~4.5 —á–∞—Å–∞ —á–∏—Å—Ç–æ–π —Ä–∞–±–æ—Ç—ã

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –¢–µ—Å—Ç-–∫–µ–π—Å—ã

#### TC-1: –£–¥–∞–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å"
1. –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
2. –ü—Ä–æ–π—Ç–∏ –Ω–∞ —à–∞–≥–∏ 4, 5, 6, 7, 8
3. ‚úÖ **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å" –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

#### TC-2: –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
1. –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
2. –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ 9 —à–∞–≥–æ–≤
3. ‚úÖ **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –í—Å–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã

#### TC-3: –û—Ç—Å—Ç—É–ø—ã –±–ª–æ–∫–æ–≤
1. –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
2. –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —à–∞–≥–∏
3. ‚úÖ **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –ë–ª–æ–∫–∏ –Ω–µ –ø—Ä–∏–∂–∞—Ç—ã –∫ –∫—Ä–∞—è–º (–æ—Ç—Å—Ç—É–ø—ã 16px)

#### TC-4: –¶–µ–Ω–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
1. –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ ‚Üí —à–∞–≥ 7 (—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç)
2. –í—ã–±—Ä–∞—Ç—å –°–µ–¥–∞–Ω
3. ‚úÖ **–û–∂–∏–¥–∞–µ—Ç—Å—è:** "–î–æ–ø–ª–∞—Ç–∞: 0‚ÇΩ"
4. –í—ã–±—Ä–∞—Ç—å –ú–∏–Ω–∏–≤—ç–Ω
5. ‚úÖ **–û–∂–∏–¥–∞–µ—Ç—Å—è:** "–î–æ–ø–ª–∞—Ç–∞: 1500‚ÇΩ"

#### TC-5: –≠–∫—Ä–∞–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è - –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
1. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ —à–∞–≥–∏:
   - 2 –≤–∑—Ä–æ—Å–ª—ã—Ö + 1 —Ä–µ–±–µ–Ω–æ–∫ (3 –≥–æ–¥–∞)
   - –ë–∞–≥–∞–∂: 2√óS, 1√óM
   - –ñ–∏–≤–æ—Ç–Ω—ã–µ: 1 (–¥–æ 5–∫–≥ —Å –ø–µ—Ä–µ–Ω–æ—Å–∫–æ–π)
   - –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç: –ú–∏–Ω–∏–≤—ç–Ω
2. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —à–∞–≥ 9 (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ)
3. ‚úÖ **–û–∂–∏–¥–∞–µ—Ç—Å—è:**
   - –ü–∞—Å—Å–∞–∂–∏—Ä—ã: "2 –≤–∑—Ä–æ—Å–ª—ã—Ö, 1 —Ä–µ–±–µ–Ω–æ–∫"
   - –î–µ—Ç–∞–ª–∏ –æ –¥–µ—Ç—è—Ö: "3 –≥–æ–¥–∞ 0 –º–µ—Å, –ö—Ä–µ—Å–ª–æ: –ì—Ä—É–ø–ø–∞ 1"
   - –ë–∞–≥–∞–∂: "S: 2 —à—Ç (500‚ÇΩ/—à—Ç), M: 1 —à—Ç (1000‚ÇΩ/—à—Ç), –°—Ç–æ–∏–º–æ—Å—Ç—å: 500‚ÇΩ"
   - –ñ–∏–≤–æ—Ç–Ω—ã–µ: "–î–æ 5 –∫–≥ —Å –ø–µ—Ä–µ–Ω–æ—Å–∫–æ–π (1000‚ÇΩ), –ò—Ç–æ–≥–æ: 1000‚ÇΩ"
   - –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç: "–ú–∏–Ω–∏–≤—ç–Ω, –î–æ–ø–ª–∞—Ç–∞: 1500‚ÇΩ"
   - –ò–¢–û–ì–û: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—É–º–º–∞

#### TC-6: –ü—Ä—è–º–æ–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –¥–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞
1. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ —à–∞–≥–∏
2. –ù–∞–∂–∞—Ç—å "–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å"
3. ‚úÖ **–û–∂–∏–¥–∞–µ—Ç—Å—è:**
   - –î–∏–∞–ª–æ–≥ "–ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω" –ù–ï –ø–æ—è–≤–ª—è–µ—Ç—Å—è
   - –°—Ä–∞–∑—É –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è BookingDetailScreen
   - –í –¥–µ—Ç–∞–ª—è—Ö –∑–∞–∫–∞–∑–∞ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã

#### TC-7: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
1. –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ —Å:
   - 1 –≤–∑—Ä–æ—Å–ª—ã–π + 2 –¥–µ—Ç–µ–π (—Ä–∞–∑–Ω–æ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞)
   - –ë–∞–≥–∞–∂: 1√óL
   - –ñ–∏–≤–æ—Ç–Ω—ã–µ: 1 (–±–æ–ª–µ–µ 6–∫–≥)
   - –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç: –ú–∏–∫—Ä–æ–∞–≤—Ç–æ–±—É—Å
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: "–¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑"
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞
3. –ó–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –æ—Ç–∫—Ä—ã—Ç—å —Å–Ω–æ–≤–∞
4. –ù–∞–π—Ç–∏ –∑–∞–∫–∞–∑ –≤ —Å–ø–∏—Å–∫–µ
5. ‚úÖ **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–´–ï –ú–û–ú–ï–ù–¢–´

### 1. –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª–µ–π –≤ –º–æ–¥–µ–ª—è—Ö:**
- `PassengerInfo` - –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å `ageMonths`, `childSeatType`, `useOwnSeat`
- `VehicleClass` - –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `extraPrice`
- `TaxiOrder` - —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –µ—Å—Ç—å –ø–æ–ª—è –¥–ª—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö

### 2. JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è
**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç–æ–¥—ã:**
- `PassengerInfo.toJson()` / `fromJson()`
- `BaggageItem.toJson()` / `fromJson()`
- `PetInfo.toJson()` / `fromJson()`

### 3. BookingDetailScreen
**–£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —ç–∫—Ä–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–∞—Ä—Å–∏—Ç:**
- `passengersJson` ‚Üí List<PassengerInfo>
- `baggageJson` ‚Üí List<BaggageItem>
- `petsJson` ‚Üí List<PetInfo>
- `vehicleClass` ‚Üí VehicleClass enum

### 4. –†–∞—Å—á–µ—Ç –∏—Ç–æ–≥–æ–≤–æ–π —Ü–µ–Ω—ã
**–§–æ—Ä–º—É–ª–∞ –¥–æ–ª–∂–Ω–∞ –≤–∫–ª—é—á–∞—Ç—å:**
```dart
double _calculateTotalPrice() {
  double total = widget.basePrice; // –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ –º–∞—Ä—à—Ä—É—Ç–∞
  
  // –ù–æ—á–Ω–∞—è –¥–æ–ø–ª–∞—Ç–∞ (>= 22:00)
  if (_selectedTime.hour >= 22) {
    total += 2000;
  }
  
  // –ë–∞–≥–∞–∂ (—Ç–æ–ª—å–∫–æ –ø–ª–∞—Ç–Ω—ã–π)
  total += _calculateBaggageCost();
  
  // –ñ–∏–≤–æ—Ç–Ω—ã–µ
  total += _pets.fold(0.0, (sum, pet) => sum + pet.cost);
  
  // –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç (–¥–æ–ø–ª–∞—Ç–∞ –∑–∞ –∫–ª–∞—Å—Å)
  if (_selectedVehicleClass != null) {
    total += _selectedVehicleClass!.extraPrice;
  }
  
  // –î–µ—Ç–∏ –ù–ï –¥–æ–±–∞–≤–ª—è—é—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
  
  return total;
}
```

---

## üìä –ö–†–ò–¢–ï–†–ò–ò –ü–†–ò–ï–ú–ö–ò

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ (MUST HAVE)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å" –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω–∞
- ‚úÖ –í—Å–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –ë–ª–æ–∫–∏ –∏–º–µ—é—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã (16px)
- ‚úÖ –¶–µ–Ω–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ
- ‚úÖ –≠–∫—Ä–∞–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ —Å —Ü–µ–Ω–∞–º–∏
- ‚úÖ –ü–æ—Å–ª–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è BookingDetailScreen (–±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞)
- ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∑–∞–∫–∞–∑ (–¥–µ—Ç–∏, –±–∞–≥–∞–∂, –∂–∏–≤–æ—Ç–Ω—ã–µ, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç)

### –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ (NICE TO HAVE)
- üîÑ –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ BookingDetailScreen
- üîÑ –ü–æ–∫–∞–∑ –ø—Ä–æ–≥—Ä–µ—Å—Å-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
- üîÑ Toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω"

---

## üîÑ –ü–û–°–õ–ï –î–û–†–ê–ë–û–¢–ö–ò

### –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:
1. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è–º–∏ –æ–ø—Ü–∏–π
2. ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞—Å—á–µ—Ç–∞ —Ü–µ–Ω—ã
3. ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ SQLite
4. ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å Firebase (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)
5. ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –≤ BookingDetailScreen
6. ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
7. ‚úÖ –û—Ç–º–µ–Ω—É –∑–∞–∫–∞–∑–∞

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
- –ù–µ —Å–ª–æ–º–∞–ª–æ—Å—å –ª–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞
- –ù–µ —Å–ª–æ–º–∞–ª–æ—Å—å –ª–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö —ç–∫—Ä–∞–Ω–∞
- –¢–µ–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞

---

## üìû –ö–û–ù–¢–ê–ö–¢–´

**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** GitHub Copilot  
**–î–∞—Ç–∞ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è:** 30 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è –¢–ó:** 1.0

---

## ‚úçÔ∏è –°–û–ì–õ–ê–°–û–í–ê–ù–ò–ï

**–ö–ª–∏–µ–Ω—Ç:** _________________________  
**–î–∞—Ç–∞:** _________________________

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞:**
```
[–ó–¥–µ—Å—å –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –æ—Å—Ç–∞–≤–∏—Ç—å —Å–≤–æ–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏]
```

---

**–°–¢–ê–¢–£–°:** üü° –û–∂–∏–¥–∞–µ—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è
