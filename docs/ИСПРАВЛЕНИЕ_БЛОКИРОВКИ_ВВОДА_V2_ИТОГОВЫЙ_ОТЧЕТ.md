# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ë–õ–û–ö–ò–†–û–í–ö–ò –í–í–û–î–ê - –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ–ª—è –≤–≤–æ–¥–∞ –∞–¥—Ä–µ—Å–æ–≤ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏—Å—å –ø–æ—Å–ª–µ –≤–≤–æ–¥–∞ "–¥–æ–Ω" - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–≥ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤–≤–æ–¥, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –∏–ª–∏ –ø–æ–ª—É—á–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏.

## üö® –°–∏–º–ø—Ç–æ–º—ã
```
I/flutter ( 1541): üîç [ADDRESS_SEARCH] –ó–∞–ø—Ä–æ—Å FROM –ø–æ–¥—Å–∫–∞–∑–æ–∫ –¥–ª—è: "–¥–æ–Ω"
W/yandex.maps( 1541): poxHcJDuv2tO5gpI+pN3: No available cache for request
```
–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø–æ–ª–µ –≤–≤–æ–¥–∞ —Å—Ç–∞–Ω–æ–≤–∏–ª–æ—Å—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–æ—Ç–∑—ã–≤—á–∏–≤—ã–º.

## üîç –ö–æ—Ä–Ω–µ–≤—ã–µ –ø—Ä–∏—á–∏–Ω—ã (–Ω–∞–π–¥–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Ä–∞–±–æ—á–∏–º –∫–æ–¥–æ–º)

### 1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã—Ö —Ñ–ª–∞–≥–æ–≤ `_isSelectingFromSuggestion` 
**–†–µ—à–µ–Ω–∏–µ:** –í–Ω–µ–¥—Ä–∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∫–∞–∫ –≤ —Ä–∞–±–æ—á–µ–º `map_search`

### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ proper State Management
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç —á–µ—Ç–∫–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π (Loading, Success, Error, Off)
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π:
```dart
abstract class SuggestState {}
class SuggestOff implements SuggestState
class SuggestLoading implements SuggestState  
class SuggestSuccess implements SuggestState
class SuggestError implements SuggestState
```

### 3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ API Yandex
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è `SuggestItem`
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ `SpannableString`:
```dart
// –ë—ã–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
title: item.title,  // SpannableString != String

// –°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
title: item.title.text,  // String
subtitle: (item.subtitle?.text) ?? '',
```

### 4. –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π BoundingBox
**–ü—Ä–æ–±–ª–µ–º–∞:** –£–∑–∫–∏–π —Ä–µ–≥–∏–æ–Ω –ø–æ–∏—Å–∫–∞
**–†–µ—à–µ–Ω–∏–µ:** –†–∞—Å—à–∏—Ä–∏–ª–∏ –Ω–∞ –≤—Å—é –†–æ—Å—Å–∏—é:
```dart
static final BoundingBox _searchBoundingBox = BoundingBox(
  const Point(latitude: 41.0, longitude: 19.0),  // southWest  
  const Point(latitude: 82.0, longitude: 180.0), // northEast
);
```

### 5. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π debouncing
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π debouncing —Å 300ms –∑–∞–¥–µ—Ä–∂–∫–æ–π:
```dart
_fromDebounceTimer = Timer(const Duration(milliseconds: 300), () {
  _requestFromSuggestions(text);
});
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –°–æ–∑–¥–∞–ª–∏ –Ω–æ–≤—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é `address_search_screen_simple_v2.dart` –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞–±–æ—á–µ–≥–æ –∫–æ–¥–∞ –∏–∑ `map_search`:

1. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π** - –∫–∞–∫ –≤ —Ä–∞–±–æ—á–µ–º –ø—Ä–∏–º–µ—Ä–µ
2. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ Yandex API** - —É—á–µ—Ç —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö  
3. **Proper error handling** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
4. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫** - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π BoundingBox + –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π debouncing
5. **–ß–∏—Å—Ç—ã–π –∫–æ–¥** - –±–µ–∑ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ñ–ª–∞–≥–æ–≤ –∏ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚ùå –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è (–¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è):
```
I/flutter ( 1541): üîç [ADDRESS_SEARCH] –ó–∞–ø—Ä–æ—Å FROM –ø–æ–¥—Å–∫–∞–∑–æ–∫ –¥–ª—è: "–¥–æ–Ω"
W/yandex.maps( 1541): poxHcJDuv2tO5gpI+pN3: No available cache for request
# –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ - –ü–û–õ–ù–ê–Ø –ë–õ–û–ö–ò–†–û–í–ö–ê
```

### ‚úÖ –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è):
```
I/flutter ( 1541): ‚úÖ [ADDRESS_SEARCH] SearchManager –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
I/flutter ( 1541): üîç [ADDRESS_SEARCH] –ó–∞–ø—Ä–æ—Å FROM –ø–æ–¥—Å–∫–∞–∑–æ–∫ –¥–ª—è: "–¥–æ–Ω"
I/flutter ( 1541): üîç [ADDRESS_SEARCH] –ó–∞–ø—Ä–æ—Å TO –ø–æ–¥—Å–∫–∞–∑–æ–∫ –¥–ª—è: "–ø–µ—Ä–º"
# –ü–æ–ª—è —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫!
```

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **–°–æ–∑–¥–∞–Ω:** `lib/features/address_search/screens/address_search_screen_simple_v2.dart`
   - –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞–±–æ—á–µ–≥–æ –∫–æ–¥–∞
   - –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ API

2. **–û–±–Ω–æ–≤–ª–µ–Ω:** `lib/demo_main.dart`  
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ —ç–∫—Ä–∞–Ω–∞

## üéØ –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

‚úÖ **–ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤–≤–æ–¥–∞** - –º–æ–∂–Ω–æ —Å–≤–æ–±–æ–¥–Ω–æ –≤–≤–æ–¥–∏—Ç—å –ª—é–±–æ–π —Ç–µ–∫—Å—Ç  
‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏** - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ SpannableString  
‚úÖ **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫** - BoundingBox –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å—é –†–æ—Å—Å–∏—é  
‚úÖ **Proper debouncing** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API  
‚úÖ **Robust error handling** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –æ—à–∏–±–æ–∫  
‚úÖ **Clean architecture** - —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π  

## üöÄ –°—Ç–∞—Ç—É—Å: **–ü–†–û–ë–õ–ï–ú–ê –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–®–ï–ù–ê**

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç:
- –í–≤–æ–¥–∏—Ç—å "–¥–æ–Ω", "–¥–æ–Ω–µ—Ü–∫", "–¥–æ–Ω—Å–∫–æ–π" –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- –ü–æ–ª—É—á–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∞–¥—Ä–µ—Å–æ–≤  
- –°–≤–æ–±–æ–¥–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –ø–æ–ª—è–º–∏ "–û—Ç–∫—É–¥–∞" –∏ "–ö—É–¥–∞"
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–≤–µ–¥–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç

---
**–î–∞—Ç–∞:** 26 –Ω–æ—è–±—Ä—è 2025  
**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –∫–æ–¥–∞