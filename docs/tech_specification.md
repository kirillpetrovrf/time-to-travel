# Техническое задание - Приложение "Такси Попутчик"

## 1. Общее описание проекта

### 1.1 Название проекта
**Такси Попутчик** - мобильное приложение для поиска попутчиков и предоставления услуг такси

### 1.2 Цель проекта
Создать платформу для поиска попутчиков в рамках городских поездок, где водители могут предложить свободные места в своем автомобиле, а пассажиры найти экономичный способ передвижения по городу.

### 1.3 Целевая аудитория
- **Водители**: 18-65 лет, владельцы автомобилей, которые ездят по городу и готовы взять попутчиков
- **Пассажиры**: 16-70 лет, люди, которым нужно добраться в другую часть города экономично

## 2. Функциональные требования

### 2.1 Основные роли пользователей

#### 2.1.1 Пассажир (Попутчик)
- Регистрация и авторизация по номеру телефона
- Поиск доступных поездок по городу
- Создание запроса на поездку с указанием:
  - Точки отправления (адрес, станция метро, район)
  - Точки назначения (адрес, станция метро, район)
  - Желаемого времени поездки
  - Количества мест (1-4 пассажира)
- Просмотр профилей водителей и их рейтингов
- Бронирование места в поездке
- Оценка и отзывы о поездках
- Чат с водителем для уточнения деталей
- Отслеживание местоположения водителя
- Оплата через приложение или наличными
- История поездок

#### 2.1.2 Водитель (Автовладелец)
- Регистрация и авторизация по номеру телефона
- Верификация водительских прав и автомобиля
- Добавление информации об автомобиле (марка, цвет, номер)
- Создание поездки с указанием:
  - Маршрута по городу (откуда - куда)
  - Времени отправления
  - Количества свободных мест
  - Стоимости за место
  - Особенностей (некурящий салон, детское кресло и т.д.)
- Просмотр запросов пассажиров
- Принятие/отклонение запросов на места
- Навигация по маршруту
- Чат с пассажирами
- Получение оплаты
- Статистика поездок и доходов

### 2.2 Дополнительные функции
- Групповые поездки (несколько пассажиров от разных остановок)
- Регулярные поездки (дом-работа, работа-дом)
- Поездки по расписанию (утренние, вечерние часы пик)
- Быстрые поездки (отправление в течение 15-30 минут)
- SOS кнопка для экстренных ситуаций
- Интеграция с городскими картами (Яндекс.Карты, 2ГИС)
- Фильтры поиска по районам города
- Избранные маршруты (часто используемые)
- Push-уведомления о подходящих поездках
- Рейтинговая система и отзывы
- Многоязычность (русский, английский)

## 3. Технические требования

### 3.1 Frontend (Мобильное приложение)
- **Фреймворк**: Flutter (Dart)
- **Дизайн**: Cupertino Design System (iOS-стиль)
- **Платформы**: iOS, Android
- **Минимальные версии**: iOS 12.0+, Android 6.0+ (API 23+)

### 3.2 Backend (Серверная часть)
- **Фреймворк**: Dart Frog
- **База данных**: PostgreSQL
- **Кэширование**: Redis
- **Файловое хранилище**: AWS S3 или аналог
- **Очереди**: RabbitMQ
- **Уведомления**: Firebase Cloud Messaging (FCM)

### 3.3 Архитектура системы
```
Мобильное приложение (Flutter)
    ↓ HTTP/WebSocket
API Gateway (Dart Frog)
    ↓
Микросервисы:
- Пользователи и авторизация
- Заказы и поездки
- Платежи
- Уведомления
- Геолокация
    ↓
База данных (PostgreSQL) + Кэш (Redis)
```

### 3.4 Система дизайна и тем
- Отдельный модуль управления темами в папке `lib/theme/`
- Графический редактор тем в административной панели
- Настройка цветов, размеров, шрифтов
- Возможность включения/отключения элементов UI
- Предварительный просмотр изменений

## 4. Нефункциональные требования

### 4.1 Производительность
- Время отклика API: не более 200ms
- Время загрузки приложения: не более 3 секунд
- Поддержка до 10,000 одновременных пользователей

### 4.2 Безопасность
- HTTPS/TLS шифрование
- JWT токены для авторизации
- Шифрование персональных данных
- Верификация номера телефона
- Проверка документов водителей

### 4.3 Надежность
- Uptime 99.9%
- Автоматическое резервное копирование
- Мониторинг системы 24/7

## 5. Интеграции

### 5.1 Платежные системы
- Банковские карты (Visa, MasterCard, Мир)
- Электронные кошельки (ЮMoney, QIWI)
- СБП (Система быстрых платежей)
- Apple Pay / Google Pay

### 5.2 Картографические сервисы
- Яндекс.Карты (основной для России)
- Google Maps (для международных поездок)
- Построение маршрутов
- Определение местоположения

### 5.3 SMS-уведомления
- Подтверждение регистрации
- Уведомления о поездках
- Аварийные уведомления

## 6. Этапы разработки

### Этап 1 (MVP - 2 месяца)
- Базовая регистрация и авторизация
- Создание и поиск поездок
- Простой чат
- Базовые платежи
- Минимальный дизайн

### Этап 2 (3-4 месяц)
- Система рейтингов и отзывов
- Продвинутая геолокация
- Push-уведомления
- Верификация водителей
- Улучшенный UI/UX

### Этап 3 (5-6 месяц)
- Групповые поездки
- Регулярные маршруты
- Административная панель
- Аналитика и отчеты
- Система тем и дизайна

### Этап 4 (7-8 месяц)
- Масштабирование
- Оптимизация производительности
- Дополнительные функции
- Маркетинговые инструменты

## 7. Файловая структура проекта

```
taxi_poputchik/
├── lib/
│   ├── main.dart
│   ├── app/
│   │   ├── app.dart
│   │   └── routes/
│   ├── features/
│   │   ├── auth/
│   │   ├── rides/
│   │   ├── payments/
│   │   ├── chat/
│   │   ├── profile/
│   │   └── maps/
│   ├── shared/
│   │   ├── widgets/
│   │   ├── services/
│   │   ├── models/
│   │   └── utils/
│   ├── theme/
│   │   ├── app_theme.dart
│   │   ├── colors.dart
│   │   ├── text_styles.dart
│   │   ├── theme_manager.dart
│   │   └── theme_editor/
│   └── config/
├── server/ (Dart Frog)
│   ├── routes/
│   ├── models/
│   ├── services/
│   └── middleware/
├── docs/
└── assets/
    ├── images/
    ├── icons/
    └── fonts/
```

## 8. Требования к хостингу и инфраструктуре

### 8.1 VPS/Cloud требования
- **CPU**: минимум 4 ядра (8 ядер для продакшена)
- **RAM**: минимум 8GB (16GB для продакшена)
- **Диск**: SSD от 100GB
- **Пропускная способность**: минимум 1 Гбит/с
- **ОС**: Ubuntu 20.04 LTS или новее

### 8.2 Рекомендуемые провайдеры
- **Яндекс.Облако** (для России)
- **VK Cloud** (отечественный)
- **DigitalOcean** (международный)
- **AWS** (для масштабирования)

### 8.3 Мониторинг и логирование
- Grafana + Prometheus для мониторинга
- ELK Stack для логирования
- Uptime мониторинг

## 9. Безопасность и соответствие требованиям

### 9.1 Персональные данные
- Соответствие ФЗ-152 "О персональных данных"
- Политика конфиденциальности
- Согласие на обработку данных

### 9.2 Лицензирование
- Лицензия на осуществление деятельности такси (для водителей)
- Соблюдение транспортного законодательства

## 10. Тестирование

### 10.1 Виды тестирования
- Unit тесты (покрытие 80%+)
- Integration тесты
- E2E тесты
- Нагрузочное тестирование
- Security тестирование

### 10.2 Инструменты
- Flutter Test для unit тестов
- Patrol для E2E тестирования
- JMeter для нагрузочного тестирования
