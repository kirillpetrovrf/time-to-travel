# Техническое Задание: Мобильное Приложение "Такси Попутчик"

## ОБЩАЯ ИНФОРМАЦИЯ

Название проекта: Такси Попутчик  
Тип приложения: Мобильное приложение для iOS и Android  
Целевая аудитория: Водители и пассажиры, ищущие попутчиков  
Версия: 1.0  

## КОНЦЕПЦИЯ ПРОЕКТА

### Основная идея
Универсальное приложение-агрегатор для поиска попутчиков, где один пользователь может быть как водителем, так и пассажиром в зависимости от ситуации. Приложение объединяет функции:
- Такси-сервиса (водитель предлагает поездку)
- BlaBlaCar-подобного сервиса (поиск попутчиков)
- Геолокационного сервиса с интерактивными картами

### Уникальные особенности
1. Двойная роль пользователя - переключение между водителем/пассажиром
2. Интерактивная карта с визуализацией водителей и пассажиров
3. Предложение маршрутов - пассажиры могут предлагать водителям маршруты
4. Система рейтингов и отзывов для безопасности
5. Социальная верификация - связи через ВКонтакте и Telegram
6. Гибкая настройка тем приложения

## ТЕКУЩАЯ АРХИТЕКТУРА И СТАТУС

### РЕАЛИЗОВАННАЯ ФУНКЦИОНАЛЬНОСТЬ

#### Система тем и интерфейса
- Адаптивная система тем с поддержкой светлой/темной тем
- Кастомизация интерфейса: настройка цветов, размеров, шрифтов
- Cupertino Design System для нативного iOS-подобного интерфейса
- Редактор тем для пользовательской настройки

#### Локализация
- Многоязычность: русский и английский языки
- Автоматическая генерация локализационных классов

#### Архитектура кода
- Модульная архитектура по функциональным блокам
- Разделение на компоненты: авторизация, главный экран, поездки, карты, редактор тем
- Система управления состоянием приложения

### В РАЗРАБОТКЕ / ТРЕБУЕТ ДОРАБОТКИ

#### Интеграция карт
- Yandex MapKit (требует API ключ)
- Геолокация пользователей
- Отображение маршрутов
- Интерактивные маркеры

#### Система пользователей
- Авторизация/регистрация
- Профили водителей и пассажиров
- Переключение ролей
- Система рейтингов
- Профиль автомобиля водителя (марка, модель, год, цвет, фото)

#### Логика поездок
- Создание поездок водителями
- Поиск попутчиков
- Бронирование мест
- Чат между участниками

## ДЕТАЛЬНОЕ ОПИСАНИЕ ФУНКЦИОНАЛЬНОСТИ

### ГЛАВНЫЙ ЭКРАН

#### Интерфейс
- Переключатель роли (Водитель/Пассажир) в верхней части
- Интерактивная карта на весь экран с текущим местоположением
- Быстрые действия внизу экрана:
  - Водитель: "Создать поездку", "Мои поездки"
  - Пассажир: "Найти поездку", "Мои бронирования"

#### Логика отображения на карте
- Маркеры пользователей: водители отображаются как машинки, пассажиры как человечки
- Информация о маршрутах для водителей
- Рейтинг пользователей

### РЕЖИМ ВОДИТЕЛЯ

#### Создание поездки
Поля ввода:
- Откуда (автозаполнение текущей геолокации)
- Куда (поиск по адресу + выбор на карте)
- Время отправления (дата + время)
- Количество мест (1-8 пассажиров)
- Цена за место (руб.)
- Комментарий (дополнительная информация)
- Настройки:
  - Только женщины
  - Разрешить курение
  - Можно с животными
  - Багаж включен

Функциональность:
- Метод создания новой поездки
- Управление заявками от пассажиров
- Принятие/отклонение заявок на бронирование
- Начало и завершение поездки

#### Мои поездки
- Активные поездки (ожидание пассажиров, в пути)
- Запланированные поездки 
- История поездок с возможностью оценить пассажиров
- Заявки от пассажиров (уведомления + чат)

#### Профиль автомобиля водителя
Обязательная информация:
- Марка автомобиля (выбор из базы автомобилей)
- Модель автомобиля (подгружается по выбранной марке)
- Год выпуска (валидация диапазона)
- Цвет автомобиля (выбор из стандартной палитры)
- Государственный номер (проверка формата)

Фотографии автомобиля (обязательные):
- 4 фото экстерьера: спереди, сзади, слева, справа
- 2 фото салона: передняя часть, задняя часть
- Автоматическая обработка: сжатие, водяные знаки, очистка метаданных

Верификация водителя:
- Проверка водительского удостоверения
- Проверка техпаспорта автомобиля
- Подтверждение соответствия фотографий и данных

### РЕЖИМ ПАССАЖИРА

#### Поиск поездок
Фильтры поиска:
- Маршрут (откуда - куда)
- Дата и время (с гибкостью по времени)
- Количество мест
- Ценовой диапазон
- Рейтинг водителя (от определенного количества звёзд)
- Дополнительные фильтры:
  - Только женщины-водители
  - Разрешено курение
  - Можно с животными
  - Только верифицированные профили

Детальная карточка поездки для пассажира:
- Фотографии автомобиля (галерея из 6 фото)
- Информация об авто: марка, модель, год, цвет, номер
- Рейтинг водителя и последние отзывы
- Профиль водителя с фотографией и статистикой
- Детализация стоимости поездки

#### Предложение маршрута водителю
Уникальная функция: Пассажир может нажать на водителя на карте и предложить ему свой маршрут с указанием желаемой цены и времени.

### ИНТЕРАКТИВНАЯ КАРТА

#### Визуализация пользователей
- Водители: 
  - Зелёные маркеры-машинки для свободных
  - Жёлтые для водителей в поездке
  - При нажатии показывается направление движения
- Пассажиры:
  - Синие маркеры-человечки
  - При нажатии показывается желаемый маршрут
- Кластеризация при большом скоплении пользователей

#### Интерактивность
- Построение маршрутов в реальном времени
- Выбор точек на карте для создания поездки
- Отображение пробок и времени в пути
- Уведомления о прибытии

### СИСТЕМА РЕЙТИНГОВ И ОТЗЫВОВ

#### Модель рейтинга
- Общий рейтинг от всех оценок
- Рейтинг как водителя и рейтинг как пассажира раздельно
- Критерии оценки: пунктуальность, чистота, общение, качество вождения, поведение

#### Система доверия
- Общий рейтинг (среднее от всех оценок)
- Рейтинг как водителя / рейтинг как пассажира раздельно
- Бейджи достижений:
  - "Надёжный водитель" (500+ поездок, рейтинг 4.8+)
  - "Отличный попутчик" (100+ поездок, рейтинг 4.9+)
  - "Новичок" (менее 10 поездок)
- Верификация через документы

### СИСТЕМА ЧАТОВ

#### Чат между участниками поездки
- Отправка текстовых сообщений
- Отправка геолокации
- Системные уведомления
- Групповой чат для поездки с несколькими пассажирами

### СИСТЕМА БЕЗОПАСНОСТИ И МОДЕРАЦИИ

#### Модерация профилей водителей
Автоматическая проверка:
- Валидация фотографий: соответствие требованиям, отсутствие неприемлемого контента
- Проверка номера авто: соответствие российским стандартам
- Анализ качества фото: достаточная освещённость, чёткость, полный вид авто

Ручная модерация:
- Проверка администратором: все профили проходят ручную проверку
- Статусы модерации: ожидает проверки, одобрен, отклонён с комментарием, требует исправлений

Требования к фотографиям:
- Минимальная ширина: 800 пикселей
- Минимальная высота: 600 пикселей
- Максимальный размер файла: 5MB
- Разрешённые форматы: JPG, JPEG, PNG

### СОЦИАЛЬНЫЕ СВЯЗИ И ВЕРИФИКАЦИЯ ПРОФИЛЕЙ

#### Концепция социального доверия
Интеграция социальных сетей значительно повышает психологический комфорт и доверие между незнакомыми людьми. Пользователи могут просматривать социальные профили друг друга перед поездкой, что создаёт ощущение безопасности и снижает анонимность.

#### Поддерживаемые социальные сети
ВКонтакте (VK.com):
- Наиболее популярная соцсеть в России
- Широкий охват аудитории всех возрастов
- Детальные профили с фотографиями, друзьями, интересами

Telegram:
- Растущая популярность как платформы для общения
- Удобно для быстрых сообщений и координации встреч
- Возможность создания групповых чатов для поездок

#### Функциональность социальных связей

Настройка социальных контактов:
- Привязка профилей ВКонтакте и Telegram
- Настройки приватности: кому показывать контакты
- Верификация профилей через администрацию

Отображение в карточке поездки:
- Блок с социальными связями водителя/пассажира
- Возможность перехода к профилям для ознакомления
- Индикаторы верификации

Экран настройки социальных связей:
- Добавление и редактирование ссылок на профили
- Настройки приватности: показывать водителям/пассажирам
- Разрешения на прямой контакт

#### Интеграция в поиск поездок

Фильтр по социальным связям:
- Только с верифицированными соц.сетями
- Предпочитаемые социальные сети

Отображение в результатах поиска:
- Превью социальных контактов в карточке поездки
- Индикаторы наличия верифицированных профилей

## ТЕХНИЧЕСКАЯ АРХИТЕКТУРА

### Серверная часть
- API маршруты для авторизации, управления пользователями, поездками, картами, чатами
- Бизнес-логика приложения
- Работа с базой данных
- Middleware для аутентификации и авторизации

### База данных PostgreSQL
Основные таблицы:
- Пользователи (с верификацией телефона, email, документов)
- Профили водителей (водительские права, информация об автомобиле, рейтинг)
- Автомобили водителей (марка, модель, год, цвет, госномер, статус верификации)
- Фотографии автомобилей (6 обязательных фото с модерацией)
- Справочник марок и моделей автомобилей
- Поездки (маршрут, время, места, цена)
- Бронирования (связь пассажир-поездка)
- Рейтинги и отзывы
- Социальные профили пользователей
- Настройки приватности социальных профилей

### Безопасность и верификация
- Многоэтапная верификация пользователей
- Модерация фотографий автомобилей
- Система рейтингов для повышения доверия
- Социальная верификация через популярные платформы
- Защита персональных данных

## АДМИНИСТРАТИВНАЯ ПАНЕЛЬ И УПРАВЛЕНИЕ

### РОЛЬ АДМИНИСТРАТОРА

#### Концепция администрирования
В приложении "Такси Попутчик" предусмотрена роль администратора для управления платформой, модерации контента и обработки спорных ситуаций. Администратор обеспечивает безопасность, качество сервиса и финансовую прозрачность системы.

#### Основные функции администратора
- Модерация профилей водителей и их автомобилей
- Управление поездками и разрешение конфликтов
- Финансовый контроль: управление платежами и комиссиями
- Блокировка нарушителей и работа с жалобами
- Аналитика и статистика использования приложения
- Настройка тарифов и комиссий платформы

### ОТДЕЛЬНОЕ АДМИНИСТРАТИВНОЕ ПРИЛОЖЕНИЕ

#### Архитектура административного приложения
Создается отдельное веб-приложение для администраторов с расширенным функционалом управления. Это приложение работает с той же базой данных и API, но имеет специализированный интерфейс для административных задач.

#### Интерфейс административной панели
Дашборд с основными метриками:
- Количество активных пользователей (водители/пассажиры)
- Количество поездок за период
- Общий оборот и комиссии платформы
- Ожидающие модерации профили и жалобы

Разделы административной панели:
- Управление пользователями
- Модерация автомобилей
- Управление поездками
- Финансовая отчетность
- Системные настройки

### МОДЕРАЦИЯ АВТОМОБИЛЕЙ И ПРОФИЛЕЙ

#### Очередь модерации
Список всех поданных на модерацию профилей водителей с фотографиями автомобилей:
- Сортировка по дате подачи
- Фильтры по статусу модерации
- Batch-обработка (массовое одобрение/отклонение)

#### Детальная проверка профиля
Интерфейс для проверки отдельного профиля водителя:
- Галерея из 6 фотографий автомобиля (4 экстерьера + 2 интерьера)
- Информация об автомобиле: марка, модель, год, цвет, госномер
- Данные водителя: ФИО, возраст, опыт вождения
- Статистика: рейтинг, количество поездок, отзывы

Действия модератора:
- Одобрить профиль (водитель может создавать поездки)
- Отклонить с комментарием (указать причину отклонения)
- Запросить исправления (конкретные замечания по фото/данным)
- Заблокировать профиль (при нарушениях)

### УПРАВЛЕНИЕ ПОЕЗДКАМИ

#### Мониторинг активных поездок
Карта в реальном времени с отображением всех активных поездок:
- Статусы поездок: ожидание пассажиров, в пути, завершена
- Возможность связаться с водителем или пассажирами
- Экстренное вмешательство при необходимости

#### Разрешение спорных ситуаций
Система жалоб и спорных ситуаций:
- Просмотр истории переписки между участниками поездки
- Анализ GPS-треков поездки
- Просмотр взаимных оценок и отзывов
- Вынесение решения по спору с возможными действиями:
  - Возврат денег пассажиру
  - Перераспределение комиссии
  - Предупреждение или блокировка нарушителя

### СИСТЕМА ПЛАТЕЖЕЙ И ФИНАНСОВЫЙ КОНТРОЛЬ

#### Концепция платежной системы
Приложение "Такси Попутчик" работает по модели комиссионной платформы. С каждой завершенной поездки платформа удерживает комиссию для покрытия банковских расходов и обеспечения прибыльности проекта.

#### Банковские комиссии и расходы платформы

Прием платежей от пользователей:
- Банковские карты Visa/MasterCard: 2.3-2.9% + 15-30 руб за транзакцию
- Карты МИР: 1.8-2.3% + 10-25 руб за транзакцию  
- Система быстрых платежей (СБП): 0.4-0.7% от суммы
- Электронные кошельки: 2.8-3.5% от суммы

Выплаты водителям:
- На банковские карты: 30-50 руб за транзакцию + 0.5-1%
- СБП (выплаты): 15-25 руб за транзакцию
- Электронные кошельки: 1-2% от суммы выплаты

#### Финансовая модель платформы

Расчет комиссии (на примере поездки 500 руб):
- Прием платежа: 500 × 2.5% + 20 руб = 32.5 руб (6.5% от суммы)
- Выплата водителю: 40 руб + 475 × 0.5% = 42.4 руб (8.5% от суммы)
- Общие банковские расходы: ~75 руб (15% от суммы поездки)

Структура комиссии платформы:
- Общая комиссия с поездки: **8-10%**
- Покрытие банковских расходов: **4-6%**
- Чистая маржа платформы: **4-5%**
- Операционные расходы и развитие: **2-3%**
- Прибыль: **1-2%**

#### Модель оплаты
Процесс оплаты поездки:
1. Пассажир бронирует место и оплачивает полную стоимость
2. Деньги блокируются на платформе до завершения поездки
3. После успешного завершения поездки:
   - 90% от стоимости переводится водителю
   - 10% остается платформе как комиссия
4. При отмене или споре средства возвращаются согласно условиям

#### Административный контроль финансов
Финансовая панель в административном приложении:
- Общий оборот платформы за период
- Сумма удержанных комиссий
- Статистика по регионам и типам поездок
- Отчеты для налоговой отчетности

Управление выплатами водителям:
- Автоматические выплаты после завершения поездок
- Ручное управление выплатами при спорных ситуациях
- Настройка периодичности выплат (ежедневно/еженедельно)
- Блокировка выплат при нарушениях

#### Настройка тарифов и комиссий
Гибкая система настройки комиссий:
- Базовая комиссия 5% (может изменяться администратором)
- Региональные различия в комиссиях
- Льготные тарифы для активных водителей
- Сезонные акции и промокоды

### АНАЛИТИКА И ОТЧЕТНОСТЬ

#### Дашборд аналитики
Ключевые метрики приложения:
- DAU/MAU (дневная/месячная активная аудитория)
- Конверсия регистрации в первую поездку
- Средний чек поездки и динамика роста
- География использования приложения
- Рейтинг приложения в сторах и отзывы пользователей

#### Отчеты для бизнеса
Еженедельные и ежемесячные отчеты:
- Финансовая сводка: оборот, комиссии, выплаты
- Пользовательская активность и рост базы
- Качество сервиса: средние рейтинги, время ответа поддержки
- Технические метрики: время загрузки, стабильность приложения

### API-FIRST ПОДХОД И ОБНОВЛЕНИЯ

#### Концепция API-first разработки
Приложение "Такси Попутчик" строится на принципах API-first архитектуры, что позволяет вносить изменения в бизнес-логику и настройки без выпуска новых версий мобильного приложения.

#### Возможности удаленного управления
Настройки, которые можно изменять через административную панель без обновления приложения:
- Тарифы и комиссии платформы
- Лимиты и ограничения (максимальное количество пассажиров, радиус поиска)
- Тексты уведомлений и сообщений пользователям
- Настройки модерации (автоматические фильтры, правила проверки)
- Региональные особенности и ограничения

#### Система конфигурации
Централизованная система конфигурации:
- Мобильное приложение запрашивает актуальные настройки при запуске
- Возможность принудительного обновления критически важных настроек
- A/B тестирование новых функций на части аудитории
- Откат изменений в случае проблем

#### Преимущества API-first подхода
- Быстрое реагирование на изменения рынка
- Возможность тестирования новых тарифов без релиза
- Упрощение процесса модерации и управления
- Единая точка управления для всех платформ (iOS, Android, Web)

## ЗАКЛЮЧЕНИЕ

Данное техническое задание описывает создание современного мобильного приложения для поиска попутчиков с уникальными функциями социального доверия и гибкой системой ролей. Приложение направлено на создание безопасной и комфортной среды для совместных поездок с акцентом на верификацию пользователей и прозрачность взаимодействия.

### ПЛАНЫ РАЗВИТИЯ И МАСШТАБИРОВАНИЯ

## ФИНАНСОВАЯ МОДЕЛЬ И БАНКОВСКИЕ КОМИССИИ

### Анализ текущих банковских тарифов (2024 год)

#### Комиссии за прием платежей (эквайринг)
**Тинькофф Банк:**
- Торговый эквайринг: от 1,2% (медицина) до 2,0% (обычная торговля)
- Платежи по QR-коду через СБП: от 0,2% (ЖКХ) до 0,7%
- Фастфуд и кафе: 1,5% за карты, 0,4-0,7% за QR
- Аптеки: 1,6% за карты, 0,4% за QR

**Сбербанк:**
- Эквайринг: 1,6-2,3% в зависимости от категории бизнеса
- Дополнительная фиксированная комиссия: 15-30 руб за транзакцию

**Альфа-Банк:**
- Стандартный тариф: 1,8-2,5%
- Льготные категории: от 1,4%

#### Комиссии за выплаты (на карты водителей)
**Массовые выплаты физическим лицам:**
- Тинькофф: 30-50 руб + 0,5-1% от суммы
- Сбербанк: 25-40 руб + 0,8-1,2%
- ЮMoney: 3% + 15 руб (до 15 000 руб в месяц)

### Рекомендуемая финансовая модель платформы

#### Структура комиссии платформы: 8-10%
**Распределение комиссии 10%:**
1. **Банковские расходы (3-4%):**
   - Прием платежа от пассажира: 2,3% + 20 руб
   - Выплата водителю: 40 руб + 1%
   - Резерв на возвраты и споры: 0,5%

2. **Операционные расходы (1,5-2%):**
   - Серверы и инфраструктура: 0,5%
   - Поддержка клиентов: 0,5%
   - Модерация и безопасность: 0,5%

3. **Маркетинг и развитие (1%):**
   - Привлечение новых пользователей
   - Акции и бонусы

4. **Чистая прибыль платформы (4-5%):**
   - Развитие продукта
   - Расширение функционала
   - Прибыль инвесторов

#### Примеры расчета комиссий

**Поездка стоимостью 1000 руб:**
- Комиссия платформы: 100 руб (10%)
- К доплате пассажиром: 1100 руб
- Банковская комиссия за прием: 25 руб (2,3% + 20 руб)
- Выплата водителю: 900 руб
- Банковская комиссия за выплату: 49 руб (40 руб + 1%)
- Итого банковских расходов: 74 руб
- Чистая прибыль платформы: 26 руб (2,6%)

**Поездка стоимостью 500 руб:**
- Комиссия платформы: 50 руб (10%)
- К доплате пассажиром: 550 руб
- Банковская комиссия за прием: 33 руб (2,3% + 20 руб)
- Выплата водителю: 450 руб
- Банковская комиссия за выплату: 45 руб (40 руб + 1%)
- Итого банковских расходов: 78 руб
- **Убыток платформы: 28 руб (-5,6%)**

#### Рекомендации по оптимизации

**Минимальная сумма поездки:**
Установить минимальную стоимость поездки 600-700 руб для обеспечения рентабельности всех операций.

**Дифференцированные тарифы:**
- Короткие поездки (до 30 км): комиссия 12%
- Средние поездки (30-100 км): комиссия 10%
- Длинные поездки (свыше 100 км): комиссия 8%

**Альтернативные схемы оплаты:**
- Ежемесячная подписка для активных водителей
- Кэшбэк-программа для постоянных пассажиров
- Бонусы за количество поездок в месяц

### Выбор платежной системы

**Рекомендуемые провайдеры:**
1. **ЮKassa (Яндекс)** - универсальное решение
2. **Тинькофф** - лучшие тарифы для малого бизнеса
3. **CloudPayments** - техническое удобство интеграции

**Критерии выбора:**
- Скорость зачисления средств (от 1 дня)
- Наличие готовых SDK для мобильных приложений
- Поддержка возвратов и частичных возвратов
- Соответствие требованиям 54-ФЗ (чеки)

### Налогообложение и легальность

**Статус водителей:**
- Самозанятые (налог на профессиональный доход 4-6%)
- ИП на УСН (упрощенная система налогообложения)
- Физические лица (необходимость декларирования доходов)

**Обязательства платформы:**
- Передача данных о доходах водителей в ФНС
- Ведение реестра операций согласно 115-ФЗ
- Соблюдение требований по защите персональных данных

### Этапы развития проекта

1. MVP: базовый функционал поиска попутчиков
2. Социальная интеграция и система доверия
3. Административная панель и финансовая система
4. Расширение географии и интеграция с другими сервисами


### Потенциальные интеграции
- Платежные системы: YooKassa, Сбербанк Онлайн, Tinkoff Pay
- Картографические сервисы: Yandex Maps
- Социальные сети: расширение на Вконтакте и Телеграм

Это техническое задание описывает полнофункциональную экосистему "Такси Попутчик" с административными возможностями, гибкой финансовой моделью и современной технической архитектурой.
