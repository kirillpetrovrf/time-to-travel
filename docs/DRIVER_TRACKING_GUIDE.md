# üöï –û–¢–°–õ–ï–ñ–ò–í–ê–ù–ò–ï –í–û–î–ò–¢–ï–õ–ï–ô –í –†–ï–ê–õ–¨–ù–û–ú –í–†–ï–ú–ï–ù–ò

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï
1. [–ö–æ–Ω—Ü–µ–ø—Ü–∏—è](#–∫–æ–Ω—Ü–µ–ø—Ü–∏—è)
2. [–°—Ä–∞–≤–Ω–µ–Ω–∏–µ: Yandex vs Google](#—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ-yandex-vs-google)
3. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Ä–µ—à–µ–Ω–∏—è)
4. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–ø–∞–∫–µ—Ç–æ–≤)
5. [–†–µ–∞–ª–∏–∑–∞—Ü–∏—è](#—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
6. [–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è](#–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ-—Ä–µ—à–µ–Ω–∏—è)

---

## üéØ –ö–û–ù–¶–ï–ü–¶–ò–Ø

### –í–∞—à –≤–æ–ø—Ä–æ—Å:
> "–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Google —Å–µ—Ä–≤–∏—Å—ã, —Ç–æ –º—ã —Å–º–æ–∂–µ–º –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ 
> –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ç–∞–∫—Å–∏ –Ω–∞—à–∏—Ö —É –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, 
> —á—Ç–æ –±—ã –∑–Ω–∞—Ç—å –≥–¥–µ –æ–Ω–æ –µ–¥–µ—Ç?"

### ‚úÖ –û–¢–í–ï–¢: –î–ê, –ù–û...

**Google Maps SDK** —Å–∞–º –ø–æ —Å–µ–±–µ **–ù–ï** –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤–æ–¥–∏—Ç–µ–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

–ù—É–∂–Ω–∞ **–∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤:**

```
Google Maps SDK (–∫–∞—Ä—Ç–∞) + Firebase (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö) + Geolocator (GPS)
```

---

## üìä –°–†–ê–í–ù–ï–ù–ò–ï: YANDEX VS GOOGLE

### Yandex Maps + Firebase:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç | –°—Ç–æ–∏–º–æ—Å—Ç—å |
|-----------|------------|-----------|
| **Yandex MapKit** | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç—É | ~1000‚ÇΩ+ |
| **Firebase Realtime DB** | –•—Ä–∞–Ω–∏—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ (10GB) |
| **Geolocator** | –ü–æ–ª—É—á–∞–µ—Ç GPS | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ |

**–ò—Ç–æ–≥–æ:** ~1000‚ÇΩ + Firebase (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–ª—è –º–∞–ª—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤)

---

### Google Maps + Firebase:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç | –°—Ç–æ–∏–º–æ—Å—Ç—å |
|-----------|------------|-----------|
| **Google Maps SDK** | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç—É | $200 –±–µ—Å–ø–ª–∞—Ç–Ω–æ/–º–µ—Å |
| **Firebase Realtime DB** | –•—Ä–∞–Ω–∏—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ (10GB) |
| **Geolocator** | –ü–æ–ª—É—á–∞–µ—Ç GPS | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ |

**–ò—Ç–æ–≥–æ:** –ë–µ—Å–ø–ª–∞—Ç–Ω–æ (–≤ —Ä–∞–º–∫–∞—Ö –ª–∏–º–∏—Ç–æ–≤)

---

### ‚úÖ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:

**–î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤–æ–¥–∏—Ç–µ–ª–µ–π:**
- Firebase Realtime Database (—É–∂–µ –µ—Å—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–µ!)
- Geolocator (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–∞–∫–µ—Ç)
- **–ö–∞—Ä—Ç–∞ –Ω–∞ –≤–∞—à –≤—ã–±–æ—Ä** (Yandex –∏–ª–∏ Google)

**–í—ã–≤–æ–¥:** –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç **–û–î–ò–ù–ê–ö–û–í–û** —Å Yandex –∏ Google –∫–∞—Ä—Ç–∞–º–∏!

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –†–ï–®–ï–ù–ò–Ø

### –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        FIREBASE CLOUD                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  /drivers                                                   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ    ‚îú‚îÄ‚îÄ driver123                                            ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ    ‚îÇ   ‚îú‚îÄ‚îÄ location                                         ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ latitude: 55.751244                         ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ longitude: 37.618423                        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ speed: 45.5                                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ heading: 180                                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ timestamp: 1697545678                       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ    ‚îÇ   ‚îú‚îÄ‚îÄ status: "on_trip"                               ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ    ‚îÇ   ‚îî‚îÄ‚îÄ currentTripId: "trip456"                        ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚Üë                                      ‚Üì
        ‚îÇ                                      ‚îÇ
        ‚îÇ GPS –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫                   ‚îÇ –°–ª—É—à–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
        ‚îÇ                                      ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ü–†–ò–õ–û–ñ–ï–ù–ò–ï       ‚îÇ              ‚îÇ   –ü–†–ò–õ–û–ñ–ï–ù–ò–ï          ‚îÇ
‚îÇ  –í–û–î–ò–¢–ï–õ–Ø         ‚îÇ              ‚îÇ   –ü–ê–°–°–ê–ñ–ò–†–ê           ‚îÇ
‚îÇ                   ‚îÇ              ‚îÇ                       ‚îÇ
‚îÇ  [Geolocator]     ‚îÇ              ‚îÇ   [Firebase Listener] ‚îÇ
‚îÇ       ‚Üì           ‚îÇ              ‚îÇ         ‚Üì             ‚îÇ
‚îÇ  [Firebase Upload]‚îÇ              ‚îÇ   [Google Maps]       ‚îÇ
‚îÇ                   ‚îÇ              ‚îÇ   –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–∞—Ä–∫–µ—Ä   ‚îÇ
‚îÇ  "–Ø –∑–¥–µ—Å—å üìç"     ‚îÇ              ‚îÇ   "–í–æ–¥–∏—Ç–µ–ª—å –µ–¥–µ—Ç üöï"  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª—è:**
   - –ü–æ–ª—É—á–∞–µ—Ç GPS-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Firebase Realtime Database
   - –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å (–µ–¥–µ—Ç, –∂–¥—ë—Ç, —Å–≤–æ–±–æ–¥–µ–Ω)

2. **Firebase:**
   - –•—Ä–∞–Ω–∏—Ç —Ç–µ–∫—É—â–µ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤—Å–µ—Ö –≤–æ–¥–∏—Ç–µ–ª–µ–π
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

3. **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∞—Å—Å–∞–∂–∏—Ä–∞:**
   - –°–ª—É—à–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Firebase
   - –û–±–Ω–æ–≤–ª—è–µ—Ç –º–∞—Ä–∫–µ—Ä –≤–æ–¥–∏—Ç–µ–ª—è –Ω–∞ –∫–∞—Ä—Ç–µ
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –≤–æ–¥–∏—Ç–µ–ª—è
   - –û–±–Ω–æ–≤–ª—è–µ—Ç ETA (–≤—Ä–µ–º—è –ø—Ä–∏–±—ã—Ç–∏—è)

---

## üì¶ –£–°–¢–ê–ù–û–í–ö–ê –ü–ê–ö–ï–¢–û–í

### –®–∞–≥ 1: –î–æ–±–∞–≤—å—Ç–µ –≤ `pubspec.yaml`

```yaml
dependencies:
  # ‚úÖ –£–ñ–ï –ï–°–¢–¨ –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ:
  firebase_core: ^2.24.2
  firebase_auth: ^4.15.3
  cloud_firestore: ^4.13.6
  
  # ‚ûï –î–û–ë–ê–í–¨–¢–ï –≠–¢–û:
  firebase_database: ^10.3.8  # Realtime Database (–¥–ª—è GPS)
  geolocator: ^10.1.0         # GPS-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
  geocoding: ^2.1.1           # –ê–¥—Ä–µ—Å–∞ –∏–∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
  
  # –ï–°–õ–ò –í–´–ë–ï–†–ï–¢–ï GOOGLE MAPS:
  google_maps_flutter: ^2.5.0
  
  # –ï–°–õ–ò –û–°–¢–ê–ù–ï–¢–ï–°–¨ –ù–ê YANDEX:
  # yandex_mapkit: ^4.1.0  # (—É–∂–µ –µ—Å—Ç—å)
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç—ã

```bash
flutter pub add firebase_database geolocator geocoding
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

#### Android (`android/app/src/main/AndroidManifest.xml`):

```xml
<!-- ‚úÖ –£–ñ–ï –ï–°–¢–¨ —É –≤–∞—Å -->
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

<!-- ‚ûï –î–û–ë–ê–í–¨–¢–ï –î–õ–Ø –§–û–ù–û–í–û–ì–û –û–¢–°–õ–ï–ñ–ò–í–ê–ù–ò–Ø -->
<uses-permission android:name="android.permission.ACCESS_BACKGROUND_LOCATION" />
<uses-permission android:name="android.permission.FOREGROUND_SERVICE" />
```

#### iOS (`ios/Runner/Info.plist`):

```xml
<key>NSLocationWhenInUseUsageDescription</key>
<string>–ù—É–∂–Ω–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∞—à–µ–≥–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –∫–∞—Ä—Ç–µ</string>

<key>NSLocationAlwaysUsageDescription</key>
<string>–ù—É–∂–Ω–æ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤–∞—à–µ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ –≤–æ –≤—Ä–µ–º—è –ø–æ–µ–∑–¥–∫–∏</string>

<key>NSLocationAlwaysAndWhenInUseUsageDescription</key>
<string>–ù—É–∂–Ω–æ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤–∞—à–µ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞</string>
```

---

## üíª –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø

### 1Ô∏è‚É£ –°–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤–æ–¥–∏—Ç–µ–ª—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª: `lib/services/driver_tracking_service.dart`

```dart
import 'dart:async';
import 'package:firebase_database/firebase_database.dart';
import 'package:geolocator/geolocator.dart';

class DriverTrackingService {
  final FirebaseDatabase _database = FirebaseDatabase.instance;
  Timer? _locationTimer;
  
  /// –ù–∞—á–∞—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª—è (–≤—ã–∑—ã–≤–∞—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –í–û–î–ò–¢–ï–õ–Ø)
  Future<void> startTracking(String driverId) async {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
    bool serviceEnabled = await Geolocator.isLocationServiceEnabled();
    if (!serviceEnabled) {
      throw Exception('GPS –æ—Ç–∫–ª—é—á–µ–Ω');
    }

    LocationPermission permission = await Geolocator.checkPermission();
    if (permission == LocationPermission.denied) {
      permission = await Geolocator.requestPermission();
      if (permission == LocationPermission.denied) {
        throw Exception('–ù–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ GPS');
      }
    }

    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
    _locationTimer = Timer.periodic(
      const Duration(seconds: 10),
      (timer) async {
        await _updateDriverLocation(driverId);
      },
    );

    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å—Ä–∞–∑—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
    await _updateDriverLocation(driverId);
  }

  /// –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª—è
  Future<void> _updateDriverLocation(String driverId) async {
    try {
      Position position = await Geolocator.getCurrentPosition(
        desiredAccuracy: LocationAccuracy.high,
      );

      await _database.ref('drivers/$driverId/location').set({
        'latitude': position.latitude,
        'longitude': position.longitude,
        'speed': position.speed,
        'heading': position.heading,
        'accuracy': position.accuracy,
        'timestamp': ServerValue.timestamp,
      });

      print('üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–æ: ${position.latitude}, ${position.longitude}');
    } catch (e) {
      print('‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è: $e');
    }
  }

  /// –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ
  void stopTracking(String driverId) {
    _locationTimer?.cancel();
    _database.ref('drivers/$driverId/location').remove();
    print('üõë –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');
  }

  /// –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤–æ–¥–∏—Ç–µ–ª—è
  Future<void> updateDriverStatus(
    String driverId, {
    required String status, // "free", "on_trip", "offline"
    String? currentTripId,
  }) async {
    await _database.ref('drivers/$driverId').update({
      'status': status,
      'currentTripId': currentTripId,
      'lastUpdated': ServerValue.timestamp,
    });
  }

  /// –°–ª—É—à–∞—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª—è (–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ü–ê–°–°–ê–ñ–ò–†–ê)
  Stream<Map<String, dynamic>> watchDriverLocation(String driverId) {
    return _database
        .ref('drivers/$driverId/location')
        .onValue
        .map((event) {
      if (event.snapshot.value == null) {
        return <String, dynamic>{};
      }
      return Map<String, dynamic>.from(event.snapshot.value as Map);
    });
  }

  /// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–æ–¥–∏—Ç–µ–ª–µ–π —Ä—è–¥–æ–º
  Stream<List<Map<String, dynamic>>> watchNearbyDrivers({
    required double userLatitude,
    required double userLongitude,
    double radiusInKm = 5.0,
  }) {
    return _database
        .ref('drivers')
        .onValue
        .map((event) {
      if (event.snapshot.value == null) return [];

      final driversMap = Map<String, dynamic>.from(event.snapshot.value as Map);
      final nearbyDrivers = <Map<String, dynamic>>[];

      driversMap.forEach((driverId, driverData) {
        final data = Map<String, dynamic>.from(driverData);
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
        if (data['status'] != 'free') return;
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
        if (data['location'] == null) return;
        
        final location = Map<String, dynamic>.from(data['location']);
        final driverLat = location['latitude'] as double;
        final driverLng = location['longitude'] as double;

        // –í—ã—á–∏—Å–ª—è–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
        final distance = Geolocator.distanceBetween(
          userLatitude,
          userLongitude,
          driverLat,
          driverLng,
        ) / 1000; // –≤ –∫–∏–ª–æ–º–µ—Ç—Ä–∞—Ö

        if (distance <= radiusInKm) {
          nearbyDrivers.add({
            'driverId': driverId,
            'latitude': driverLat,
            'longitude': driverLng,
            'distance': distance,
            ...data,
          });
        }
      });

      // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é
      nearbyDrivers.sort((a, b) => 
        (a['distance'] as double).compareTo(b['distance'] as double)
      );

      return nearbyDrivers;
    });
  }
}
```

---

### 2Ô∏è‚É£ –≠–∫—Ä–∞–Ω –¥–ª—è –í–û–î–ò–¢–ï–õ–Ø (—Å—Ç–∞—Ä—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è)

```dart
import 'package:flutter/material.dart';
import 'package:time_to_travel/services/driver_tracking_service.dart';

class DriverModeScreen extends StatefulWidget {
  final String driverId;

  const DriverModeScreen({required this.driverId});

  @override
  _DriverModeScreenState createState() => _DriverModeScreenState();
}

class _DriverModeScreenState extends State<DriverModeScreen> {
  final DriverTrackingService _trackingService = DriverTrackingService();
  bool _isTracking = false;

  @override
  void dispose() {
    if (_isTracking) {
      _trackingService.stopTracking(widget.driverId);
    }
    super.dispose();
  }

  Future<void> _toggleTracking() async {
    if (_isTracking) {
      // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ
      _trackingService.stopTracking(widget.driverId);
      await _trackingService.updateDriverStatus(
        widget.driverId,
        status: 'offline',
      );
      setState(() => _isTracking = false);
    } else {
      // –ù–∞—á–∞—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ
      try {
        await _trackingService.startTracking(widget.driverId);
        await _trackingService.updateDriverStatus(
          widget.driverId,
          status: 'free',
        );
        setState(() => _isTracking = true);
      } catch (e) {
        ScaffoldMessenger.of(context).showSnackBar(
          SnackBar(content: Text('–û—à–∏–±–∫–∞: $e')),
        );
      }
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text('–†–µ–∂–∏–º –≤–æ–¥–∏—Ç–µ–ª—è')),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Icon(
              _isTracking ? Icons.gps_fixed : Icons.gps_off,
              size: 100,
              color: _isTracking ? Colors.green : Colors.grey,
            ),
            SizedBox(height: 20),
            Text(
              _isTracking ? '–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ' : '–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—ã–∫–ª—é—á–µ–Ω–æ',
              style: TextStyle(fontSize: 20),
            ),
            SizedBox(height: 40),
            ElevatedButton(
              onPressed: _toggleTracking,
              child: Text(_isTracking ? '–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å' : '–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É'),
              style: ElevatedButton.styleFrom(
                padding: EdgeInsets.symmetric(horizontal: 40, vertical: 15),
                backgroundColor: _isTracking ? Colors.red : Colors.green,
              ),
            ),
          ],
        ),
      ),
    );
  }
}
```

---

### 3Ô∏è‚É£ –≠–∫—Ä–∞–Ω –¥–ª—è –ü–ê–°–°–ê–ñ–ò–†–ê (–ø–æ–∫–∞–∑–∞—Ç—å –≤–æ–¥–∏—Ç–µ–ª—è –Ω–∞ –∫–∞—Ä—Ç–µ)

#### –í–∞—Ä–∏–∞–Ω—Ç A: –° Yandex Maps

```dart
import 'package:flutter/material.dart';
import 'package:yandex_mapkit/yandex_mapkit.dart';
import 'package:time_to_travel/services/driver_tracking_service.dart';

class TrackDriverScreen extends StatefulWidget {
  final String driverId;

  const TrackDriverScreen({required this.driverId});

  @override
  _TrackDriverScreenState createState() => _TrackDriverScreenState();
}

class _TrackDriverScreenState extends State<TrackDriverScreen> {
  final DriverTrackingService _trackingService = DriverTrackingService();
  YandexMapController? _mapController;
  PlacemarkMapObject? _driverMarker;

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text('–í–æ–¥–∏—Ç–µ–ª—å –µ–¥–µ—Ç')),
      body: StreamBuilder<Map<String, dynamic>>(
        stream: _trackingService.watchDriverLocation(widget.driverId),
        builder: (context, snapshot) {
          if (!snapshot.hasData || snapshot.data!.isEmpty) {
            return Center(child: Text('–í–æ–¥–∏—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω'));
          }

          final location = snapshot.data!;
          final driverPoint = Point(
            latitude: location['latitude'],
            longitude: location['longitude'],
          );

          // –û–±–Ω–æ–≤–ª—è–µ–º –º–∞—Ä–∫–µ—Ä –≤–æ–¥–∏—Ç–µ–ª—è
          _driverMarker = PlacemarkMapObject(
            mapId: MapObjectId('driver'),
            point: driverPoint,
            icon: PlacemarkIcon.single(
              PlacemarkIconStyle(
                image: BitmapDescriptor.fromAssetImage('assets/images/taxi_marker.png'),
                scale: 0.5,
              ),
            ),
          );

          return YandexMap(
            mapObjects: [_driverMarker!],
            onMapCreated: (controller) {
              _mapController = controller;
              _mapController!.moveCamera(
                CameraUpdate.newCameraPosition(
                  CameraPosition(target: driverPoint, zoom: 15),
                ),
              );
            },
          );
        },
      ),
    );
  }
}
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –° Google Maps

```dart
import 'package:flutter/material.dart';
import 'package:google_maps_flutter/google_maps_flutter.dart';
import 'package:time_to_travel/services/driver_tracking_service.dart';

class TrackDriverScreen extends StatefulWidget {
  final String driverId;

  const TrackDriverScreen({required this.driverId});

  @override
  _TrackDriverScreenState createState() => _TrackDriverScreenState();
}

class _TrackDriverScreenState extends State<TrackDriverScreen> {
  final DriverTrackingService _trackingService = DriverTrackingService();
  GoogleMapController? _mapController;
  Marker? _driverMarker;

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text('–í–æ–¥–∏—Ç–µ–ª—å –µ–¥–µ—Ç')),
      body: StreamBuilder<Map<String, dynamic>>(
        stream: _trackingService.watchDriverLocation(widget.driverId),
        builder: (context, snapshot) {
          if (!snapshot.hasData || snapshot.data!.isEmpty) {
            return Center(child: Text('–í–æ–¥–∏—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω'));
          }

          final location = snapshot.data!;
          final driverPosition = LatLng(
            location['latitude'],
            location['longitude'],
          );

          // –û–±–Ω–æ–≤–ª—è–µ–º –º–∞—Ä–∫–µ—Ä –≤–æ–¥–∏—Ç–µ–ª—è
          _driverMarker = Marker(
            markerId: MarkerId('driver'),
            position: driverPosition,
            icon: BitmapDescriptor.defaultMarkerWithHue(BitmapDescriptor.hueGreen),
            infoWindow: InfoWindow(
              title: '–í–∞—à –≤–æ–¥–∏—Ç–µ–ª—å',
              snippet: '–ï–¥–µ—Ç –∫ –≤–∞–º',
            ),
          );

          // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –∫–∞–º–µ—Ä—É –∫ –≤–æ–¥–∏—Ç–µ–ª—é
          _mapController?.animateCamera(
            CameraUpdate.newLatLng(driverPosition),
          );

          return GoogleMap(
            initialCameraPosition: CameraPosition(
              target: driverPosition,
              zoom: 15,
            ),
            markers: {_driverMarker!},
            myLocationEnabled: true,
            onMapCreated: (controller) {
              _mapController = controller;
            },
          );
        },
      ),
    );
  }
}
```

---

## üåü –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò

### 1Ô∏è‚É£ –ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –≤–æ–¥–∏—Ç–µ–ª—è

```dart
StreamBuilder<Map<String, dynamic>>(
  stream: _trackingService.watchDriverLocation(driverId),
  builder: (context, snapshot) {
    if (!snapshot.hasData) return SizedBox();
    
    final location = snapshot.data!;
    final distance = Geolocator.distanceBetween(
      userLat,
      userLng,
      location['latitude'],
      location['longitude'],
    ) / 1000; // –≤ –∫–º

    return Text('–í–æ–¥–∏—Ç–µ–ª—å –≤ ${distance.toStringAsFixed(1)} –∫–º –æ—Ç –≤–∞—Å');
  },
);
```

### 2Ô∏è‚É£ –í—ã—á–∏—Å–ª–∏—Ç—å –≤—Ä–µ–º—è –ø—Ä–∏–±—ã—Ç–∏—è (ETA)

```dart
double distance = 5.2; // –∫–º
double averageSpeed = 40.0; // –∫–º/—á
double eta = (distance / averageSpeed) * 60; // –º–∏–Ω—É—Ç—ã

print('–í–æ–¥–∏—Ç–µ–ª—å –ø—Ä–∏–µ–¥–µ—Ç —á–µ—Ä–µ–∑ ${eta.toInt()} –º–∏–Ω—É—Ç');
```

### 3Ô∏è‚É£ –ü–æ–∫–∞–∑–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç –≤–æ–¥–∏—Ç–µ–ª—è –¥–æ –ø–∞—Å—Å–∞–∂–∏—Ä–∞

```dart
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Google Directions API –∏–ª–∏ Yandex Routing
// –ü–æ–ª—É—á–∏—Ç–µ polyline (–ª–∏–Ω–∏—é –º–∞—Ä—à—Ä—É—Ç–∞)
// –ù–∞—Ä–∏—Å—É–π—Ç–µ –Ω–∞ –∫–∞—Ä—Ç–µ
```

---

## üÜö –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–´–ï –†–ï–®–ï–ù–ò–Ø

### 1Ô∏è‚É£ **Google Cloud Fleet Tracking** (–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)

**–ß—Ç–æ —ç—Ç–æ:**
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å Google –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ñ–ª–æ—Ç–∞ —Ç–∞–∫—Å–∏
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø–µ—Ä–µ–≤–æ–∑–æ–∫
- –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ ETA

**–°—Ç–æ–∏–º–æ—Å—Ç—å:**
- $0.05 –∑–∞ 1000 –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è
- –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–æ 100,000 –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π/–º–µ—Å—è—Ü

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
https://developers.google.com/maps/documentation/transportation-logistics

---

### 2Ô∏è‚É£ **Yandex Fleet API** (–∞–Ω–∞–ª–æ–≥ –æ—Ç –Ø–Ω–¥–µ–∫—Å–∞)

**–ß—Ç–æ —ç—Ç–æ:**
- API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä–∫–æ–º —Ç–∞–∫—Å–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ø–Ω–¥–µ–∫—Å.–¢–∞–∫—Å–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤

**–°—Ç–æ–∏–º–æ—Å—Ç—å:**
- –ü–æ –∑–∞–ø—Ä–æ—Å—É (–∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –ø—Ä–æ–¥—É–∫—Ç)

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
https://yandex.ru/dev/fleet/

---

### 3Ô∏è‚É£ **–°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –Ω–∞ Firebase** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —Å—Ç–∞—Ä—Ç–∞)

**–ß—Ç–æ —ç—Ç–æ:**
- Firebase Realtime Database + Geolocator
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –¥–∞–Ω–Ω—ã–º–∏
- –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–ª—è –º–∞–ª—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

**–°—Ç–æ–∏–º–æ—Å—Ç—å:**
- –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–æ 10GB —Ç—Ä–∞—Ñ–∏–∫–∞
- $1/GB –ø–æ—Å–ª–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (—É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å Firebase!)
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏ (Yandex/Google)
- ‚úÖ –ù–∏–∑–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å

---

## üí∞ –°–¢–û–ò–ú–û–°–¢–¨ –û–¢–°–õ–ï–ñ–ò–í–ê–ù–ò–Ø

### –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á—ë—Ç–∞ –¥–ª—è 100 –≤–æ–¥–∏—Ç–µ–ª–µ–π:

**–£—Å–ª–æ–≤–∏—è:**
- 100 –≤–æ–¥–∏—Ç–µ–ª–µ–π —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ 8 —á–∞—Å–æ–≤/–¥–µ–Ω—å
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ GPS –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
- 30 –¥–Ω–µ–π –≤ –º–µ—Å—è—Ü

**–†–∞—Å—á—ë—Ç:**
```
–û–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ —á–∞—Å = 3600 —Å–µ–∫ / 10 —Å–µ–∫ = 360 –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
–û–±–Ω–æ–≤–ª–µ–Ω–∏–π –∑–∞ 8 —á–∞—Å–æ–≤ = 360 √ó 8 = 2,880 –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
–û–±–Ω–æ–≤–ª–µ–Ω–∏–π –∑–∞ –¥–µ–Ω—å (100 –≤–æ–¥–∏—Ç–µ–ª–µ–π) = 2,880 √ó 100 = 288,000
–û–±–Ω–æ–≤–ª–µ–Ω–∏–π –∑–∞ –º–µ—Å—è—Ü = 288,000 √ó 30 = 8,640,000
```

**–°—Ç–æ–∏–º–æ—Å—Ç—å Firebase:**
- –¢—Ä–∞—Ñ–∏–∫: ~86 MB (–ø—Ä–∏ 10 –±–∞–π—Ç –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ!** (–≤ —Ä–∞–º–∫–∞—Ö 10GB)

**–°—Ç–æ–∏–º–æ—Å—Ç—å Google Fleet Tracking:**
- 8,640,000 –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- 100,000 –±–µ—Å–ø–ª–∞—Ç–Ω–æ
- (8,640,000 - 100,000) / 1000 √ó $0.05 = **$427/–º–µ—Å—è—Ü**

**–í—ã–≤–æ–¥:** Firebase **–≤ 427 —Ä–∞–∑ –¥–µ—à–µ–≤–ª–µ** Google Fleet Tracking! üéâ

---

## ‚úÖ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

### –î–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (Time to Travel):

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:**
1. ‚úÖ **Firebase Realtime Database** (—É–∂–µ –µ—Å—Ç—å!)
2. ‚úÖ **Geolocator** (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–∞–∫–µ—Ç)
3. ‚úÖ **Yandex Maps** (–µ—Å–ª–∏ –ø–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å) –ò–õ–ò **Google Maps** (–µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω–æ)

**–ü–æ—á–µ–º—É:**
- –£–∂–µ –µ—Å—Ç—å Firebase –≤ –ø—Ä–æ–µ–∫—Ç–µ
- –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ
- –†–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ —Å Yandex –∏ Google –∫–∞—Ä—Ç–∞–º–∏

---

## üìù –ö–û–ù–¢–†–û–õ–¨–ù–´–ô –°–ü–ò–°–û–ö

- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `firebase_database`, `geolocator`, `geocoding`
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è GPS –≤ AndroidManifest.xml –∏ Info.plist
- [ ] –°–æ–∑–¥–∞—Ç—å `DriverTrackingService`
- [ ] –°–æ–∑–¥–∞—Ç—å —ç–∫—Ä–∞–Ω –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª—è (—Å—Ç–∞—Ä—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è)
- [ ] –°–æ–∑–¥–∞—Ç—å —ç–∫—Ä–∞–Ω –¥–ª—è –ø–∞—Å—Å–∞–∂–∏—Ä–∞ (–ø–æ–∫–∞–∑–∞—Ç—å –≤–æ–¥–∏—Ç–µ–ª—è –Ω–∞ –∫–∞—Ä—Ç–µ)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –¥–≤—É—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Firebase Realtime Database Rules (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)

---

## üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ (Firebase Rules)

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ Firebase:

```json
{
  "rules": {
    "drivers": {
      "$driverId": {
        ".read": true,  // –í—Å–µ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª–µ–π
        ".write": "$driverId == auth.uid"  // –¢–æ–ª—å–∫–æ —Å–∞–º –≤–æ–¥–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å
      }
    }
  }
}
```

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–†–µ—à–∏—Ç–µ:** Yandex –∏–ª–∏ Google Maps?
2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç—ã:** `firebase_database`, `geolocator`
3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥** `DriverTrackingService` (–≤—ã—à–µ)
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ** –Ω–∞ –¥–≤—É—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

**–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π?** –î–∞–π—Ç–µ –∑–Ω–∞—Ç—å! üéØ
