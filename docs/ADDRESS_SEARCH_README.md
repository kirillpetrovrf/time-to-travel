# Address Search Demo

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –ø–æ–∏—Å–∫–∞ –∞–¥—Ä–µ—Å–æ–≤ —Å –∞–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ –æ—Ç Yandex Maps API.

## –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ

‚úÖ **–ù–æ–≤—ã–π —ç–∫—Ä–∞–Ω –ø–æ–∏—Å–∫–∞ –∞–¥—Ä–µ—Å–æ–≤** (`AddressSearchScreenSimple`)
- –î–≤–∞ –ø–æ–ª—è –≤–≤–æ–¥–∞: "–û—Ç–∫—É–¥–∞" –∏ "–ö—É–¥–∞"
- –ê–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∏ –æ—Ç Yandex Maps API –ø—Ä–∏ –≤–≤–æ–¥–µ (–æ—Ç 3 —Å–∏–º–≤–æ–ª–æ–≤)
- –í—ã–±–æ—Ä –∞–¥—Ä–µ—Å–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ –ø–æ–¥—Å–∫–∞–∑–æ–∫
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏ –æ–ø–∏—Å–∞–Ω–∏—è –∞–¥—Ä–µ—Å–∞
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞

‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—É –∂–µ —Å–∏—Å—Ç–µ–º—É –ø–æ–∏—Å–∫–∞ —á—Ç–æ –∏ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
- `SearchManager` –æ—Ç Yandex Maps
- `SearchSuggestSession` –¥–ª—è –∞–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–æ–∫ 
- `SuggestOptions` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ–∏—Å–∫–∞
- Debounce –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π

‚úÖ **–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
- –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –º–æ–¥–µ–ª–µ–π –∏ —ç–∫—Ä–∞–Ω–æ–≤
- –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç ThemeManager
- –ì–æ—Ç–æ–≤–∞ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
lib/
‚îú‚îÄ‚îÄ demo_main.dart                                          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –¥–µ–º–æ
‚îú‚îÄ‚îÄ features/address_search/
‚îÇ   ‚îú‚îÄ‚îÄ screens/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ address_search_screen.dart                      # –ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å ThemeManager
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ address_search_screen_simple.dart               # –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è –¥–µ–º–æ
‚îÇ   ‚îú‚îÄ‚îÄ widgets/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ address_input_field.dart                        # –í–∏–¥–∂–µ—Ç –ø–æ–ª—è –≤–≤–æ–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ models/
‚îÇ       ‚îî‚îÄ‚îÄ address_suggestion.dart                         # –ú–æ–¥–µ–ª—å –∞–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∏
‚îî‚îÄ‚îÄ demo_screen.dart                                        # –≠–∫—Ä–∞–Ω –æ–ø–∏—Å–∞–Ω–∏—è –¥–µ–º–æ
```

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–º–æ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ—Å—Ç–æ–µ –¥–µ–º–æ
```bash
cd /Users/kirillpetrov/Projects/time-to-travel
flutter run lib/demo_main.dart
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –í –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
–î–æ–±–∞–≤–∏—Ç—å –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```dart
import 'features/address_search/screens/address_search_screen.dart';

// –í –ª—é–±–æ–º –º–µ—Å—Ç–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:
Navigator.push(context, 
  CupertinoPageRoute(builder: (_) => const AddressSearchScreen())
);
```

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –ê–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∏
- –ü–æ–∏—Å–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤–≤–æ–¥–∞ 3+ —Å–∏–º–≤–æ–ª–æ–≤
- Debounce 300ms –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –î–æ 7 –ø–æ–¥—Å–∫–∞–∑–æ–∫ –≤ —Å–ø–∏—Å–∫–µ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ geo, —Ç–∞–∫ –∏ biz –æ–±—ä–µ–∫—Ç–æ–≤

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤
–ü—Ä–∏ –≤—ã–±–æ—Ä–µ –∞–¥—Ä–µ—Å–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç `SavedAddress`:
```dart
SavedAddress(
  latitude: 59.939095,
  longitude: 30.315868, 
  address: "–ù–µ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç, 1, –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥",
  description: "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥, –†–æ—Å—Å–∏—è"
)
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
–í –º–µ—Ç–æ–¥–µ `_saveAddressToDatabase()` –µ—Å—Ç—å –∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:
```dart
// TODO: –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
if (isFromField) {
  DatabaseService.saveFromAddress(address);
} else {
  DatabaseService.saveToAddress(address);
}
```

## API –∫–ª—é—á

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è API –∫–ª—é—á –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```
2f1d6a75-b751-4077-b305-c6abaea0b542
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏:
- `‚úÖ [ADDRESS_SEARCH]` - —É—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `‚ùå [ADDRESS_SEARCH]` - –æ—à–∏–±–∫–∏
- `üìç [ADDRESS_SEARCH]` - –≤—ã–±–æ—Ä –∞–¥—Ä–µ—Å–æ–≤
- `üíæ [ADDRESS_SEARCH]` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ –ø–æ–∏—Å–∫—É –≤ `address_autocomplete_field.dart`:

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: `SearchFactory.instance.createSearchManager()`
2. **–ê–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∏**: `SearchSuggestSession.suggest()` —Å BoundingBox
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤**: `SearchSuggestSessionSuggestListener`  
4. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ `title.text + subtitle.text`
5. **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã**: –ò–∑ `item.center` (Point)

–≠—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –ø–æ–∏—Å–∫–∞ –∞–¥—Ä–µ—Å–æ–≤ –≥–æ—Ç–æ–≤–∞—è –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ