# Инструкции по тестированию системы обучения

## Быстрый тест

### 1. Сброс настроек для тестирования
```bash
# В эмуляторе/устройстве очистите данные приложения
# Или используйте debug функцию сброса
```

### 2. Запуск приложения
1. Откройте приложение на чистом устройстве/эмуляторе
2. Обучение должно запуститься автоматически
3. Следуйте подсказкам по порядку

### 3. Проверка каждого шага

#### Шаг 1: Поле "Откуда"
- ✅ Подсветка поля ввода адреса отправления
- ✅ Отображение подсказки с описанием
- ✅ Возможность тапнуть "Далее" или пропустить

#### Шаг 2: Поле "Куда"  
- ✅ Подсветка поля ввода адреса назначения
- ✅ Отображение подсказки с описанием
- ✅ Переход к следующему шагу

#### Шаг 3: Кнопка "Заказать"
- ✅ Подсветка кнопки заказа
- ✅ Объяснение функции кнопки
- ✅ Корректный переход

#### Шаг 4: Кнопка геолокации
- ✅ Подсветка кнопки определения местоположения
- ✅ Объяснение функции
- ✅ Возможность продолжить

#### Шаг 5: Карта (завершение)
- ✅ Подсветка области карты
- ✅ Финальное объяснение
- ✅ Завершение обучения

## Тестовые сценарии

### Сценарий 1: Первый запуск
```
1. Чистая установка приложения
2. Первый запуск
3. Обучение должно стартовать автоматически
4. Пользователь проходит все шаги
5. Обучение завершается
6. При повторном запуске обучение НЕ появляется
```

### Сценарий 2: Пропуск обучения
```
1. Запуск обучения
2. Тап по "Пропустить" на любом шаге
3. Обучение должно завершиться
4. Состояние сохраняется как "пройденное"
5. При повторном запуске обучение НЕ появляется
```

### Сценарий 3: Прерывание обучения
```
1. Запуск обучения
2. Выход из приложения на середине
3. Возврат в приложение
4. Обучение должно запуститься снова
```

## Debug функции для тестирования

### Сброс обучения (добавить временно в код)

В MainScreen добавьте debug кнопку:

```dart
FloatingActionButton(
  onPressed: () async {
    await TutorialManager.resetTutorial();
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(content: Text('Tutorial reset! Restart app to see it again'))
    );
  },
  child: Icon(Icons.refresh),
  backgroundColor: Colors.red,
)
```

### Принудительный запуск

```dart
// В любом месте добавьте
ElevatedButton(
  onPressed: () => TutorialManager.startTutorial(context),
  child: Text('Start Tutorial'),
)
```

### Проверка состояния

```dart
ElevatedButton(
  onPressed: () async {
    final shouldShow = await TutorialManager.shouldShowTutorial();
    print('Should show tutorial: $shouldShow');
  },
  child: Text('Check Tutorial State'),
)
```

## Проверка на разных устройствах

### iOS
- [ ] iPhone SE (маленький экран)
- [ ] iPhone 14 (стандартный)  
- [ ] iPhone 14 Plus (большой экран)
- [ ] iPad (планшет)

### Android
- [ ] Маленький экран (5")
- [ ] Средний экран (6") 
- [ ] Большой экран (6.7"+)
- [ ] Планшет

## Проверка адаптивности

### Ориентация экрана
- [ ] Portrait режим - обучение работает
- [ ] Landscape режим - обучение адаптируется
- [ ] Поворот во время обучения - состояние сохраняется

### Размеры текста
- [ ] Маленький текст системы
- [ ] Средний текст
- [ ] Большой текст (Accessibility)
- [ ] Очень большой текст

## Производительность

### Время запуска
- [ ] Обычный запуск: < 2 сек
- [ ] Запуск с обучением: < 3 сек
- [ ] Переход между шагами: мгновенно
- [ ] Завершение обучения: < 1 сек

### Память
- [ ] Использование RAM не увеличивается критично
- [ ] Нет утечек памяти при прохождении
- [ ] Корректная очистка ресурсов

## Автоматизированные тесты

### Widget тесты

```dart
testWidgets('Tutorial starts on first launch', (tester) async {
  // Mock SharedPreferences to return false for tutorial_completed
  
  await tester.pumpWidget(MyApp());
  await tester.pumpAndSettle();
  
  // Verify ShowCaseWidget is present
  expect(find.byType(ShowCaseWidget), findsOneWidget);
  
  // Verify first tutorial step is shown
  expect(find.text('Введите адрес откуда начинается поездка'), findsOneWidget);
});

testWidgets('Tutorial does not start on second launch', (tester) async {
  // Mock SharedPreferences to return true for tutorial_completed
  
  await tester.pumpWidget(MyApp());
  await tester.pumpAndSettle();
  
  // Verify tutorial is not shown
  expect(find.text('Введите адрес откуда начинается поездка'), findsNothing);
});
```

### Integration тесты

```dart
group('Tutorial Integration Tests', () {
  testWidgets('Complete tutorial flow', (tester) async {
    await tester.pumpWidget(MyApp());
    
    // Step 1: From field
    expect(find.text('Введите адрес откуда начинается поездка'), findsOneWidget);
    await tester.tap(find.text('Далее'));
    await tester.pumpAndSettle();
    
    // Step 2: To field  
    expect(find.text('Введите адрес куда направляется поездка'), findsOneWidget);
    await tester.tap(find.text('Далее'));
    await tester.pumpAndSettle();
    
    // Continue for all steps...
  });
});
```

## Чек-лист перед релизом

### Функциональность
- [ ] Обучение запускается при первом входе
- [ ] Все 5 шагов проходятся корректно
- [ ] Можно пропустить обучение
- [ ] После прохождения больше не показывается
- [ ] Состояние сохраняется при перезапуске

### UI/UX
- [ ] Подсветка элементов четкая и видимая
- [ ] Тексты читаемые и понятные
- [ ] Анимации плавные
- [ ] Кнопки легко нажимаются
- [ ] Интерфейс не ломается

### Совместимость
- [ ] iOS 12+ работает
- [ ] Android API 21+ работает
- [ ] Разные размеры экранов поддерживаются
- [ ] Темная и светлая темы корректны

### Производительность
- [ ] Нет задержек при запуске
- [ ] Плавные переходы между шагами
- [ ] Нет утечек памяти
- [ ] Стабильная работа

## Известные баги (если есть)

1. **Поворот экрана во время обучения** - может сбросить позицию подсветки
   - Решение: Заблокировать поворот на время обучения
   
2. **Клавиатура перекрывает подсказку** - на маленьких экранах
   - Решение: Автоскролл или изменение позиции

3. **Анимация карты конфликтует** - редко может сбить фокус  
   - Решение: Временная приостановка анимаций карты

## Контакты

При обнаружении проблем обращайтесь к разработчику системы обучения.

**Важно**: Перед релизом обязательно протестируйте на реальных устройствах с чистой установкой!