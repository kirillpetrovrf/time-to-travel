# –ö–ü–ü –£—Å–ø–µ–Ω–∫–∞ - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –ø–æ–∏—Å–∫–µ "–ö–ü–ü –£—Å–ø–µ–Ω–∫–∞" —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã **—Å—Ç–∞—Ä–æ–π –∑–∞–∫—Ä—ã—Ç–æ–π –ö–ü–ü**, –∫–æ—Ç–æ—Ä–∞—è –±–æ–ª—å—à–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

### –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å—Ç–∞—Ä–æ–π –∑–∞–∫—Ä—ã—Ç–æ–π –ö–ü–ü (–ù–ï –†–ê–ë–û–ß–ê–Ø):
- **–®–∏—Ä–æ—Ç–∞**: 47.697816
- **–î–æ–ª–≥–æ—Ç–∞**: 38.666213

### –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ä–∞–±–æ—á–µ–π –ö–ü–ü –ê–≤–∏–ª–æ-–£—Å–ø–µ–Ω–∫–∞:
- **–®–∏—Ä–æ—Ç–∞**: 47.699184
- **–î–æ–ª–≥–æ—Ç–∞**: 38.679496

## –†–µ—à–µ–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö, –≥–¥–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —Ç–æ—á–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∞.

### –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

#### 1. `lib/widgets/simple_address_field.dart`
- –§—É–Ω–∫—Ü–∏—è `_correctUspenkaCoordinates(String address, Point? coordinates)`
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ `_selectSuggestion()` –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –∞–¥—Ä–µ—Å–∞ –∏–∑ –ø–æ–¥—Å–∫–∞–∑–æ–∫
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ `_searchForCoordinates()` –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –ø–æ –∞–¥—Ä–µ—Å—É

#### 2. `lib/managers/route_points_manager.dart`
- –§—É–Ω–∫—Ü–∏—è `_correctUspenkaCoordinatesForManager(mapkit.Point point)`
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ `setPoint()` –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —Ç–æ—á–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ
- –ü–æ–∫—Ä—ã–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å –∫–∞—Ä—Ç–æ–π –≤ `custom_route_with_map_screen.dart`

#### 3. `lib/managers/route_points_manager_safe.dart`
- –§—É–Ω–∫—Ü–∏—è `_correctUspenkaCoordinatesSafe(Point point)`
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ `setPoint()` –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —Ç–æ—á–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Ç–æ—á–µ–∫

## –õ–æ–≥–∏–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏

```dart
// –†–∞–¥–∏—É—Å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –±–ª–∏–∑–æ—Å—Ç–∏ –∫ —Å—Ç–∞—Ä–æ–π –ö–ü–ü (~3–∫–º –≤ –≥—Ä–∞–¥—É—Å–∞—Ö)
const double _uspenkaRadius = 0.03;

// –ï—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ä–∞–¥–∏—É—Å–µ 0.03¬∞ –æ—Ç —Å—Ç–∞—Ä–æ–π –ö–ü–ü,
// –æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ä–∞–±–æ—á–µ–π –ö–ü–ü
Point _correctUspenkaCoordinates(Point point) {
  final latDiff = (point.latitude - _oldUspenkaLat).abs();
  final lngDiff = (point.longitude - _oldUspenkaLng).abs();
  
  if (latDiff < _uspenkaRadius && lngDiff < _uspenkaRadius) {
    return Point(latitude: _workingUspenkaLat, longitude: _workingUspenkaLng);
  }
  return point;
}
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª—å –≤—ã–≤–æ–¥–∏—Ç—Å—è:
```
üîÑ [ROUTE_MANAGER] –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å—Ç–∞—Ä–æ–π –∑–∞–∫—Ä—ã—Ç–æ–π –ö–ü–ü –£—Å–ø–µ–Ω–∫–∞!
   –°—Ç–∞—Ä—ã–µ: 47.697816, 38.666213
   –ù–æ–≤—ã–µ (—Ä–∞–±–æ—á–∞—è –ö–ü–ü): 47.699184, 38.679496
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ä—à—Ä—É—Ç
3. –í –ø–æ–ª–µ –∞–¥—Ä–µ—Å–∞ –≤–≤–µ–¥–∏—Ç–µ "–ö–ü–ü –£—Å–ø–µ–Ω–∫–∞" –∏–ª–∏ "–ê–≤–∏–ª–æ-–£—Å–ø–µ–Ω–∫–∞"
4. –í—ã–±–µ—Ä–∏—Ç–µ –∞–¥—Ä–µ—Å –∏–∑ –ø–æ–¥—Å–∫–∞–∑–æ–∫
5. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–∞—Ä–∫–µ—Ä –Ω–∞ –∫–∞—Ä—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ —Ä–∞–±–æ—á—É—é –ö–ü–ü (–∞ –Ω–µ –Ω–∞ —Å—Ç–∞—Ä—É—é –∑–∞–∫—Ä—ã—Ç—É—é)

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **47.699184, 38.679496** (—Ä–∞–±–æ—á–∞—è –ö–ü–ü)
- –ù–ï **47.697816, 38.666213** (—Å—Ç–∞—Ä–∞—è –∑–∞–∫—Ä—ã—Ç–∞—è –ö–ü–ü)

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- –¶–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –£—Å–ø–µ–Ω–∫–∏: `lib/utils/price_calculator.dart`
- –ú–∞—Ä—à—Ä—É—Ç—ã —Å –£—Å–ø–µ–Ω–∫–æ–π: 5000‚ÇΩ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, 6000‚ÇΩ –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö
- –ú–∞—Ä—à—Ä—É—Ç—ã –£—Å–ø–µ–Ω–∫–∞-–£—Å–ø–µ–Ω–∫–∞: 0‚ÇΩ (–Ω—É–ª–µ–≤–æ–π —Ç–∞—Ä–∏—Ñ)

---
**–î–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: –ò—é–Ω—å 2025
