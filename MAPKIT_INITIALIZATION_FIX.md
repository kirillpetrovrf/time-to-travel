# üîß –ò—Å—Ç–∏–Ω–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –∫—Ä–∞—à–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫—Ä–∞—à–∏–ª–æ—Å—å —Å –æ—à–∏–±–∫–æ–π:
```
Fatal signal 6 (SIGABRT) in libmaps-mobile.so
yandex_flutter_search_SearchFactory_get_instance
```

## üéØ –ò—Å—Ç–∏–Ω–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞

**MapKit SDK –ù–ï –ë–´–õ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!**

### –ß—Ç–æ –±—ã–ª–æ –≤ –∫–æ–¥–µ:

```kotlin
// MainApplication.kt
MapKitFactory.setApiKey("...")  // ‚úÖ API –∫–ª—é—á —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
MapKitFactory.setLocale("...")   // ‚úÖ –õ–æ–∫–∞–ª—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
// MapKitFactory.initialize(this) // ‚ùå –ù–ï –í–´–ó–´–í–ê–õ–û–°–¨!
```

### –ü–æ—á–µ–º—É —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ:

–°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Yandex MapKit:
> **MapKitFactory.initialize() –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ª—é–±—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ SDK!**

–ë–µ–∑ —ç—Ç–æ–≥–æ –≤—ã–∑–æ–≤–∞:
- ‚ùå SearchFactory.instance ‚Üí –ö–†–ê–®
- ‚ùå –õ—é–±—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–∞—Ä—Ç–æ–π ‚Üí –ö–†–ê–®
- ‚ùå Routing, Suggest, Search ‚Üí –ö–†–ê–®

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `MapKitFactory.initialize(this)` –≤ MainApplication:

```kotlin
class MainApplication : Application() {
    override fun onCreate() {
        super.onCreate()
        
        // 1. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º API –∫–ª—é—á
        MapKitFactory.setApiKey("2f1d6a75-b751-4077-b305-c6abaea0b542")
        
        // 2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ª–æ–∫–∞–ª—å
        MapKitFactory.setLocale("ru_RU")
        
        // 3. ‚≠ê –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º MapKit!
        MapKitFactory.initialize(this)
    }
}
```

## üîç –ü–æ—á–µ–º—É —Ä–∞–Ω—å—à–µ –Ω–µ –∫—Ä–∞—à–∏–ª–æ—Å—å –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∫–∞—Ä—Ç—ã?

–ü–æ—Ç–æ–º—É —á—Ç–æ –≤–∏–¥–∂–µ—Ç YandexMap **–í–ù–£–¢–†–ï–ù–ù–ï** –≤—ã–∑—ã–≤–∞–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏. –ù–æ SearchFactory —Ç—Ä–µ–±—É–µ—Ç, —á—Ç–æ–±—ã MapKit –±—ã–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω **–î–û** –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

## üìä –ü–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
```
1. MainApplication.onCreate()
   ‚îî‚îÄ> MapKitFactory.initialize(this)
2. Flutter app –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
3. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SearchFactory ‚úÖ
```

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (–±—ã–ª–æ —Ä–∞–Ω—å—à–µ):
```
1. MainApplication.onCreate()
   ‚îî‚îÄ> –¢–æ–ª—å–∫–æ setApiKey() –∏ setLocale()
2. Flutter app –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
3. SearchFactory.instance ‚Üí –ö–†–ê–® ‚ùå
```

## üöÄ –ß—Ç–æ —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

‚úÖ **SearchFactory.instance** - —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ **SearchManager.createSearchManager()** - —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ **SuggestSession** - —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ **–†–µ–∞–ª—å–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –æ—Ç –Ø–Ω–¥–µ–∫—Å–∞** - —Ä–∞–±–æ—Ç–∞—é—Ç!

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

```bash
flutter run
```

–ó–∞—Ç–µ–º:
1. –û—Ç–∫—Ä—ã—Ç—å "–¢–µ—Å—Ç –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∞–¥—Ä–µ—Å–æ–≤"
2. –ù–∞—á–∞—Ç—å –≤–≤–æ–¥–∏—Ç—å –∞–¥—Ä–µ—Å: "–ú–æ—Å"
3. **–î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –†–ï–ê–õ–¨–ù–´–ï –ø–æ–¥—Å–∫–∞–∑–∫–∏ –æ—Ç –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç!**

–í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
I/MapKit: üîÑ –ù–∞—á–∏–Ω–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é MapKit...
I/MapKit: ‚úÖ API –∫–ª—é—á —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
I/MapKit: ‚úÖ –õ–æ–∫–∞–ª—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: ru_RU
I/MapKit: ‚úÖ MapKitFactory.initialize() –≤—ã–∑–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ!
I/MapKit: üéâ MapKit –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ
```

–ê –ø–æ—Ç–æ–º –ø—Ä–∏ –≤–≤–æ–¥–µ —Ç–µ–∫—Å—Ç–∞:
```
I/flutter: üîÑ [YandexSuggest] –ù–∞—á–∏–Ω–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é...
I/flutter: ‚úÖ [YandexSuggest] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω (MapKit SearchManager)
I/flutter: üîç [YandexSuggest] –ó–∞–ø—Ä–æ—Å suggest: "–ú–æ—Å"
I/flutter: ‚úÖ [YandexSuggest] –ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç: 10 –ø–æ–¥—Å–∫–∞–∑–æ–∫
```

## üìö –°–ø—Ä–∞–≤–∫–∞ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

–ò–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Yandex MapKit:

> Before using the API, you should initialize the MapKit with the `initialize` method.
> 
> ```kotlin
> MapKitFactory.initialize(context)
> ```

## üéØ –í—ã–≤–æ–¥—ã

1. **API –∫–ª—é—á** —Å–∞–º –ø–æ —Å–µ–±–µ –ù–ï –¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω
2. **–ù—É–∂–Ω–æ —è–≤–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å** `MapKitFactory.initialize()`
3. –≠—Ç–æ **–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è** –æ–ø–µ—Ä–∞—Ü–∏—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
4. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ **–í–°–ï** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã MapKit —Ä–∞–±–æ—Ç–∞—é—Ç

---

**–¢–µ–ø–µ—Ä—å –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –∏ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ!** üöÄ
