# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —É–ª–∏—Ü –∏ –¥–æ–º–æ–≤

## –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–∏—Å–∫ –ø–æ —É–ª–∏—Ü–∞–º –∏ –¥–æ–º–∞–º

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç "–ø–µ—Ä–º—å –ª–µ–Ω–∏–Ω–∞ 86", –Ω–æ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è.

**–ü—Ä–∏—á–∏–Ω–∞**: –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ –∏—Å–∫–∞–ª–∞ —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ–¥—Å—Ç—Ä–æ–∫–∏. –í –±–∞–∑–µ –∞–¥—Ä–µ—Å –∑–∞–ø–∏—Å–∞–Ω –∫–∞–∫ `"–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 86"`, –∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç `"–ø–µ—Ä–º—å –ª–µ–Ω–∏–Ω–∞ 86"` (–±–µ–∑ –∑–∞–ø—è—Ç—ã—Ö –∏ —Å–ª–æ–≤–∞ "—É–ª–∏—Ü–∞").

**–†–µ—à–µ–Ω–∏–µ**: –ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞ –≤ –º–µ—Ç–æ–¥–µ `getSuggestions()`:

```dart
// –°–¢–ê–†–ê–Ø –õ–û–ì–ò–ö–ê (–Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞):
final queryLower = query.toLowerCase();
final suggestions = addresses
    .where((address) => address.toLowerCase().contains(queryLower))
    .take(10)
    .toList();

// –ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê (—Ä–∞–±–æ—Ç–∞–µ—Ç):
final queryNormalized = query.trim().toLowerCase()
    .replaceAll(RegExp(r'\s+'), ' '); // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –ø—Ä–æ–±–µ–ª—ã

final suggestions = addresses.where((address) {
  final addressNormalized = address.toLowerCase()
      .replaceAll(',', ' ') // –£–±–∏—Ä–∞–µ–º –∑–∞–ø—è—Ç—ã–µ
      .replaceAll(RegExp(r'\s+'), ' '); // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –ø—Ä–æ–±–µ–ª—ã
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∞–¥—Ä–µ—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –í–°–ï —Å–ª–æ–≤–∞ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
  final queryWords = queryNormalized.split(' ');
  return queryWords.every((word) => addressNormalized.contains(word));
}).take(10).toList();
```

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å**:
- ‚úÖ –ò–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è –∑–∞–ø—è—Ç—ã–µ –≤ –∞–¥—Ä–µ—Å–∞—Ö
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ –í–°–ï–ú —Å–ª–æ–≤–∞–º –∏–∑ –∑–∞–ø—Ä–æ—Å–∞ (–∞ –Ω–µ –ø–æ —Ç–æ—á–Ω–æ–π –ø–æ–¥—Å—Ç—Ä–æ–∫–µ)
- ‚úÖ –¢–µ–ø–µ—Ä—å "–ø–µ—Ä–º—å –ª–µ–Ω–∏–Ω–∞ 86" –Ω–∞–π–¥–µ—Ç "–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 86"

**–ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã**:
```
–í–≤–æ–¥: "–ø–µ—Ä–º—å –ª–µ–Ω–∏–Ω–∞"
–†–µ–∑—É–ª—å—Ç–∞—Ç: 
  - –ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞
  - –ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 10
  - –ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 20
  - ... (–¥–æ 10 –ø–æ–¥—Å–∫–∞–∑–æ–∫)

–í–≤–æ–¥: "–ø–µ—Ä–º—å –ª–µ–Ω–∏–Ω–∞ 86"
–†–µ–∑—É–ª—å—Ç–∞—Ç:
  - –ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 86

–í–≤–æ–¥: "–µ–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥ –≥–ª–∞–≤–Ω—ã–π"
–†–µ–∑—É–ª—å—Ç–∞—Ç:
  - –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, –ì–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Å–ø–µ–∫—Ç
  - –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, –ì–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Å–ø–µ–∫—Ç, 10
  - –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, –ì–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Å–ø–µ–∫—Ç, 20
  - –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, –ì–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Å–ø–µ–∫—Ç, 30
```

---

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 2: –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤—ã–ª–∞–∑–∏—Ç –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç "–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, –ì–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Å–ø–µ–∫—Ç" –∏–∑ —Å–ø–∏—Å–∫–∞, –Ω–æ –ø–æ–¥—Å–∫–∞–∑–∫–∞ —Å—Ä–∞–∑—É –∂–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–Ω–æ–≤–∞ –∏ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É —Ä–∞—Å—á–µ—Ç–∞.

**–ü—Ä–∏—á–∏–Ω–∞**: –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –∞–¥—Ä–µ—Å–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `onTextChanged()` ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `_fetchSuggestions()` ‚Üí –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è —Å–Ω–æ–≤–∞.

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `_isSelectingFromList` –≤ `AddressAutocompleteField`:

```dart
class _AddressAutocompleteFieldState extends State<AddressAutocompleteField> {
  bool _isSelectingFromList = false; // üÜï –ù–æ–≤—ã–π —Ñ–ª–∞–≥
  
  void _onTextChanged() {
    final text = widget.controller.text;

    // üÜï –ï—Å–ª–∏ –≤—ã–±–∏—Ä–∞–µ–º –∏–∑ —Å–ø–∏—Å–∫–∞ - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
    if (_isSelectingFromList) {
      return;
    }
    
    // ...–æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
  }
  
  // –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –∞–¥—Ä–µ—Å–∞ –∏–∑ —Å–ø–∏—Å–∫–∞:
  onPressed: () {
    // üÜï –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥
    _isSelectingFromList = true;
    
    widget.controller.text = suggestion;
    widget.onAddressSelected?.call(suggestion);
    _removeOverlay();
    
    // üÜï –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥ —á–µ—Ä–µ–∑ 100ms
    Future.delayed(const Duration(milliseconds: 100), () {
      _isSelectingFromList = false;
    });
  }
}
```

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å**:
- ‚úÖ –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –∏–∑ —Å–ø–∏—Å–∫–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Ñ–ª–∞–≥ `_isSelectingFromList = true`
- ‚úÖ `_onTextChanged()` –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞, –µ—Å–ª–∏ —Ñ–ª–∞–≥ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ –§–ª–∞–≥ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 100ms (–ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π)
- ‚úÖ –ü–æ–¥—Å–∫–∞–∑–∫–∏ –±–æ–ª—å—à–µ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞

---

### ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –†–∞—Å—à–∏—Ä–µ–Ω–∞ –±–∞–∑–∞ –∞–¥—Ä–µ—Å–æ–≤

–î–æ–±–∞–≤–ª–µ–Ω–æ –±–æ–ª—å—à–µ –∞–¥—Ä–µ—Å–æ–≤ —Å –Ω–æ–º–µ—Ä–∞–º–∏ –¥–æ–º–æ–≤ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

**–ë—ã–ª–æ**: ~60 –∞–¥—Ä–µ—Å–æ–≤, –º–∞–ª–æ –Ω–æ–º–µ—Ä–æ–≤ –¥–æ–º–æ–≤
```dart
'–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞',
'–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 50',
'–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 68',
```

**–°—Ç–∞–ª–æ**: ~140 –∞–¥—Ä–µ—Å–æ–≤, –º–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–æ–≤ –¥–æ–º–æ–≤
```dart
'–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞',
'–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 10',
'–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 20',
'–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 30',
'–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 40',
'–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 50',
'–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 60',
'–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 68',
'–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 70',
'–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 80',
'–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 86',
'–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 90',
'–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 100',
```

**–ü–æ–∫—Ä—ã—Ç–∏–µ –∞–¥—Ä–µ—Å–æ–≤**:
- ‚úÖ –ü–µ—Ä–º—å: ~80 –∞–¥—Ä–µ—Å–æ–≤ (—É–ª–∏—Ü—ã + –Ω–æ–º–µ—Ä–∞ –¥–æ–º–æ–≤ + –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
- ‚úÖ –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥: ~15 –∞–¥—Ä–µ—Å–æ–≤ (—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ —É–ª–∏—Ü—ã + –∞—ç—Ä–æ–ø–æ—Ä—Ç)
- ‚úÖ –î—Ä—É–≥–∏–µ –≥–æ—Ä–æ–¥–∞: ~45 –∞–¥—Ä–µ—Å–æ–≤ (–ú–æ—Å–∫–≤–∞, –ö–∞–∑–∞–Ω—å, –£—Ñ–∞, –ß–µ–ª—è–±–∏–Ω—Å–∫, –¢—é–º–µ–Ω—å)

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–∏—Å–∫ –ø–æ —É–ª–∏—Ü–µ —Å –Ω–æ–º–µ—Ä–æ–º –¥–æ–º–∞

1. –í–≤–µ–¥–∏—Ç–µ "–ø–µ—Ä–º—å –ª–µ–Ω–∏–Ω–∞" ‚Üí –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏ —Å —É–ª–∏—Ü–µ–π –õ–µ–Ω–∏–Ω–∞
2. –í–≤–µ–¥–∏—Ç–µ "–ø–µ—Ä–º—å –ª–µ–Ω–∏–Ω–∞ 86" ‚Üí –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ—á–Ω—ã–π –∞–¥—Ä–µ—Å "–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 86"
3. –í—ã–±–µ—Ä–∏—Ç–µ –∞–¥—Ä–µ—Å ‚Üí –ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å –∏ –ù–ï –ø–æ—è–≤–∏—Ç—å—Å—è —Å–Ω–æ–≤–∞ ‚úÖ

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–∏—Å–∫ –ø–æ –ø—Ä–æ—Å–ø–µ–∫—Ç—É

1. –í–≤–µ–¥–∏—Ç–µ "–µ–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥ –≥–ª–∞–≤–Ω—ã–π" ‚Üí –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –∞–¥—Ä–µ—Å–∞ —Å "–ì–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Å–ø–µ–∫—Ç"
2. –í—ã–±–µ—Ä–∏—Ç–µ "–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, –ì–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Å–ø–µ–∫—Ç" ‚Üí –ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å ‚úÖ
3. –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ù–ï –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ ‚úÖ

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü–æ–∏—Å–∫ —Å —Ä–∞–∑–Ω—ã–º —Ä–µ–≥–∏—Å—Ç—Ä–æ–º –∏ –ø—Ä–æ–±–µ–ª–∞–º–∏

1. –í–≤–µ–¥–∏—Ç–µ "–ü–ï–†–ú–¨   –õ–ï–ù–ò–ù–ê" (—Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–±–µ–ª–∞–º–∏) ‚Üí –†–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
2. –í–≤–µ–¥–∏—Ç–µ "–ø–µ—Ä–º—å,–ª–µ–Ω–∏–Ω–∞" (—Å –∑–∞–ø—è—Ç–æ–π) ‚Üí –†–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
3. –í–≤–µ–¥–∏—Ç–µ "–ü–µ–†–º–¨ –õ–µ–ù–∏–ù–∞" (—Å–º–µ—à–∞–Ω–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä) ‚Üí –†–∞–±–æ—Ç–∞–µ—Ç ‚úÖ

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –†–∞—Å—á–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∞ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞

1. –ü–æ–ª–µ "–û—Ç–∫—É–¥–∞": –≤–≤–µ–¥–∏—Ç–µ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ "–ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 86"
2. –ü–æ–ª–µ "–ö—É–¥–∞": –≤–≤–µ–¥–∏—Ç–µ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ "–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, –ì–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Å–ø–µ–∫—Ç"
3. –ù–∞–∂–º–∏—Ç–µ "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å" ‚Üí –ú–∞—Ä—à—Ä—É—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å—Å—è ‚úÖ
4. –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ù–ï –¥–æ–ª–∂–Ω—ã –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É ‚úÖ

---

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`/lib/services/yandex_maps_service.dart`**
   - ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞ –≤ `getSuggestions()`
   - ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–∞ –±–∞–∑–∞ –∞–¥—Ä–µ—Å–æ–≤ –≤ `_getPopularAddresses()`

2. **`/lib/widgets/address_autocomplete_field.dart`**
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `_isSelectingFromList`
   - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è –ø–æ–¥—Å–∫–∞–∑–æ–∫

---

## –õ–æ–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—É–¥—É—Ç —Ç–∞–∫–∏–µ –ª–æ–≥–∏:

```
I/flutter: üí° [AUTOCOMPLETE] –ü–æ–∏—Å–∫ –ø–æ–¥—Å–∫–∞–∑–æ–∫ –¥–ª—è: "–ø–µ—Ä–º—å –ª–µ–Ω–∏–Ω–∞"
I/flutter: ‚úÖ [AUTOCOMPLETE] –ù–∞–π–¥–µ–Ω–æ 13 –ø–æ–¥—Å–∫–∞–∑–æ–∫

I/flutter: üí° [AUTOCOMPLETE] –ü–æ–∏—Å–∫ –ø–æ–¥—Å–∫–∞–∑–æ–∫ –¥–ª—è: "–ø–µ—Ä–º—å –ª–µ–Ω–∏–Ω–∞ 86"
I/flutter: ‚úÖ [AUTOCOMPLETE] –ù–∞–π–¥–µ–Ω–æ 1 –ø–æ–¥—Å–∫–∞–∑–æ–∫

I/flutter: ‚úÖ –í—ã–±—Ä–∞–Ω –∞–¥—Ä–µ—Å: –ü–µ—Ä–º—å, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 86
```

**–ö–ª—é—á–µ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã**:
- `üí° [AUTOCOMPLETE]` - –Ω–∞—á–∞–ª—Å—è –ø–æ–∏—Å–∫
- `‚úÖ [AUTOCOMPLETE] –ù–∞–π–¥–µ–Ω–æ N –ø–æ–¥—Å–∫–∞–∑–æ–∫` - –ø–æ–∏—Å–∫ –∑–∞–≤–µ—Ä—à–µ–Ω
- `‚úÖ –í—ã–±—Ä–∞–Ω –∞–¥—Ä–µ—Å` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª –∞–¥—Ä–µ—Å –∏–∑ —Å–ø–∏—Å–∫–∞

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –í–∞—Ä–∏–∞–Ω—Ç A: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º API

–ö–æ–≥–¥–∞ –ø–æ–ª—É—á–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API –∫–ª—é—á –¥–ª—è Yandex Geocoder REST API:

1. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ HTTP –∑–∞–ø—Ä–æ—Å—ã –≤ `getSuggestions()`
2. –ó–∞–º–µ–Ω–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã –∫ API
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É –∫–∞–∫ fallback –¥–ª—è offline —Ä–µ–∂–∏–º–∞

### –í–∞—Ä–∏–∞–Ω—Ç B: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã

–ú–æ–∂–Ω–æ –ø–∞—Ä—Å–∏—Ç—å –∞–¥—Ä–µ—Å–∞ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–∫–∞–∑–æ–≤:

```dart
Future<void> _addAddressToDatabase(String address) async {
  // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ SharedPreferences –∏–ª–∏ SQLite
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø–æ–ª–Ω—è—Ç—å –±–∞–∑—É –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤
}
```

### –í–∞—Ä–∏–∞–Ω—Ç C: –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞:

```dart
final Map<String, List<String>> _cache = {};

Future<List<String>> getSuggestions(String query) async {
  if (_cache.containsKey(query)) {
    return _cache[query]!;
  }
  
  final suggestions = await _fetchSuggestions(query);
  _cache[query] = suggestions;
  return suggestions;
}
```

---

## –°—Ç–∞—Ç—É—Å

‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ 1 (–ø–æ–∏—Å–∫ –ø–æ —É–ª–∏—Ü–∞–º)** - –ò–°–ü–†–ê–í–õ–ï–ù–ê
‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ 2 (–ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ)** - –ò–°–ü–†–ê–í–õ–ï–ù–ê
‚úÖ **–ë–∞–∑–∞ –∞–¥—Ä–µ—Å–æ–≤** - –†–ê–°–®–ò–†–ï–ù–ê –¥–æ ~140 –∞–¥—Ä–µ—Å–æ–≤
‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ì–û–¢–û–í–û –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ

---

**–î–∞—Ç–∞**: 21 –æ–∫—Ç—è–±—Ä—è 2025 –≥.
**–í–µ—Ä—Å–∏—è**: 1.0
