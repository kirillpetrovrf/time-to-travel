# üìß –ü–∏—Å—å–º–æ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É Yandex Maps API

---

## –¢–µ–º–∞ –ø–∏—Å—å–º–∞:
**MapKit –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è, –Ω–æ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–∞–π–ª—ã –∫–∞—Ä—Ç—ã (API –∫–ª—é—á –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)**

---

## –¢–µ–∫—Å—Ç –æ–±—Ä–∞—â–µ–Ω–∏—è:

–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!

–Ø —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—é Flutter-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ç–∞–∫—Å–∏/—Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Yandex MapKit. –°—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å –ø—Ä–æ–±–ª–µ–º–æ–π: **MapKit —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è, –Ω–æ —Ç–∞–π–ª—ã –∫–∞—Ä—Ç—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è** - –≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ —Å–µ—Ç–∫–∞ –±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.

### üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ:

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** Time to Travel (—Ç–∞–∫—Å–∏/—Ç—Ä–∞–Ω—Å—Ñ–µ—Ä)  
**–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** Flutter (Android)  
**Yandex MapKit –≤–µ—Ä—Å–∏—è:** 4.24.0 (yandex_mapkit_full)  
**Package name:** `com.timetotravel.app`  
**API –∫–ª—é—á:** `2f1d6a75-b751-4077-b305-c6abaea0b542`

**GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** https://github.com/kirillpetrovrf/time-to-travel  
**–ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç:** 4706a58

### ‚ùå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **MapKit –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ:**
   ```
   I/flutter: ‚úÖ Yandex MapKit —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω (v4.24.0)
   ```

2. **–ö–∞—Ä—Ç–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:**
   ```
   I/flutter: üó∫Ô∏è [MAP] MapWindow —Å–æ–∑–¥–∞–Ω: true
   I/flutter: üó∫Ô∏è [MAP] Map –æ–±—ä–µ–∫—Ç: true
   I/flutter: üó∫Ô∏è [MAP] ‚úÖ Map –æ–±—ä–µ–∫—Ç –¥–æ—Å—Ç—É–ø–µ–Ω
   ```

3. **–ö–∞–º–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:**
   ```
   I/flutter: üó∫Ô∏è [MAP] ‚úÖ –ö–∞–º–µ—Ä–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞
   I/flutter: üó∫Ô∏è [MAP] üîç –ö–∞–º–µ—Ä–∞: CameraPosition(target: Point(latitude: 58.0105, longitude: 56.2502), zoom: 11.0)
   ```

4. **–ù–û —Ç–∞–π–ª—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è:**
   ```
   W/yandex.maps: UDJFd3dKAo6oib7P77kw: Clearing cache
   I/flutter: üó∫Ô∏è [MAP] üîç ‚ùå –¢–∞–π–ª—ã –ù–ï –ó–ê–ì–†–£–ó–ò–õ–ò–°–¨ –æ—Ç Yandex API
   ```

### üîç –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:

**–ß—Ç–æ —è –æ–±–Ω–∞—Ä—É–∂–∏–ª:**
- ‚ùå MapKit **–ù–ï –¥–µ–ª–∞–µ—Ç HTTP –∑–∞–ø—Ä–æ—Å—ã** –∫ Yandex API (–Ω–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ `*.yandex.ru` –∏–ª–∏ `*.maps.yandex.net` –≤ –ª–æ–≥–∞—Ö)
- ‚ùå –ù–µ—Ç –æ—à–∏–±–æ–∫ 403, 401 –∏–ª–∏ –¥—Ä—É–≥–∏—Ö HTTP –æ—à–∏–±–æ–∫
- ‚ùå –ù–µ—Ç SSL/Certificate –æ—à–∏–±–æ–∫
- ‚ùå –ù–µ—Ç Network connection –æ—à–∏–±–æ–∫
- ‚úÖ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–∏—è INTERNET, ACCESS_NETWORK_STATE –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

**–í—ã–≤–æ–¥:** MapKit –ø–æ–ª—É—á–∞–µ—Ç API –∫–ª—é—á, –Ω–æ **–Ω–µ –ø—ã—Ç–∞–µ—Ç—Å—è** –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ —Å–µ—Ä–≤–µ—Ä—É - –∫–ª—é—á –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω.

### üîß –ß—Ç–æ –±—ã–ª–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ:

#### 1. API –∫–ª—é—á –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

**AndroidManifest.xml:**
```xml
<meta-data
    android:name="com.yandex.mapkit.ApiKey"
    android:value="2f1d6a75-b751-4077-b305-c6abaea0b542" />
```

**Dart –∫–æ–¥:**
```dart
await YandexMapKit.initialize(
  apiKey: '2f1d6a75-b751-4077-b305-c6abaea0b542',
);
```

#### 2. –†–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:
```xml
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
```

#### 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞:
- Android Emulator (API 35)
- Internet –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: —Ä–∞–±–æ—Ç–∞–µ—Ç (WiFi)

### ‚ùì –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã (–º–æ—ë –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ):

1. **API –∫–ª—é—á –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞?**
   - –ö–ª—é—á –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–∏–ø–∞ "JavaScript API –∏ HTTP –ì–µ–æ–∫–æ–¥–µ—Ä"
   - –í–æ–∑–º–æ–∂–Ω–æ, –∫–ª—é—á —Å–æ–∑–¥–∞–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è "HTTP –ì–µ–æ–∫–æ–¥–µ—Ä" (–≤–µ–±)?

2. **–ö–ª—é—á –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –∏–ª–∏ –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω?**
   - –ò—Å—Ç—ë–∫ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è?
   - –¢—Ä–µ–±—É–µ—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–∏?

3. **Bundle ID –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è?**
   - –ù—É–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–∏—Ç—å `com.timetotravel.app` –≤ –∫–æ–Ω—Å–æ–ª–∏ Yandex?

4. **–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –±–∏–ª–ª–∏–Ω–≥–∞?**
   - –ù—É–∂–Ω–∞ –ª–∏ –ø—Ä–∏–≤—è–∑–∫–∞ –ø–ª–∞—Ç—ë–∂–Ω–æ–π –∫–∞—Ä—Ç—ã –¥–∞–∂–µ –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞?

### üìù –ß—Ç–æ –º–Ω–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Yandex Console:

–ü—Ä–æ—à—É –ø–æ–¥—Å–∫–∞–∑–∞—Ç—å:
1. ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –∫–ª—é—á `2f1d6a75-b751-4077-b305-c6abaea0b542`?
2. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ª–∏ —Ç–∏–ø –∫–ª—é—á–∞ –¥–ª—è Flutter-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?
3. ‚úÖ –ù—É–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–∏—Ç—å `com.timetotravel.app` –≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è?
4. ‚úÖ –¢—Ä–µ–±—É–µ—Ç—Å—è –ª–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è –±–∏–ª–ª–∏–Ω–≥–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?
5. ‚úÖ –ü–æ—á–µ–º—É MapKit –Ω–µ –¥–µ–ª–∞–µ—Ç HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ API?

### üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:

–Ø –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç —Å –ª–æ–≥–∞–º–∏ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π:

1. **–û—Å–Ω–æ–≤–Ω–æ–π –æ—Ç—á—ë—Ç:**  
   https://github.com/kirillpetrovrf/time-to-travel/blob/main/API_KEY_ISSUE_FINAL_REPORT.md

2. **–°–∫—Ä–∏–ø—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**
   - https://github.com/kirillpetrovrf/time-to-travel/blob/main/diagnose_map_403.sh
   - https://github.com/kirillpetrovrf/time-to-travel/blob/main/capture_http_errors_realtime.sh

3. **–õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** –ú–æ–≥—É –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ–ª–Ω—ã–µ –ª–æ–≥–∏ –ø–æ –∑–∞–ø—Ä–æ—Å—É

### üôè –ü—Ä–æ—à—É –ø–æ–º–æ—â–∏:

–ù–µ –º–æ–≥—É –ø–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É MapKit –Ω–µ –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ API. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É, –Ω–æ –±–µ–∑ —Ä–∞–±–æ—Ç–∞—é—â–µ–π –∫–∞—Ä—Ç—ã —è –Ω–µ –º–æ–≥—É –µ–≥–æ –≤—ã–ø—É—Å—Ç–∏—Ç—å.

–ë—É–¥—É –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω –∑–∞ –ª—é–±—É—é –ø–æ–º–æ—â—å –≤ —Ä–µ—à–µ–Ω–∏–∏ —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã!

---

**–° —É–≤–∞–∂–µ–Ω–∏–µ–º,**  
–ö–∏—Ä–∏–ª–ª –ü–µ—Ç—Ä–æ–≤  
–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ Time to Travel  
GitHub: https://github.com/kirillpetrovrf/time-to-travel  
Email: [–≤–∞—à email]

---

## üìå –ö—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å:

1. **–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞ Yandex Maps API:**
   - https://yandex.ru/support/maps-api/
   - –ò–ª–∏ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –≤ Yandex Console

2. **–ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å issue –Ω–∞ GitHub:**
   - https://github.com/yandex/mapkit-android-demo/issues
   - –ü—Ä–∏–ª–æ–∂–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

3. **–ò–ª–∏ –Ω–∞–ø–∏—Å–∞—Ç—å –≤ Telegram:**
   - @yandex_maps_support (–µ—Å–ª–∏ –µ—Å—Ç—å)
