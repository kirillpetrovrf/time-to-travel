# üó∫Ô∏è –£–±—Ä–∞–Ω–∞ –Ω–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –Ω–∞ –ú–æ—Å–∫–≤–µ

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫–∞—Ä—Ç–∞ —Å–Ω–∞—á–∞–ª–∞ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ –ú–æ—Å–∫–≤—É (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã 55.753284, 37.622034), –∞ –ø–æ—Ç–æ–º —É–∂–µ –ø–µ—Ä–µ–º–µ—â–∞–ª–∞—Å—å –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –≠—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ –Ω–µ–ø—Ä–∏—è—Ç–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç "–ø—Ä—ã–∂–∫–∞" –∫–∞—Ä—Ç—ã.

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –§–∞–π–ª: `lib/features/main_screen.dart`

**–£–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_setFallbackLocation()`**, –∫–æ—Ç–æ—Ä–∞—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∞ –ú–æ—Å–∫–≤—É –∫–∞–∫ fallback –ø–æ–∑–∏—Ü–∏—é.

**–ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ `_initializeUserLocation()`:**

#### –ë—ã–ª–æ:
```dart
if (permission == geolocator.LocationPermission.denied) {
  // –ù–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Å—Ä–∞–∑—É, –∏—Å–ø–æ–ª—å–∑—É–µ–º fallback
  print('‚ö†Ô∏è –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—é –ú–æ—Å–∫–≤—É –∫–∞–∫ fallback');
  _setFallbackLocation(mapWindow);  // ‚ùå –ü–æ–∫–∞–∑—ã–≤–∞–ª–∏ –ú–æ—Å–∫–≤—É
  return;
}
```

#### –°—Ç–∞–ª–æ:
```dart
if (permission == geolocator.LocationPermission.denied) {
  // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
  print('üì± –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é...');
  permission = await geolocator.Geolocator.requestPermission();
  
  if (permission == geolocator.LocationPermission.denied) {
    print('‚ö†Ô∏è –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ, –∫–∞—Ä—Ç–∞ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–∞ –±–µ–∑ –Ω–∞—á–∞–ª—å–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏');
    // ‚úÖ –ù–ï —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ú–æ—Å–∫–≤—É - –ø—É—Å—Ç—å –∫–∞—Ä—Ç–∞ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–æ–∑–∏—Ü–∏–∏ –∏–ª–∏ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π
    return;
  }
}
```

## –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:

1. **–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ** - –≤ `main.dart` –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é
2. **–ï—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–∞–Ω–æ** - –∫–∞—Ä—Ç–∞ —Å—Ä–∞–∑—É –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–µ–∑ "–ø—Ä—ã–∂–∫–∞"
3. **–ï—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–µ –¥–∞–Ω–æ** - –∫–∞—Ä—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ (–±–µ–∑ –ú–æ—Å–∫–≤—ã), –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
4. **–ù–∏–∫–∞–∫–∏—Ö –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –ø–æ–∫–∞–∑–æ–≤ –ú–æ—Å–∫–≤—ã** - –∫–∞—Ä—Ç–∞ –ª–∏–±–æ —Å—Ä–∞–∑—É –Ω–∞ –≤–∞—à–µ–º –º–µ—Å—Ç–µ, –ª–∏–±–æ –Ω–∞ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏

## –ß—Ç–æ —É–¥–∞–ª–µ–Ω–æ

- ‚ùå –ú–µ—Ç–æ–¥ `_setFallbackLocation()` - –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω
- ‚ùå –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ fallback –ø–æ–∑–∏—Ü–∏–∏ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –ú–æ—Å–∫–≤—ã
- ‚ùå –í—Å–µ –≤—ã–∑–æ–≤—ã `_setFallbackLocation()` –∏–∑ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç –∫–æ–¥–∞

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ö–∞—Ä—Ç–∞ —Å—Ä–∞–∑—É –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ** - –±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –ø—Ä—ã–∂–∫–æ–≤  
‚úÖ **–ü–ª–∞–≤–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç** - –Ω–∏–∫–∞–∫–∏—Ö —Ä–µ–∑–∫–∏—Ö –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–π  
‚úÖ **–õ–æ–≥–∏—á–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ** - –µ—Å–ª–∏ –Ω–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è, –∫–∞—Ä—Ç–∞ –ø—Ä–æ—Å—Ç–æ –Ω–µ –¥–≤–∏–≥–∞–µ—Ç—Å—è  
‚úÖ **–ö–Ω–æ–ø–∫–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞** - –º–æ–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–≤–æ–µ–º—É –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—é –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
flutter run
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
üåç –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ...
üì± –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é...
üìç –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è...
‚úÖ –ü–æ–ª—É—á–µ–Ω–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: 58.0004638, 56.2428776
‚úÖ –ö–∞—Ä—Ç–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

**–ù–∏–∫–∞–∫–æ–π –ú–æ—Å–∫–≤—ã!** üéâ
