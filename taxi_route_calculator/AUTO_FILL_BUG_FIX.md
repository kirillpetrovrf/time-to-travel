# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–ª–µ–π –∞–¥—Ä–µ—Å–æ–≤

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª –æ –ø—Ä–æ–±–ª–µ–º–µ, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞ –∞–¥—Ä–µ—Å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∏—Å–ø–æ–ª—å–∑—É—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–µ—Å—Å–∏–π.

## –ü—Ä–æ–≤–µ–¥–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ `_clearRoutes()`
```dart
// –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –º–µ—Ç–æ–¥ _clearRoutes():
// üÜï –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ–µ –ø–æ–ª–µ
_activeField = ActiveField.none;

// üÜï –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—á–∏—â–∞–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è
_textFieldControllerFrom.clear();
_textFieldControllerTo.clear();

// üÜï –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–∏—Å—Ç–∫–∏
Future.delayed(Duration.zero, () {
  if (_textFieldControllerFrom.text.isNotEmpty) {
    _textFieldControllerFrom.text = '';
    print('üîß Force cleared FROM field');
  }
  if (_textFieldControllerTo.text.isNotEmpty) {
    _textFieldControllerTo.text = '';
    print('üîß Force cleared TO field');
  }
});
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞ `_forceResetAllFields()`
```dart
void _forceResetAllFields() {
  setState(() {
    // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
    _textFieldControllerFrom.dispose();
    _textFieldControllerTo.dispose();
    _textFieldControllerFrom = TextEditingController();
    _textFieldControllerTo = TextEditingController();
    
    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    _activeField = ActiveField.none;
    _lastSearchFieldType = null;
    _selectedPointType = RoutePointType.from;
    _isPointSelectionEnabled = true;
    _routeCompleted = false;
    
    // –û—á–∏—â–∞–µ–º –º–∞—Ä—à—Ä—É—Ç—ã –∏ —Ç–æ—á–∫–∏
    _drivingRoutes = [];
    _routesCollection.clear();
    _routePointsManager.clearAllPoints();
  });
}
```

### 3. –£–±—Ä–∞–Ω–æ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `final` —É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
```dart
// –ò–∑–º–µ–Ω–µ–Ω–æ —Å:
final _textFieldControllerFrom = TextEditingController();
final _textFieldControllerTo = TextEditingController();

// –ù–∞:
TextEditingController _textFieldControllerFrom = TextEditingController();
TextEditingController _textFieldControllerTo = TextEditingController();
```

### 4. –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞
–í AppBar –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ä–∞–Ω–∂–µ–≤–∞—è –∫–Ω–æ–ø–∫–∞ "Force Reset All Fields" –¥–ª—è —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –æ–±—ã—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç.

### 5. –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª–µ–π:
- –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–ª–µ–π FROM/TO
- –î–æ –∏ –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- –ü–æ—Å–ª–µ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–°–æ–∑–¥–∞–π—Ç–µ –º–∞—Ä—à—Ä—É—Ç:**
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ø–æ–ª–µ "–û—Ç–∫—É–¥–∞" –∏ –≤–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ø–æ–ª–µ "–ö—É–¥–∞" –∏ –≤–≤–µ–¥–∏—Ç–µ –¥—Ä—É–≥–æ–π –∞–¥—Ä–µ—Å
   - –ü–æ–¥–æ–∂–¥–∏—Ç–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞

2. **–û—á–∏—Å—Ç–∏—Ç–µ –º–∞—Ä—à—Ä—É—Ç:**
   - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Clear Routes" (–∏–∫–æ–Ω–∫–∞ —Å —á–µ—Ç—ã—Ä—å–º—è –∫–≤–∞–¥—Ä–∞—Ç–∞–º–∏)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–±–∞ –ø–æ–ª—è –æ—á–∏—Å—Ç–∏–ª–∏—Å—å

3. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç:**
   - –°–Ω–æ–≤–∞ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –ø–æ–ª–µ "–û—Ç–∫—É–¥–∞" –∏ –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∞–¥—Ä–µ—Å –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–ª–µ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å—Ç–∞—Ä—ã–µ –∞–¥—Ä–µ—Å–∞ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

4. **–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–±—Ä–æ—Å:**
   - –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –Ω–∞–∂–º–∏—Ç–µ –æ—Ä–∞–Ω–∂–µ–≤—É—é –∫–Ω–æ–ø–∫—É "Force Reset All Fields" (–∏–∫–æ–Ω–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
   - –≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–±—Ä–æ—Å–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤
–û–±—Ä–∞—â–∞–π—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö:
- `üìù INIT - FROM field: "..."` - –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- `üìù BEFORE clearing - FROM field: "..."` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ –æ—á–∏—Å—Ç–∫–∏
- `üìå Using saved field type: RoutePointType.from/to` - –∫–∞–∫–æ–µ –ø–æ–ª–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–¥—Ä–µ—Å–∞
- `üîß Force cleared FROM/TO field` - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ä–∞–±–æ—Ç–∞–ª–∞
- `üî• FORCE RESET - All fields and state reset` - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–±—Ä–æ—Å –≤—ã–ø–æ–ª–Ω–µ–Ω

## –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è "Clear Routes" –≤—Å–µ –ø–æ–ª—è –¥–æ–ª–∂–Ω—ã –æ—á–∏—â–∞—Ç—å—Å—è
- –ü—Ä–∏ –≤–≤–æ–¥–µ –Ω–æ–≤–æ–≥–æ –∞–¥—Ä–µ—Å–∞ –æ–Ω –¥–æ–ª–∂–µ–Ω –ø–æ–ø–∞–¥–∞—Ç—å –≤ —Ç–æ –ø–æ–ª–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã–±—Ä–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- –ù–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–ª–µ–π –∞–¥—Ä–µ—Å–∞–º–∏ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–µ—Å—Å–∏–π
- –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `_lastSearchFieldType` –¥–æ–ª–∂–Ω–∞ —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å—Å—è –≤ null –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤