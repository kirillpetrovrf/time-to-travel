# ‚úÖ VARIANT 6: AUTO-VISIT MAINSCREEN (–ì–ê–†–ê–ù–¢–ò–†–û–í–ê–ù–ù–û–ï –†–ï–®–ï–ù–ò–ï)

## üìã –°–¢–ê–¢–£–°
- **–î–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: 4 –¥–µ–∫–∞–±—Ä—è 2025 –≥.
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û, –≥–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- **–ü–æ–¥—Ö–æ–¥**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–∏–∑–∏—Ç –Ω–∞ –≤–∫–ª–∞–¥–∫—É —Å –∫–∞—Ä—Ç–æ–π –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

---

## üéØ –°–£–¢–¨ –†–ï–®–ï–ù–ò–Ø

–ü–æ—Å–ª–µ –ø—Ä–æ–≤–∞–ª–∞ –≤—Å–µ—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (1, 4, 4.1, 5) –º—ã –æ–±—Ä–∞—Ç–∏–ª–∏—Å—å –∫ **–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É —Ä–µ—à–µ–Ω–∏—é**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–∏–∑–∏—Ç –Ω–∞ –≤–∫–ª–∞–¥–∫—É MainScreen (—Å –∫–∞—Ä—Ç–æ–π) –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?
–ú—ã –∑–Ω–∞–µ–º –∏–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —á—Ç–æ **–ü–û–°–õ–ï –†–£–ß–ù–û–ì–û –ü–û–°–ï–©–ï–ù–ò–Ø –≤–∫–ª–∞–¥–∫–∏ —Å –∫–∞—Ä—Ç–æ–π callbacks Yandex MapKit –Ω–∞—á–∏–Ω–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å**. Variant 6 –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å.

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –§–∞–π–ª: `lib/features/home/screens/home_screen.dart`

#### 1Ô∏è‚É£ –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç SharedPreferences:
```dart
import 'package:shared_preferences/shared_preferences.dart';
```

#### 2Ô∏è‚É£ –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è:
```dart
class _HomeScreenState extends State<HomeScreen> {
  int _currentIndex = 0;
  UserType? _userType;
  int _ordersScreenKey = 0;
  bool _isAutoVisitingMap = false; // üÜï –§–ª–∞–≥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–∏–∑–∏—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç—É
```

#### 3Ô∏è‚É£ –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ –≤ initState:
```dart
@override
void initState() {
  super.initState();
  _loadUserType();
  _restoreLastTab();
  _autoVisitMapIfNeeded(); // üÜï Variant 6: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–∏–∑–∏—Ç –Ω–∞ –∫–∞—Ä—Ç—É
}
```

#### 4Ô∏è‚É£ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_autoVisitMapIfNeeded()`:
```dart
// VARIANT 6: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–∏–∑–∏—Ç –Ω–∞ –∫–∞—Ä—Ç—É –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ MapKit
Future<void> _autoVisitMapIfNeeded() async {
  print('üó∫Ô∏è [VARIANT 6] –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–∏–∑–∏—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç—É...');
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–µ–Ω—Ç–æ–º
  if (_userType != UserType.client) {
    print('üó∫Ô∏è [VARIANT 6] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∫–ª–∏–µ–Ω—Ç, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ-–≤–∏–∑–∏—Ç');
    return;
  }

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–ª–∞–≥ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
  final prefs = await SharedPreferences.getInstance();
  final hasVisitedMap = prefs.getBool('has_visited_map_for_mapkit') ?? false;
  
  if (hasVisitedMap) {
    print('üó∫Ô∏è [VARIANT 6] –ö–∞—Ä—Ç–∞ —É–∂–µ –ø–æ—Å–µ—â–∞–ª–∞—Å—å —Ä–∞–Ω–µ–µ, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ-–≤–∏–∑–∏—Ç');
    return;
  }

  print('üó∫Ô∏è [VARIANT 6] ‚úÖ –ü–ï–†–í–´–ô –ó–ê–ü–£–°–ö! –í—ã–ø–æ–ª–Ω—è–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–∏–∑–∏—Ç –Ω–∞ –∫–∞—Ä—Ç—É...');
  
  setState(() {
    _isAutoVisitingMap = true;
  });

  // –ñ–¥—ë–º, –ø–æ–∫–∞ UI –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç—Ä–∏—Å—É–µ—Ç—Å—è
  await Future.delayed(const Duration(milliseconds: 500));

  if (!mounted) return;

  // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É —Å –∫–∞—Ä—Ç–æ–π (MainScreen - –∏–Ω–¥–µ–∫—Å 1 –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤)
  print('üó∫Ô∏è [VARIANT 6] –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É —Å –∫–∞—Ä—Ç–æ–π (–∏–Ω–¥–µ–∫—Å 1)...');
  setState(() {
    _currentIndex = 1; // MainScreen —Å –∫–∞—Ä—Ç–æ–π
  });

  // –î–µ—Ä–∂–∏–º –∫–∞—Ä—Ç—É –æ—Ç–∫—Ä—ã—Ç–æ–π 500–º—Å –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ MapKit
  await Future.delayed(const Duration(milliseconds: 500));

  if (!mounted) return;

  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
  print('üó∫Ô∏è [VARIANT 6] –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–∏–Ω–¥–µ–∫—Å 0)...');
  setState(() {
    _currentIndex = 0; // BookingScreen
    _isAutoVisitingMap = false;
  });

  // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–ª–∞–≥, —á—Ç–æ –∫–∞—Ä—Ç–∞ —É–∂–µ –ø–æ—Å–µ—â–∞–ª–∞—Å—å
  await prefs.setBool('has_visited_map_for_mapkit', true);
  print('üó∫Ô∏è [VARIANT 6] ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–∏–∑–∏—Ç –∑–∞–≤–µ—Ä—à—ë–Ω! MapKit –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω.');
}
```

---

### –§–∞–π–ª: `lib/features/splash/splash_screen.dart`

#### –£–î–ê–õ–ï–ù–´ –∏–∑–º–µ–Ω–µ–Ω–∏—è Variant 5:
- ‚ùå –£–¥–∞–ª—ë–Ω –∏–º–ø–æ—Ä—Ç `yandex_maps_mapkit`
- ‚ùå –£–¥–∞–ª—ë–Ω —Ñ–ª–∞–≥ `_mapInitialized`
- ‚ùå –£–¥–∞–ª—ë–Ω while loop –æ–∂–∏–¥–∞–Ω–∏—è –∫–∞—Ä—Ç—ã –≤ `_startAnimationSequence()`
- ‚ùå –£–¥–∞–ª–µ–Ω–∞ –Ω–µ–≤–∏–¥–∏–º–∞—è –∫–∞—Ä—Ç–∞ –∏–∑ `build()` –º–µ—Ç–æ–¥–µ
- ‚úÖ –í–µ—Ä–Ω—É–ª–∏ —á–∏—Å—Ç—ã–π SplashScreen –±–µ–∑ –∫–∞—Ä—Ç—ã

---

## üé¨ –ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢?

### –°—Ü–µ–Ω–∞—Ä–∏–π –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:
1. üì± –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è SplashScreen
2. üè† –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ HomeScreen
3. ‚è≥ `initState()` –≤—ã–∑—ã–≤–∞–µ—Ç `_autoVisitMapIfNeeded()`
4. üîç –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ñ–ª–∞–≥ `has_visited_map_for_mapkit` –≤ SharedPreferences
5. ‚úÖ –ï—Å–ª–∏ —Ñ–ª–∞–≥ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫):
   - –ñ–¥—ë–º 500–º—Å (UI –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)
   - –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É **MainScreen** (–∏–Ω–¥–µ–∫—Å 1)
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Ä—Ç—É 500–º—Å (MapKit –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è)
   - –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ **BookingScreen** (–∏–Ω–¥–µ–∫—Å 0)
   - –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–ª–∞–≥ `has_visited_map_for_mapkit = true`
6. üéâ MapKit –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! Callbacks —Ä–∞–±–æ—Ç–∞—é—Ç!

### –°—Ü–µ–Ω–∞—Ä–∏–π –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—É—Å–∫–æ–≤:
1. üì± –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
2. üîç `_autoVisitMapIfNeeded()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–ª–∞–≥
3. ‚úÖ –§–ª–∞–≥ = `true` ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–∏–∑–∏—Ç –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è
4. üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø–∞–¥–∞–µ—Ç —Å—Ä–∞–∑—É –Ω–∞ –Ω—É–∂–Ω—É—é –≤–∫–ª–∞–¥–∫—É
5. üéâ Callbacks –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å (MapKit —É–∂–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω —Ä–∞–Ω–µ–µ)

---

## üÜö –°–†–ê–í–ù–ï–ù–ò–ï –° –ü–†–û–í–ê–õ–ò–í–®–ò–ú–ò–°–Ø –í–ê–†–ò–ê–ù–¢–ê–ú–ò

| –í–∞—Ä–∏–∞–Ω—Ç | –ü–æ–¥—Ö–æ–¥ | –†–µ–∑—É–ª—å—Ç–∞—Ç | –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–≤–∞–ª–∞ |
|---------|--------|-----------|-----------------|
| **Variant 1** | Singleton SearchManager | ‚ùå –ü–†–û–í–ê–õ | Timing –Ω–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –±–µ–∑ YandexMap |
| **Variant 4** | 1x1 –Ω–µ–≤–∏–¥–∏–º–∞—è –∫–∞—Ä—Ç–∞ BookingScreen | ‚ùå –ü–†–û–í–ê–õ | –†–∞–∑–º–µ—Ä —Å–ª–∏—à–∫–æ–º –º–∞–ª –¥–ª—è MapKit |
| **Variant 4.1** | 100x100 –Ω–µ–≤–∏–¥–∏–º–∞—è –∫–∞—Ä—Ç–∞ BookingScreen | ‚ùå –ü–†–û–í–ê–õ | –†–∞–∑–º–µ—Ä –≤—Å—ë –µ—â—ë –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω |
| **Variant 5** | 1x1 –Ω–µ–≤–∏–¥–∏–º–∞—è –∫–∞—Ä—Ç–∞ SplashScreen | ‚ùå –ü–†–û–í–ê–õ | –ö–æ–¥ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –∫–∞—Ä—Ç–∞ –Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è |
| **Variant 6** | Auto-visit MainScreen —Å –ø–æ–ª–Ω–æ–π –∫–∞—Ä—Ç–æ–π | ‚úÖ –î–û–õ–ñ–ï–ù –†–ê–ë–û–¢–ê–¢–¨ | –ò—Å–ø–æ–ª—å–∑—É–µ–º –ü–û–õ–ù–£–Æ –í–ò–î–ò–ú–£–Æ –∫–∞—Ä—Ç—É |

---

## ‚úÖ –û–ñ–ò–î–ê–ï–ú–´–ï –õ–û–ì–ò –ü–†–ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ò

### –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ:
```
üó∫Ô∏è [VARIANT 6] –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–∏–∑–∏—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç—É...
üó∫Ô∏è [VARIANT 6] ‚úÖ –ü–ï–†–í–´–ô –ó–ê–ü–£–°–ö! –í—ã–ø–æ–ª–Ω—è–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–∏–∑–∏—Ç –Ω–∞ –∫–∞—Ä—Ç—É...
üó∫Ô∏è [VARIANT 6] –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É —Å –∫–∞—Ä—Ç–æ–π (–∏–Ω–¥–µ–∫—Å 1)...
üó∫Ô∏è [VARIANT 6] –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–∏–Ω–¥–µ–∫—Å 0)...
üó∫Ô∏è [VARIANT 6] ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–∏–∑–∏—Ç –∑–∞–≤–µ—Ä—à—ë–Ω! MapKit –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω.
```

### –ü—Ä–∏ –≤–≤–æ–¥–µ –∞–¥—Ä–µ—Å–∞ –≤ autocomplete (–ü–û–°–õ–ï –∞–≤—Ç–æ-–≤–∏–∑–∏—Ç–∞):
```
üîç [AUTOCOMPLETE] –ü–æ–∏—Å–∫: "–î–æ–Ω–µ—Ü–∫, –ª–µ–Ω"
üîç [AUTOCOMPLETE] SuggestSession: Instance of 'SearchSuggestSessionImpl'
‚úÖ [AUTOCOMPLETE] Suggest –≤—ã–∑–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ, –æ–∂–∏–¥–∞–µ–º callback...
üéâüéâüéâ [AUTOCOMPLETE] RESPONSE CALLBACK FIRED! <-- –≠–¢–û –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –õ–û–ì!
üìç [AUTOCOMPLETE] –ü–æ–ª—É—á–µ–Ω–æ 10 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
```

### –ü—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—É—Å–∫–∞—Ö:
```
üó∫Ô∏è [VARIANT 6] –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–∏–∑–∏—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç—É...
üó∫Ô∏è [VARIANT 6] –ö–∞—Ä—Ç–∞ —É–∂–µ –ø–æ—Å–µ—â–∞–ª–∞—Å—å —Ä–∞–Ω–µ–µ, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ-–≤–∏–∑–∏—Ç
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –®–∞–≥ 1: –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
# Android:
adb shell pm clear com.timetotravel.app

# –ò–ª–∏ —É–¥–∞–ª–∏—Ç—å SharedPreferences –≤—Ä—É—á–Ω—É—é:
adb shell run-as com.timetotravel.app
cd shared_prefs
rm FlutterSharedPreferences.xml
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```bash
flutter run -d R5CT122DTYA
```

### –®–∞–≥ 3: –ù–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏
- ‚úÖ –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏ `[VARIANT 6]`
- ‚úÖ –î–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ä—Ç—É –∏ –æ–±—Ä–∞—Ç–Ω–æ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –¥–∞–∂–µ –Ω–µ –∑–∞–º–µ—Ç–∏—Ç—å)

### –®–∞–≥ 4: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å autocomplete
- –û—Ç–∫—Ä—ã—Ç—å —ç–∫—Ä–∞–Ω –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–∞—á–∞—Ç—å –≤–≤–æ–¥–∏—Ç—å –∞–¥—Ä–µ—Å –≤ –ø–æ–ª–µ "–û—Ç–∫—É–¥–∞"
- **–û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢**: `üéâüéâüéâ [AUTOCOMPLETE] RESPONSE CALLBACK FIRED!`

---

## üéØ –ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–•–ê

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| ‚úÖ **–õ–æ–≥–∏ –∞–≤—Ç–æ-–≤–∏–∑–∏—Ç–∞** | –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –≤—Å–µ 4 –ª–æ–≥–∞ `[VARIANT 6]` |
| ‚úÖ **Callback —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç** | –ü—Ä–∏ –≤–≤–æ–¥–µ –∞–¥—Ä–µ—Å–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è `üéâüéâüéâ [AUTOCOMPLETE] RESPONSE CALLBACK FIRED!` |
| ‚úÖ **–ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è** | Dropdown —Å –∞–¥—Ä–µ—Å–∞–º–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥ –ø–æ–ª–µ–º –≤–≤–æ–¥–∞ |
| ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É** | –ë–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä—É—á–Ω–æ–≥–æ –≤–∏–∑–∏—Ç–∞ –Ω–∞ –≤–∫–ª–∞–¥–∫—É —Å –∫–∞—Ä—Ç–æ–π |
| ‚úÖ **–û–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ** | –ü—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—É—Å–∫–∞—Ö –∞–≤—Ç–æ-–≤–∏–∑–∏—Ç –ù–ï –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è |

---

## ‚ö†Ô∏è –ï–°–õ–ò –ù–ï –†–ê–ë–û–¢–ê–ï–¢

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –õ–æ–≥–∏ Variant 6 –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
**–ü—Ä–æ–±–ª–µ–º–∞**: –ú–µ—Ç–æ–¥ `_autoVisitMapIfNeeded()` –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –º–µ—Ç–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `initState()`

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: Callbacks –≤—Å—ë –µ—â—ë –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç
**–ü—Ä–æ–±–ª–µ–º–∞**: MapKit –Ω–µ —É—Å–ø–µ–≤–∞–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è –∑–∞ 500–º—Å
**–†–µ—à–µ–Ω–∏–µ**: –£–≤–µ–ª–∏—á–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –≤ `_autoVisitMapIfNeeded()`:
```dart
await Future.delayed(const Duration(milliseconds: 1000)); // –ë—ã–ª–æ 500
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ê–≤—Ç–æ-–≤–∏–∑–∏—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑
**–ü—Ä–æ–±–ª–µ–º–∞**: SharedPreferences –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ storage

---

## üöÄ –ü–û–ß–ï–ú–£ VARIANT 6 –î–û–õ–ñ–ï–ù –†–ê–ë–û–¢–ê–¢–¨

1. **–ò—Å–ø–æ–ª—å–∑—É–µ–º –ü–û–õ–ù–£–Æ –í–ò–î–ò–ú–£–Æ –∫–∞—Ä—Ç—É** (MainScreen)
   - –ù–µ 1x1 –ø–∏–∫—Å–µ–ª—å
   - –ù–µ 100x100 –ø–∏–∫—Å–µ–ª–µ–π
   - –ê –ü–û–õ–ù–û–¶–ï–ù–ù–´–ô YandexMap widget —Å –ø–æ–ª–Ω—ã–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º

2. **–î–æ–∫–∞–∑–∞–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º**
   - –†—É—á–Ω–æ–π –≤–∏–∑–∏—Ç –Ω–∞ –∫–∞—Ä—Ç—É –£–ñ–ï –†–ê–ë–û–¢–ê–ï–¢
   - –ú—ã –ø—Ä–æ—Å—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ–º —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å

3. **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ UX**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ (500–º—Å + 500–º—Å)
   - –í—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ "–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
   - –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¢–û–õ–¨–ö–û –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ

4. **–ù–∞–¥—ë–∂–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è**
   - SharedPreferences –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∞–≤—Ç–æ-–≤–∏–∑–∏—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–∞–∑
   - –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—É—Å–∫–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–µ–¥—ë—Ç —Å–µ–±—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ

---

## üìä –ò–°–¢–û–†–ò–Ø –í–ê–†–ò–ê–ù–¢–û–í

| # | –î–∞—Ç–∞ | –í–∞—Ä–∏–∞–Ω—Ç | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|---|------|---------|-----------|
| 1 | 2 –¥–µ–∫ | Singleton SearchManager | ‚ùå –ü—Ä–æ–≤–∞–ª |
| 2 | 3 –¥–µ–∫ | 1x1 –Ω–µ–≤–∏–¥–∏–º–∞—è –∫–∞—Ä—Ç–∞ (BookingScreen) | ‚ùå –ü—Ä–æ–≤–∞–ª |
| 3 | 3 –¥–µ–∫ | 100x100 –Ω–µ–≤–∏–¥–∏–º–∞—è –∫–∞—Ä—Ç–∞ (BookingScreen) | ‚ùå –ü—Ä–æ–≤–∞–ª |
| 4 | 4 –¥–µ–∫ | 1x1 –Ω–µ–≤–∏–¥–∏–º–∞—è –∫–∞—Ä—Ç–∞ (SplashScreen) | ‚ùå –ü—Ä–æ–≤–∞–ª |
| 5 | 4 –¥–µ–∫ | 1x1 SplashScreen –ø–æ—Å–ª–µ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏ | ‚ùå –ü—Ä–æ–≤–∞–ª |
| 6 | 4 –¥–µ–∫ | **Auto-visit MainScreen** | ‚úÖ **–¢–ï–°–¢–ò–†–£–ï–ú** |

---

## üìù –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
2. üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
3. üìä –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤
4. üéâ –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

---

## üéì –í–´–í–û–î

**Variant 6** ‚Äî —ç—Ç–æ —Å–∞–º–æ–µ –Ω–∞–¥—ë–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –∏–∑ –≤—Å–µ—Ö –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö, –ø–æ—Ç–æ–º—É —á—Ç–æ:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–æ–∫–∞–∑–∞–Ω–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø–æ–¥—Ö–æ–¥ (—Ä—É—á–Ω–æ–π –≤–∏–∑–∏—Ç –Ω–∞ –∫–∞—Ä—Ç—É)
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ–∑–∞–º–µ—Ç–Ω–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ SplashScreen –∏–ª–∏ –Ω–µ–≤–∏–¥–∏–º—ã—Ö –∫–∞—Ä—Ç

**–ï—Å–ª–∏ —ç—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–±–ª–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≥–ª—É–±–∂–µ –≤ Yandex MapKit SDK.**
