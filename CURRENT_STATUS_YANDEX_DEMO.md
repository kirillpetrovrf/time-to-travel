# üîÑ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ –Ø–Ω–¥–µ–∫—Å–∞

**–î–∞—Ç–∞:** 24 –æ–∫—Ç—è–±—Ä—è 2025 –≥., 16:30  
**–°—Ç–∞—Ç—É—Å:** üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–±–æ—Ä–∫–∏

## üìã –ß—Ç–æ –¥–µ–ª–∞–µ–º —Å–µ–π—á–∞—Å

–ó–∞–ø—É—Å–∫–∞–µ–º **–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ø–Ω–¥–µ–∫—Å–∞** (`mapkit-flutter-demo-master/mapkit-samples/map_search`) —Å –≤–∞—à–∏–º API –∫–ª—é—á–æ–º, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ `SearchSuggestSessionSuggestListener` –≤ —á–∏—Å—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –Ø–Ω–¥–µ–∫—Å–∞  
‚úÖ –≠—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤–∞—à–µ–≥–æ –∫–æ–¥–∞ –∏–ª–∏ –±–∞–≥ –≤ SDK  

## üõ†Ô∏è –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

1. ‚úÖ –í–∑—è—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä: `mapkit-flutter-demo-master/mapkit-samples/map_search`
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –≤–∞—à API –∫–ª—é—á –≤ `main.dart`:
   ```dart
   await init.initMapkit(apiKey: "2f1d6a75-b751-4077-b305-c6abaea0b542");
   ```
3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω Gradle —Å `8.1.0` ‚Üí `8.7.3` –≤ `android/settings.gradle`
4. ‚úÖ –°–æ–∑–¥–∞–Ω –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª `.env` (—Ç—Ä–µ–±–æ–≤–∞–ª—Å—è –¥–ª—è —Å–±–æ—Ä–∫–∏)
5. üîÑ –ó–∞–ø—É—â–µ–Ω–∞ —Å–±–æ—Ä–∫–∞: `flutter run`

## ‚è≥ –¢–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å

```bash
cd /Users/kirillpetrov/Projects/time-to-travel/mapkit-flutter-demo-master/mapkit-samples/map_search
flutter run
```

**Gradle —Å–±–æ—Ä–∫–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ...**

–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ):
- Kotlin –≤–µ—Ä—Å–∏—è 1.9.0 —É—Å—Ç–∞—Ä–µ–≤–∞–µ—Ç (–º–∏–Ω–∏–º—É–º 2.1.0 —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π A: –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ

**–ó–Ω–∞—á–∏—Ç:**
- –ü—Ä–æ–±–ª–µ–º–∞ –≤ –≤–∞—à–µ–º –∫–æ–¥–µ/–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `SearchSuggestSessionSuggestListener` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –°—Ä–∞–≤–Ω–∏—Ç—å —Å–ø–æ—Å–æ–± –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ MapKit:
   - –í–∞—à –ø—Ä–æ–µ–∫—Ç: `MainApplication.kt` ‚Üí `MapKitFactory.initialize(this)`
   - –ü—Ä–∏–º–µ—Ä: `main.dart` ‚Üí `await init.initMapkit(apiKey: "...")`
2. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `init.initMapkit()` –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ
3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–¥–∞ –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç

### –°—Ü–µ–Ω–∞—Ä–∏–π B: –ü—Ä–∏–º–µ—Ä —Ç–æ–∂–µ –∫—Ä–∞—à–∏—Ç—Å—è ‚ùå

**–ó–Ω–∞—á–∏—Ç:**
- –ü—Ä–æ–±–ª–µ–º–∞ –≤ SDK `yandex_maps_mapkit: ^4.17.2`
- –í–æ–∑–º–æ–∂–Ω–æ –±–∞–≥ –≤ –Ω–∞—Ç–∏–≤–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ `libmaps-mobile.so`
- –ü—Ä–æ–±–ª–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞ –¥–ª—è —ç–º—É–ª—è—Ç–æ—Ä–∞

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ **—Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ**
2. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å **–¥—Ä—É–≥—É—é –≤–µ—Ä—Å–∏—é SDK**:
   ```yaml
   yandex_maps_mapkit: ^4.16.0  # –∏–ª–∏ ^4.15.0
   ```
3. –ù–∞–ø–∏—Å–∞—Ç—å **–±–∞–≥—Ä–µ–ø–æ—Ä—Ç –≤ –Ø–Ω–¥–µ–∫—Å** —Å stacktrace
4. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å **–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è**:
   - HTTP Geocoder API (–µ—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–∞—Ç)
   - –î—Ä—É–≥–æ–π –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π SDK

## üìä –ö–ª—é—á–µ–≤—ã–µ —Ä–∞–∑–ª–∏—á–∏—è: –í–∞—à –ø—Ä–æ–µ–∫—Ç vs –ü—Ä–∏–º–µ—Ä

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –í–∞—à –ø—Ä–æ–µ–∫—Ç | –ü—Ä–∏–º–µ—Ä –Ø–Ω–¥–µ–∫—Å–∞ |
|----------|-----------|----------------|
| **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** | `MainApplication.kt` | `main.dart` |
| **–ú–µ—Ç–æ–¥** | `MapKitFactory.initialize(this)` | `await init.initMapkit(apiKey: "...")` |
| **–ö–æ–≥–¥–∞** | –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (onCreate) | –ü–µ—Ä–µ–¥ runApp() |
| **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞** | Android-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ | –ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ |

## üîç –ß—Ç–æ –±—É–¥–µ–º –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤ –ø—Ä–∏–º–µ—Ä–µ

1. **–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** - –Ω–µ –∫—Ä–∞—à–∏—Ç—Å—è –ª–∏ —Å—Ä–∞–∑—É
2. **–û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∏—Å–∫–∞** - –Ω–∞–∂–∞—Ç—å "Show search"
3. **–í–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞** - –≤–≤–µ—Å—Ç–∏ "–ú–æ—Å–∫–≤–∞" –∏–ª–∏ "Coffee"
4. **–ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ** - –ø–æ—è–≤–ª—è—é—Ç—Å—è –ª–∏ –ø–æ–¥—Å–∫–∞–∑–∫–∏
5. **–õ–æ–≥–∏** - —Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –≤—ã–≤–æ–¥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ

## üì± –¢–µ—Å—Ç–æ–≤–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

- **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:** Android Emulator `sdk gphone16k arm64`
- **OS:** Android 16 (API level 35)
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** ARM64

## ‚ö†Ô∏è –í–∞–∂–Ω–æ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞

### –ï—Å–ª–∏ –ø—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç:
–ù—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å–ø–æ—Å–æ–± –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ MapKit –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ:

**–£–¥–∞–ª–∏—Ç—å –∏–∑ `MainApplication.kt`:**
```kotlin
override fun onCreate() {
    super.onCreate()
    MapKitFactory.setApiKey("...")
    MapKitFactory.initialize(this)  // ‚ùå –£–¥–∞–ª–∏—Ç—å
}
```

**–î–æ–±–∞–≤–∏—Ç—å –≤ `main.dart` (–ü–ï–†–ï–î runApp):**
```dart
import 'package:yandex_maps_mapkit/init.dart' as init;

void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  
  // ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ init.initMapkit
  await init.initMapkit(apiKey: "2f1d6a75-b751-4077-b305-c6abaea0b542");
  
  runApp(MyApp());
}
```

### –ï—Å–ª–∏ –ø—Ä–∏–º–µ—Ä –∫—Ä–∞—à–∏—Ç—Å—è:
1. –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏ –∫—Ä–∞—à–∞
2. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
3. –û—Ç–∫–∞—Ç–∏—Ç—å—Å—è –Ω–∞ –±–æ–ª–µ–µ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é SDK
4. –ù–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ø–Ω–¥–µ–∫—Å

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

- [ ] –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–º–µ—Ä
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ
- [ ] –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- [ ] –ü—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ –æ –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö

---

**–û–∂–∏–¥–∞–Ω–∏–µ —Å–±–æ—Ä–∫–∏ –ø—Ä–∏–º–µ—Ä–∞... ‚è≥**

–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞: ~16:25  
–ü—Ä–æ—à–ª–æ: ~5 –º–∏–Ω—É—Ç  
–°—Ç–∞—Ç—É—Å: Gradle –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç –ø—Ä–æ–µ–∫—Ç
