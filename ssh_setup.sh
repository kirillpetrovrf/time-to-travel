#!/bin/bash

# SSH Agent Setup –¥–ª—è macOS
# –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç SSH –∞–≥–µ–Ω—Ç —á—Ç–æ–±—ã –Ω–µ –≤–≤–æ–¥–∏—Ç—å –ø–∞—Ä–æ–ª—å –∫–∞–∂–¥—ã–π —Ä–∞–∑

echo "üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –∞–≥–µ–Ω—Ç–∞..."

# –ó–∞–ø—É—Å–∫–∞–µ–º ssh-agent –µ—Å–ª–∏ –µ—â–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω
if [ -z "$SSH_AUTH_SOCK" ]; then
    eval "$(ssh-agent -s)"
    echo "‚úÖ SSH –∞–≥–µ–Ω—Ç –∑–∞–ø—É—â–µ–Ω"
else
    echo "‚úÖ SSH –∞–≥–µ–Ω—Ç —É–∂–µ –∑–∞–ø—É—â–µ–Ω"
fi

# –î–æ–±–∞–≤–ª—è–µ–º –∫–ª—é—á –≤ –∞–≥–µ–Ω—Ç (–ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å –æ–¥–∏–Ω —Ä–∞–∑)
echo "üìù –î–æ–±–∞–≤–ª—è–µ–º –∫–ª—é—á –≤ –∞–≥–µ–Ω—Ç (–≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å 102938)..."
ssh-add ~/.ssh/id_ed25519

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∫–ª—é—á –¥–æ–±–∞–≤–ª–µ–Ω
echo ""
echo "üìã –°–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π:"
ssh-add -l

echo ""
echo "‚úÖ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSH –±–µ–∑ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞."
echo ""
echo "üí° –ß—Ç–æ–±—ã –∫–ª—é—á —Å–æ—Ö—Ä–∞–Ω—è–ª—Å—è –º–µ–∂–¥—É —Å–µ–∞–Ω—Å–∞–º–∏ –Ω–∞ macOS, –¥–æ–±–∞–≤—å—Ç–µ –≤ ~/.ssh/config:"
echo ""
echo "Host *"
echo "  AddKeysToAgent yes"
echo "  UseKeychain yes"
echo "  IdentityFile ~/.ssh/id_ed25519"
