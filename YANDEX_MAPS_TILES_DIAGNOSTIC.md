# üó∫Ô∏è –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú–´ –° –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï–ú –¢–ê–ô–õ–û–í YANDEX MAPS

## –ü–†–û–ë–õ–ï–ú–ê
–ö–∞—Ä—Ç–∞ Yandex Maps –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ **—Å–µ—Ç–∫—É –±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (—Ç–∞–π–ª–æ–≤)**.

**–°–∏–º–ø—Ç–æ–º—ã:**
- ‚úÖ –ö–∞—Ä—Ç–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –ö–∞–º–µ—Ä–∞ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è
- ‚úÖ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- ‚ùå **–¢–∞–π–ª—ã –∫–∞—Ä—Ç—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è** (–≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –ø—É—Å—Ç–∞—è —Å–µ—Ç–∫–∞)

**–û—à–∏–±–∫–∞ –≤ –ª–æ–≥–∞—Ö:**
```
W/yandex.maps( 7742): poxHcJDuv2tO5gpI+pN3: No available cache for request
```

---

## –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–ò–ß–ò–ù–´

### 1. ‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç–µ–≤—ã–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
**–°–∏–º–ø—Ç–æ–º—ã:**
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- Wi-Fi –ø–æ–¥–∫–ª—é—á–µ–Ω, –Ω–æ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–µ—Ä–∞–º
- –ë—Ä–∞–Ω–¥–º–∞—É—ç—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ Yandex

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
adb shell ping -c 3 maps.yandex.ru
adb shell ping -c 3 8.8.8.8

# –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS
adb shell nslookup maps.yandex.ru
```

### 2. ‚ùå API-–∫–ª—é—á Yandex Maps –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω
**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∞ "No available cache for request"
- –ó–∞–ø—Ä–æ—Å—ã –∫ API –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ `AndroidManifest.xml`
2. –ù–∞–π–¥–∏—Ç–µ: `<meta-data android:name="com.yandex.mapkit.ApiKey" android:value="..."/>`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API-–∫–ª—é—á –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω: `2f1d6a75-b751-4077-b305-c6abaea0b542`

**–ì–¥–µ –ø–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á:**
https://developer.tech.yandex.ru/services

### 3. ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è Android
**–¢—Ä–µ–±—É–µ–º—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –≤ `AndroidManifest.xml`:**
```xml
<!-- –°–µ—Ç—å -->
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />

<!-- –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) -->
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
```

### 4. ‚ùå –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ cleartext HTTP-—Ç—Ä–∞—Ñ–∏–∫–∞ (Android 9+)
**–°–∏–º–ø—Ç–æ–º—ã:**
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Android 8.x –∏ –Ω–∏–∂–µ
- –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Android 9+ (API 28+)

**–†–µ—à–µ–Ω–∏–µ:**
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `AndroidManifest.xml`:
```xml
<application
    android:usesCleartextTraffic="true"
    android:networkSecurityConfig="@xml/network_security_config">
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `android/app/src/main/res/xml/network_security_config.xml`:
```xml
<network-security-config>
    <base-config cleartextTrafficPermitted="true">
        <trust-anchors>
            <certificates src="system" />
            <certificates src="user" />
        </trust-anchors>
    </base-config>
    
    <domain-config cleartextTrafficPermitted="true">
        <domain includeSubdomains="true">yandex.ru</domain>
        <domain includeSubdomains="true">yandex.net</domain>
        <domain includeSubdomains="true">yandex.com</domain>
    </domain-config>
</network-security-config>
```

### 5. ‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–µ—à–µ–º MapKit
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
adb shell pm clear com.timetotravel.app

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
flutter clean
flutter run
```

### 6. ‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å DNS –≤ –ö–∏—Ç–∞–µ –∏–ª–∏ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω–∞—Ö
–ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ **–ö–∏—Ç–∞–µ** –∏–ª–∏ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω–∞—Ö —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏:
- Yandex Maps –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
- –¢—Ä–µ–±—É–µ—Ç—Å—è VPN –∏–ª–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∫–∞—Ä—Ç

---

## –î–ò–ê–ì–ù–û–°–¢–ò–ß–ï–°–ö–ò–ï –ö–û–ú–ê–ù–î–´

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ Yandex Maps
./check_yandex_maps_logs.sh

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
adb logcat | grep -E "yandex.maps|MAP|MAPKIT"
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã
adb shell "tcpdump -i any -s 0 -w - 'host maps.yandex.ru'" | tcpdump -r - -A
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
```bash
# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
adb shell dumpsys package com.timetotravel.app | grep permission
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ API
```bash
# –¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ Yandex Maps API —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
adb shell "curl -v https://maps.yandex.ru"
```

---

## –ü–û–®–ê–ì–û–í–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
```bash
adb shell ping -c 5 maps.yandex.ru
```
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–∞–∫–µ—Ç—ã —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –∏ –ø–æ–ª—É—á–µ–Ω—ã

---

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
flutter run
```
**–°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞:**
```
‚úÖ Yandex MapKit —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω (v4.24.0)
üó∫Ô∏è [MAP] ‚úÖ –ö–ê–†–¢–ê –ì–û–¢–û–í–ê –ö –†–ê–ë–û–¢–ï
‚ùå W/yandex.maps: No available cache for request  # <-- –û–®–ò–ë–ö–ê!
```

---

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Android
1. –û—Ç–∫—Ä–æ–π—Ç–µ `android/app/src/main/AndroidManifest.xml`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
   - `android:usesCleartextTraffic="true"`
   - `android:networkSecurityConfig="@xml/network_security_config"`
   - –í—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã

---

### –®–∞–≥ 4: –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```bash
flutter clean
flutter pub get
flutter run
```

---

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API-–∫–ª—é—á
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: https://developer.tech.yandex.ru/services
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –≤–∞—à–µ–≥–æ API-–∫–ª—é—á–∞
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
   - –ö–ª—é—á –∞–∫—Ç–∏–≤–µ–Ω
   - –ù–µ –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤
   - –í–∫–ª—é—á–µ–Ω MapKit API

---

## –î–û–ë–ê–í–õ–ï–ù–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### 1. –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `custom_route_with_map_screen.dart`
```dart
// –ü–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞—Ä—Ç—ã —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –≤—ã–≤–æ–¥–∏—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
üó∫Ô∏è [MAP] üîç –ü–†–û–í–ï–†–ö–ê –ü–û–°–õ–ï 3 –°–ï–ö–£–ù–î:
üó∫Ô∏è [MAP] üîç –ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ —Ç–æ–ª—å–∫–æ —Å–µ—Ç–∫—É –±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
üó∫Ô∏è [MAP] üîç ‚ùå –¢–∞–π–ª—ã –ù–ï –ó–ê–ì–†–£–ó–ò–õ–ò–°–¨ –æ—Ç Yandex API
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é
```xml
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
```

### 3. –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```bash
./check_yandex_maps_logs.sh
```

---

## –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –¢–µ—Å—Ç 1: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```bash
flutter run
```

### –¢–µ—Å—Ç 2: –û—Ç–∫—Ä–æ–π—Ç–µ —ç–∫—Ä–∞–Ω "–°–≤–æ–±–æ–¥–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç"
–°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏:
```
üó∫Ô∏è [MAP] ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ö–ê–†–¢–´ ==========
üó∫Ô∏è [MAP] üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ö–ê–†–¢–´:
üó∫Ô∏è [MAP] üîç MapType: ...
üó∫Ô∏è [MAP] üîç –ü–†–û–í–ï–†–ö–ê –ü–û–°–õ–ï 3 –°–ï–ö–£–ù–î:
```

### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ø–æ—è–≤–∏–ª–∏—Å—å –ª–∏ —Ç–∞–π–ª—ã
–ï—Å–ª–∏ **—á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –∫–∞—Ä—Ç–∞ –≤—Å—ë –µ—â—ë –ø—É—Å—Ç–∞—è**:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤
./check_yandex_maps_logs.sh
```

–°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞:
- `‚ùå [CACHE ERROR]` - –ø—Ä–æ–±–ª–µ–º–∞ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Ç–∞–π–ª–æ–≤
- `‚ùå [HTTP ERROR]` - –ø—Ä–æ–±–ª–µ–º–∞ —Å —Å–µ—Ç—å—é
- `‚ö†Ô∏è  [SSL WARNING]` - –ø—Ä–æ–±–ª–µ–º–∞ —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏

---

## –ò–ó–í–ï–°–¢–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### –ü—Ä–æ–±–ª–µ–º–∞: Samsung —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å Knox
**–°–∏–º–ø—Ç–æ–º—ã:**
- –†–∞–±–æ—Ç–∞–µ—Ç –≤ —ç–º—É–ª—è—Ç–æ—Ä–µ
- –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Samsung —Å Knox

**–†–µ—à–µ–Ω–∏–µ:**
```xml
<!-- –î–æ–±–∞–≤—å—Ç–µ –≤ AndroidManifest.xml -->
<application
    android:networkSecurityConfig="@xml/network_security_config">
    
    <!-- –û—Ç–∫–ª—é—á–∏—Ç–µ Knox –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ -->
    <meta-data
        android:name="com.samsung.android.knox.EXEMPT"
        android:value="true"/>
</application>
```

### –ü—Ä–æ–±–ª–µ–º–∞: –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –±–µ–∑ Google Play Services
**–°–∏–º–ø—Ç–æ–º—ã:**
- –ö–∏—Ç–∞–π—Å–∫–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω—ã –±–µ–∑ GMS
- Huawei —Å HMS

**–†–µ—à–µ–Ω–∏–µ:**
- Yandex Maps **—Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ Google Play Services**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–º–µ–Ω–Ω–æ `yandex_maps_mapkit` v4.24.0+
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `play-services-location` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)

---

## –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. ‚úÖ **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ —ç–∫—Ä–∞–Ω –∫–∞—Ä—Ç—ã
2. ‚úÖ **–ü–æ–¥–æ–∂–¥–∏—Ç–µ 3 —Å–µ–∫—É–Ω–¥—ã** –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
3. ‚úÖ **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: `./check_yandex_maps_logs.sh`
4. ‚úÖ **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç**: `adb shell ping maps.yandex.ru`
5. ‚úÖ **–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è**: —Å–æ–æ–±—â–∏—Ç–µ –º–Ω–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 17 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è MapKit:** 4.24.0-beta  
**–°—Ç–∞—Ç—É—Å:** üîç –í –ü–†–û–¶–ï–°–°–ï –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò
