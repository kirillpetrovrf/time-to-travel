# 🎯 Система ценообразования багажа - Быстрая справка

## 💡 Главное правило

**САМЫЙ ДОРОГОЙ БАГАЖ - БЕСПЛАТНО!** 🎉

Клиент всегда получает максимальную выгоду, независимо от порядка выбора.

---

## 📊 Цены на багаж

| Размер | Описание | Цена за доп. |
|--------|----------|--------------|
| 🟢 **S** (малый) | До 10 кг, 55×40×20 см | **500₽** |
| 🔵 **M** (средний) | До 20 кг, 70×50×30 см | **1000₽** |
| 🟠 **L** (большой) | До 30 кг, 90×60×40 см | **2000₽** |
| 🟣 **Custom** | Индивидуальный | Уточняется |

---

## 🧮 Примеры расчета

### ✅ Один багаж (БЕСПЛАТНО)
```
1 S = 0₽
1 M = 0₽
1 L = 0₽
```

### ✅ Два одинаковых багажа
```
2 S = 0₽ + 500₽ = 500₽
2 M = 0₽ + 1000₽ = 1000₽
2 L = 0₽ + 2000₽ = 2000₽
```

### ⭐ Два разных багажа (ВЫГОДНО!)
```
1 S + 1 M = M бесплатно + S платно = 500₽
1 S + 1 L = L бесплатно + S платно = 500₽
1 M + 1 L = L бесплатно + M платно = 1000₽
```

### 🎯 Три багажа
```
3 S = 0₽ + 500₽ + 500₽ = 1000₽
1 S + 1 M + 1 L = L бесплатно + M + S = 1500₽
```

---

## 🤔 Как это работает?

1. Клиент выбирает багаж любого размера и количества
2. Система **автоматически находит самый дорогой** багаж
3. Самый дорогой делается **бесплатным**
4. Остальные багажи суммируются по полным ценам

---

## 💰 Примеры экономии клиента

| Выбор | Без скидки | С нашей системой | Экономия |
|-------|------------|-------------------|----------|
| 1 S + 1 L | 2500₽ | **500₽** | 🎉 **2000₽** |
| 1 M + 1 L | 3000₽ | **1000₽** | 🎉 **2000₽** |
| 1 S + 1 M + 1 L | 3500₽ | **1500₽** | 🎉 **2000₽** |

---

## 🎨 Отображение в приложении

### На экране выбора багажа:

**Если выбрано:** 1 M + 1 S

```
╔════════════════════════╗
║ 🔵 Средний (M)        ║
║ БЕСПЛАТНО ✨          ║
║ Количество: 1         ║
╚════════════════════════╝

╔════════════════════════╗
║ 🟢 Малый (S)          ║
║ 500₽                  ║
║ Количество: 1         ║
╚════════════════════════╝

📊 Итого к оплате: 500₽
```

### Информационное сообщение:

```
⚠️ Дополнительная оплата
Самый дорогой багаж бесплатно, остальные платно
```

---

## 🎯 Для тестирования

### Тест 1: Один багаж
- Выбрать 1 L
- ✅ Итого: **0₽**

### Тест 2: Два одинаковых
- Выбрать 2 M
- ✅ Итого: **1000₽** (1 бесплатно + 1 платно)

### Тест 3: Два разных (проверка логики)
- Выбрать 1 S + 1 L
- ✅ Итого: **500₽** (L бесплатно, S платно)
- ❌ НЕ 2000₽!

### Тест 4: Три разных
- Выбрать 1 S + 1 M + 1 L
- ✅ Итого: **1500₽** (L бесплатно, M + S платно)

---

## 🔧 Техническая информация

### Алгоритм расчета:

1. Собрать все багажи в массив с ценами
2. Отсортировать по убыванию (от дорогих к дешевым)
3. Первый элемент (самый дорогой) = бесплатно
4. Суммировать остальные элементы

### Код (упрощенно):

```dart
List<double> prices = getAllBaggagePrices();
prices.sort((a, b) => b.compareTo(a)); // Сортировка по убыванию

double total = 0;
for (int i = 1; i < prices.length; i++) {
  total += prices[i]; // Пропускаем первый (самый дорогой)
}
return total;
```

---

## 📞 Частые вопросы

**Q: Что если я выберу сначала дешевый, потом дорогой багаж?**  
A: Не важно! Система автоматически найдет самый дорогой и сделает его бесплатным.

**Q: Можно ли выбрать несколько дорогих багажей?**  
A: Да! Но бесплатным будет только ОДИН самый дорогой. Остальные платные.

**Q: Как работает с Custom багажом?**  
A: Custom имеет цену 0₽, поэтому не влияет на расчет. Его цена уточняется диспетчером отдельно.

---

## ✨ Преимущества

✅ Клиент всегда получает максимальную скидку  
✅ Не нужно думать о порядке выбора багажа  
✅ Прозрачная и честная система ценообразования  
✅ Конкурентное преимущество перед другими перевозчиками  

---

**Обновлено:** 6 октября 2025 г.  
**Статус:** Production Ready ✅
